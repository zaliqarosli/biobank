!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var _container=__webpack_require__(18),_container2=_interopRequireDefault(_container),args=QueryString.get(document.currentScript.src);$(function(){var biobankContainer=React.createElement("div",{className:"page-container-form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-md-9 col-lg-12"},React.createElement(_container2.default,{containerPageDataURL:loris.BaseURL+"/biobank/ajax/requestData.php?action=getContainerData&barcode="+args.barcode,optionsURL:loris.BaseURL+"/biobank/ajax/requestData.php?action=getFormOptions"}))));ReactDOM.render(biobankContainer,document.getElementById("lorisworkspace"))})},,,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_containerDisplay=__webpack_require__(7),_containerDisplay2=_interopRequireDefault(_containerDisplay),ContainerParentForm=function(_React$Component){function ContainerParentForm(props){_classCallCheck(this,ContainerParentForm);var _this=_possibleConstructorReturn(this,(ContainerParentForm.__proto__||Object.getPrototypeOf(ContainerParentForm)).call(this,props));return _this.state={formData:{},formErrors:{},errorMessage:null},_this.mapFormOptions=_this.mapFormOptions.bind(_this),_this.handleSubmit=_this.handleSubmit.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this}return _inherits(ContainerParentForm,_React$Component),_createClass(ContainerParentForm,[{key:"componentDidMount",value:function(){if(this.props.container){var formData=this.state.formData;formData.container=JSON.stringify(this.props.container),formData.parentContainerId=this.props.container.parentContainerId,this.setState({formData:formData})}}},{key:"mapFormOptions",value:function(rawObject,targetAttribute){var data={};for(var id in rawObject)data[id]=rawObject[id][targetAttribute];return data}},{key:"render",value:function(){var parentContainerField,coordinateField,containerDisplay,containerBarcodesNonPrimary=this.mapFormOptions(this.props.containersNonPrimary,"barcode");if(parentContainerField=React.createElement(SelectElement,{name:"parentContainerId",label:"Parent Container Barcode",options:containerBarcodesNonPrimary,onUserInput:this.setFormData,ref:"parentContainerId",required:!0,value:this.state.formData.parentContainerId}),this.state.formData.parentContainerId){var dimensionId=this.props.containersNonPrimary[this.state.formData.parentContainerId].dimensionId;if(dimensionId){var dimensions=this.props.containerDimensions[dimensionId],coordinatesTotal=1;for(var dimension in dimensions)coordinatesTotal*=dimensions[dimension];for(var coordinates={},i=1;i<=coordinatesTotal;i++)this.props.containerCoordinates[this.state.formData.parentContainerId]&&this.props.containerCoordinates[this.state.formData.parentContainerId][i]||(coordinates[i]=i);containerDisplay=React.createElement(_containerDisplay2.default,{dimensions:this.props.containerDimensions[this.props.containersNonPrimary[this.state.formData.parentContainerId].dimensionId],coordinates:this.props.containerCoordinates[this.state.formData.parentContainerId],containerTypes:this.props.containerTypes,containerStati:this.props.containerStati,select:!0,selectedCoordinate:this.state.formData.coordinate,updateParent:this.setFormData})}}var updateButton;return this.props.container&&(updateButton=React.createElement(ButtonElement,{label:"Update"})),React.createElement(FormElement,{onSubmit:this.handleSubmit},parentContainerField,coordinateField,containerDisplay,React.createElement("br",null),updateButton)}},{key:"handleSubmit",value:function(){var formData=this.state.formData,formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){this.props.refreshParent(),swal("Parent Container Update Successful!","","success"),this.props.onSuccess()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"setFormData",value:function(formElement,value){var formData=this.state.formData;formData[formElement]=value,"parentContainerId"===formElement&&(formData.coordinate=""),this.setState({formData:formData},this.setParentFormData)}},{key:"setParentFormData",value:function(){if(!this.props.container){var formData=this.state.formData;this.props.setParentFormData(formData)}}}]),ContainerParentForm}(React.Component);ContainerParentForm.propTypes={DataURL:React.PropTypes.string,action:React.PropTypes.string,barcode:React.PropTypes.string,refreshTable:React.PropTypes.func,onSuccess:React.PropTypes.func},exports.default=ContainerParentForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerDisplay=function(_React$Component){function ContainerDisplay(){_classCallCheck(this,ContainerDisplay);var _this=_possibleConstructorReturn(this,(ContainerDisplay.__proto__||Object.getPrototypeOf(ContainerDisplay)).call(this));return _this.redirectURL=_this.redirectURL.bind(_this),_this.drag=_this.drag.bind(_this),_this.drop=_this.drop.bind(_this),_this}return _inherits(ContainerDisplay,_React$Component),_createClass(ContainerDisplay,[{key:"componentDidMount",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"componenDidUpdate",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"redirectURL",value:function(e){var coordinate=e.target.id;if(this.props.coordinates[coordinate]){var type=this.props.types[this.props.children[this.props.coordinates[coordinate]].typeId].primary?"specimen":"container",url=loris.BaseURL+"/biobank/"+type+"/?barcode="+this.props.children[this.props.coordinates[coordinate]].barcode;window.location.href=url}}},{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"drag",value:function(e){var container=JSON.stringify(this.props.children[this.props.coordinates[e.target.id]]);e.dataTransfer.setData("text/plain",container)}},{key:"drop",value:function(e){e.preventDefault();var container=e.dataTransfer.getData("text/plain"),newCoordinate=parseInt(e.target.id);this.props.updateParent(container,newCoordinate)}},{key:"render",value:function(){var _this2=this,column=[],row=[],display=void 0,coordinate=1;if(this.props.dimensions){for(var y=0;y<this.props.dimensions.y;y++){column=[];for(var x=1;x<=this.props.dimensions.x;x++){var nodeWidth=500/this.props.dimensions.x-500/this.props.dimensions.x*.08,nodeStyle={width:nodeWidth},nodeClass="node",tooltipTitle=null,dataHtml="false",dataToggle=null,dataPlacement=null,draggable="false",onDragStart=null,onDragOver=this.allowDrop,onDrop=this.drop,onClick=null;this.props.select||this.props.coordinates&&this.props.coordinates[coordinate]&&(nodeClass="node occupied",dataHtml="true",dataToggle="tooltip",dataPlacement="top",tooltipTitle="<h5>"+this.props.children[this.props.coordinates[coordinate]].barcode+"</h5><h5>"+this.props.containerTypes[this.props.children[this.props.coordinates[coordinate]].typeId].label+"</h5><h5>"+this.props.containerStati[this.props.children[this.props.coordinates[coordinate]].statusId].status+"</h5>",draggable="true",onDragStart=this.drag,onDragOver=null,onDrop=null,onClick=this.redirectURL),this.props.select&&(coordinate==this.props.selectedCoordinate?nodeClass="node occupied":this.props.coordinates?this.props.coordinates&&(this.props.coordinates[coordinate]?this.props.coordinates[coordinate]:(nodeClass="node available",onClick=function(e){return _this2.props.updateParent("coordinate",e.target.id)})):(nodeClass="node available",onClick=function(e){return _this2.props.updateParent("coordinate",e.target.id)}));var coordinateDisplay=void 0;coordinateDisplay=x+this.props.dimensions.x*y,column.push(React.createElement("div",{id:coordinate,className:nodeClass,"data-html":dataHtml,"data-toggle":dataToggle,"data-placement":dataPlacement,"data-original-title":tooltipTitle,style:nodeStyle,onClick:onClick,draggable:draggable,onDragStart:onDragStart,onDragOver:onDragOver,onDrop:onDrop},coordinateDisplay)),coordinate++}var rowHeight=500/this.props.dimensions.y-500/this.props.dimensions.y*.08,rowStyle=(500/this.props.dimensions.y*.04,{height:rowHeight});row.push(React.createElement("div",{className:"row",style:rowStyle},column))}display=row}return React.createElement("div",{className:"display"},display)}}]),ContainerDisplay}(React.Component);ContainerDisplay.propTypes={},exports.default=ContainerDisplay},,,,,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(14),_Modal2=_interopRequireDefault(_Modal),FormModal=function(_React$Component){function FormModal(props){_classCallCheck(this,FormModal);var _this=_possibleConstructorReturn(this,(FormModal.__proto__||Object.getPrototypeOf(FormModal)).call(this,props));return _this.state={show:!1,throwWarning:!1},_this.openModal=_this.openModal.bind(_this),_this.closeModal=_this.closeModal.bind(_this),_this.confirmClose=_this.confirmClose.bind(_this),_this.setWarning=_this.setWarning.bind(_this),_this}return _inherits(FormModal,_React$Component),_createClass(FormModal,[{key:"renderChildren",value:function(){var _this2=this;return React.Children.map(this.props.children,function(child){return React.cloneElement(child,{onSuccess:_this2.closeModal,onChange:_this2.setWarning})})}},{key:"openModal",value:function(){this.setState({show:!0})}},{key:"setWarning",value:function(){this.setState({throwWarning:!0})}},{key:"confirmClose",value:function(){this.state.throwWarning?swal({title:"Are You Sure?",text:"Leaving the form will result in the loss of any information entered.",type:"warning",showCancelButton:!0,confirmButtonText:"Proceed",cancelButtonText:"Cancel"},function(){this.closeModal()}.bind(this)):this.closeModal()}},{key:"closeModal",value:function(){this.setState({show:!1,throwWarning:!1})}},{key:"render",value:function(){return React.createElement(_Modal2.default,_extends({closeModal:this.confirmClose,openModal:this.openModal,show:this.state.show},this.props),this.renderChildren())}}]),FormModal}(React.Component);FormModal.propTypes={title:React.PropTypes.string,buttonClass:React.PropTypes.string,buttonStyle:React.PropTypes.object,buttonContent:React.PropTypes.object},FormModal.defaultProps={buttonClass:"btn btn-primary"},exports.default=FormModal},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Modal=function(_React$Component){function Modal(props){return _classCallCheck(this,Modal),_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this,props))}return _inherits(Modal,_React$Component),_createClass(Modal,[{key:"render",value:function(){var modal,backdropStyle={position:"fixed",zIndex:9998,top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50},modalStyle={position:"relative",maxWidth:1e3,maxHeight:"100%",margin:"0 auto",backgroundColor:"#fff",borderRadius:10,overflowY:"auto",zIndex:9999},titleStyle={display:"flex",flexDirection:"row",alignItems:"center",background:"#093782",height:"70px",borderTopRightRadius:"10",color:"#FFFFFF",fontSize:24,padding:20},glyphStyle={marginLeft:"auto",cursor:"pointer"},bodyStyle={padding:15},button=React.createElement("div",{className:this.props.buttonClass,onClick:this.props.openModal},this.props.buttonContent);return this.props.show&&(modal=React.createElement("div",{style:backdropStyle,onClick:this.props.closeModal},React.createElement("div",{style:modalStyle,onClick:function(e){e.stopPropagation()}},React.createElement("div",{style:titleStyle},this.props.title,React.createElement("span",{style:glyphStyle,onClick:this.props.closeModal},"×")),React.createElement("div",{style:bodyStyle},this.props.children)))),React.createElement("div",{style:this.props.style},button,modal)}}]),Modal}(React.Component);Modal.propTypes={title:React.PropTypes.string,buttonClass:React.PropTypes.string,buttonStyle:React.PropTypes.object,buttonContent:React.PropTypes.object,show:React.PropTypes.boolean,closeModal:React.PropTypes.func,openModal:React.PropTypes.func},Modal.defaultProps={buttonClass:"btn btn-primary"},exports.default=Modal},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Loader=function(_React$Component){function Loader(props){return _classCallCheck(this,Loader),_possibleConstructorReturn(this,(Loader.__proto__||Object.getPrototypeOf(Loader)).call(this,props))}return _inherits(Loader,_React$Component),_createClass(Loader,[{key:"render",value:function(){return React.createElement("div",{className:"loader-container"},React.createElement("div",{className:"loader"}))}}]),Loader}(React.Component);exports.default=Loader},,,function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(15),_Loader2=_interopRequireDefault(_Loader),_FormModal=__webpack_require__(13),_FormModal2=_interopRequireDefault(_FormModal),_temperatureField=__webpack_require__(19),_containerParentForm=(_interopRequireDefault(_temperatureField),__webpack_require__(6)),_containerParentForm2=_interopRequireDefault(_containerParentForm),_lifeCycle=__webpack_require__(20),_lifeCycle2=_interopRequireDefault(_lifeCycle),_barcodePath=__webpack_require__(21),_barcodePath2=_interopRequireDefault(_barcodePath),_containerDisplay=__webpack_require__(7),_containerDisplay2=_interopRequireDefault(_containerDisplay),_containerCheckout=__webpack_require__(22),_containerCheckout2=_interopRequireDefault(_containerCheckout),BiobankContainer=function(_React$Component){function BiobankContainer(props){_classCallCheck(this,BiobankContainer);var _this=_possibleConstructorReturn(this,(BiobankContainer.__proto__||Object.getPrototypeOf(BiobankContainer)).call(this,props));return _this.state={Data:{},isLoaded:!1,loadedData:0},_this.fetchContainerData=_this.fetchContainerData.bind(_this),_this.fetchOptions=_this.fetchOptions.bind(_this),_this.submitCoordinate=_this.submitCoordinate.bind(_this),_this.updateCoordinate=_this.updateCoordinate.bind(_this),_this.drag=_this.drag.bind(_this),$('[data-toggle="tooltip"]').tooltip(),_this}return _inherits(BiobankContainer,_React$Component),_createClass(BiobankContainer,[{key:"componentDidMount",value:function(){this.fetchContainerData(),this.fetchOptions()}},{key:"fetchContainerData",value:function(){var self=this;$.ajax(this.props.containerPageDataURL,{dataType:"json",success:function(data){self.setState({Data:data})},error:function(_error,errorCode,errorMsg){console.error(_error,errorCode,errorMsg),self.setState({error:"An error occurred when loading the form!"})}})}},{key:"fetchOptions",value:function(){var self=this;$.ajax(this.props.optionsURL,{dataType:"json",success:function(data){self.setState({options:data,isLoaded:!0})},error:function(_error2,errorCode,errorMsg){console.error(_error2,errorCode,errorMsg),self.setState({error:"An error occurred when loading the form!"})}})}},{key:"updateCoordinate",value:function(container,newCoordinate){var childContainers=this.state.Data.childContainers,containerCoordinates=this.state.options.containerCoordinates,Data=this.state.Data,options=this.state.options;container=JSON.parse(container),childContainers[container.id].coordinate=newCoordinate,containerCoordinates[Data.container.id][newCoordinate]=container.id,container.coordinate?delete containerCoordinates[Data.container.id][container.coordinate]:delete containerCoordinates[Data.container.id].Unassigned.indexOf[container.id],Data.childContainers=childContainers,options.containerCoordinates=containerCoordinates,this.setState({Data:Data,options:options})}},{key:"submitCoordinate",value:function(container,newCoordinate){console.log(container);var formData={parentContainerId:this.state.Data.container.id,container:container,coordinate:newCoordinate},formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:loris.BaseURL+"/biobank/ajax/submitData.php?action=updateContainerParent",data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){this.updateCoordinate(container,newCoordinate)}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Error!";swal(msg,"","error")}})}},{key:"drag",value:function(e){var container=JSON.stringify(this.state.Data.childContainers[e.target.id]);e.dataTransfer.setData("text/plain",container)}},{key:"render",value:function(){if(void 0!==this.state.error)return React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error));if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var parentContainerBarcodeValue=void 0;if(this.state.Data.container.parentContainerId){var containerURL=loris.BaseURL+"/biobank/container/?barcode=";parentContainerBarcodeValue=React.createElement("div",null,React.createElement("a",{className:"value",href:containerURL+this.state.Data.parentContainers[0].barcode},this.state.Data.parentContainers[0].barcode),"Coordinate "+(this.state.Data.container.coordinate?this.state.Data.container.coordinate:"Unassigned"))}else parentContainerBarcodeValue=React.createElement("div",{className:"value"},"None");var parentContainerBarcode=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Parent Container",parentContainerBarcodeValue),React.createElement("div",{className:"action","data-toggle":"tooltip",title:"Move Container","data-placement":"right"},React.createElement(_FormModal2.default,{title:"Update Parent Container",buttonClass:"action-button update",buttonContent:React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})},React.createElement(_containerParentForm2.default,{containersNonPrimary:this.state.options.containersNonPrimary,containerDimensions:this.state.options.containerDimensions,containerCoordinates:this.state.options.containerCoordinates,container:this.state.Data.container,containerTypes:this.state.options.containerTypes,containerStati:this.state.options.containerStati,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=updateContainerParent",refreshParent:this.fetchContainerData})))),globals=React.createElement("div",{className:"globals"},React.createElement("div",{className:"list"},React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Type",React.createElement("div",{className:"value"},this.state.options.containerTypes[this.state.Data.container.typeId].label))),React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Temperature",React.createElement("div",{className:"value"},this.state.Data.container.temperature+"°C")),React.createElement("div",{className:"action"},React.createElement(_FormModal2.default,{title:"Update",buttonClass:"action-button update",buttonContent:React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})},React.createElement(TemperatureField,{container:this.state.Data.container,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=updateContainer",refreshParent:this.fetchContainerData})))),React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Status",React.createElement("div",{className:"value"},this.state.options.containerStati[this.state.Data.container.statusId].status)),React.createElement("div",{className:"action"},React.createElement(_FormModal2.default,{title:"Update",buttonClass:"action-button update",buttonContent:React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})}))),React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Location",React.createElement("div",{className:"value"},this.state.options.sites[this.state.Data.container.locationId])),React.createElement("div",{className:"action"},React.createElement(_FormModal2.default,{title:"Update",buttonClass:"action-button update",buttonContent:React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})}))),React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Origin",React.createElement("div",{className:"value"},this.state.options.sites[this.state.Data.container.originId]))),React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Creation Date",React.createElement("div",{className:"value"},this.state.Data.container.dateTimeCreate))),parentContainerBarcode)),barcodePath=React.createElement(_barcodePath2.default,{container:this.state.Data.container,parentContainers:this.state.Data.parentContainers}),display=void 0;this.state.Data.container.dimensionId&&(display=React.createElement(_containerDisplay2.default,{dimensions:this.state.options.containerDimensions[this.state.Data.container.dimensionId],children:this.state.Data.childContainers,types:this.state.options.containerTypes,coordinates:this.state.options.containerCoordinates[this.state.Data.container.id]?this.state.options.containerCoordinates[this.state.Data.container.id]:null,containerTypes:this.state.options.containerTypes,containerStati:this.state.options.containerStati,updateParent:this.submitCoordinate}));var listAssigned=[],listUnassigned=[];if(this.state.Data.childContainers){var children=this.state.Data.childContainers;for(var child in children){var url=void 0;url=this.state.options.containerTypes[children[child].typeId].primary?loris.BaseURL+"/biobank/specimen/?barcode="+children[child].barcode:loris.BaseURL+"/biobank/container/?barcode="+children[child].barcode,children[child].coordinate?listAssigned.push(React.createElement("div",null,React.createElement("a",{href:url},children[child].barcode)," at ",children[child].coordinate)):listUnassigned.push(React.createElement("a",{href:url,id:children[child].id,draggable:!0,onDragStart:this.drag},children[child].barcode))}}return React.createElement("div",{id:"container-page"},React.createElement("div",{className:"container-header"},React.createElement("div",{className:"container-title"},React.createElement("div",{className:"barcode"},"Barcode",React.createElement("div",{className:"value"},React.createElement("strong",null,this.state.Data.container.barcode)))),React.createElement(_containerCheckout2.default,{containerId:this.state.Data.container.id,parentContainerId:this.state.Data.container.parentContainerId,refreshParent:this.fetchContainerData}),React.createElement(_lifeCycle2.default,{container:this.state.Data.container,sites:this.state.options.sites})),React.createElement("div",{className:"summary"},globals,React.createElement("div",{className:"display-container"},display,barcodePath),React.createElement("div",{className:"container-list"},React.createElement("div",{className:"title"},0===listAssigned.length&&0===listUnassigned.length?"This Container is Empty!":null),React.createElement("div",{className:"title"},0!==listAssigned.length?"Assigned Containers":null),listAssigned,0!==listAssigned.length?React.createElement("br",null):null,React.createElement("div",{
className:"title"},0!==listUnassigned.length?"Unassigned Containers":null),listUnassigned)))}}]),BiobankContainer}(React.Component);BiobankContainer.propTypes={containerPageDataURL:React.PropTypes.string.isRequired};var RBiobankContainer=React.createFactory(BiobankContainer);window.BiobankContainer=BiobankContainer,window.RBiobankContainer=RBiobankContainer,exports.default=BiobankContainer},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TemperatureField=function(_React$Component){function TemperatureField(){return _classCallCheck(this,TemperatureField),_possibleConstructorReturn(this,(TemperatureField.__proto__||Object.getPrototypeOf(TemperatureField)).apply(this,arguments))}return _inherits(TemperatureField,_React$Component),_createClass(TemperatureField,[{key:"render",value:function(){return React.createElement("div",{className:this.props.className},React.createElement(TextboxElement,{name:"temperature",labelClass:"col-sm-0",onUserInput:this.props.setContainerData,value:this.props.container.temperature}),React.createElement(ButtonElement,{label:"Update",onUserInput:this.props.saveContainer}),React.createElement("a",{onClick:this.props.toggleEditTemperature},"Cancel"))}}]),TemperatureField}(React.Component);TemperatureField.propTypes={setContainerData:React.PropTypes.func,container:React.PropTypes.object,saveContainer:React.PropTypes.func,className:React.PropTypes.string},exports.default=TemperatureField},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),LifeCycle=function(_React$Component){function LifeCycle(props){_classCallCheck(this,LifeCycle);var _this=_possibleConstructorReturn(this,(LifeCycle.__proto__||Object.getPrototypeOf(LifeCycle)).call(this,props));return _this.state={},_this}return _inherits(LifeCycle,_React$Component),_createClass(LifeCycle,[{key:"componentDidMount",value:function(){}},{key:"mouseOver",value:function(e){$(".collection").css({border:"2px solid #093782","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"})}},{key:"mouseLeave",value:function(e){$(".collection").css({border:"2px solid #A6D3F5","box-shadow":"none"})}},{key:"mouseOverPreparation",value:function(e){$(".preparation").css({border:"2px solid #093782","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"})}},{key:"mouseLeavePreparation",value:function(e){$(".preparation").css({border:"2px solid #A6D3F5","box-shadow":"none"})}},{key:"render",value:function(){var _this2=this,collectionNode=void 0,collectionTooltip=void 0;(this.props.collection||this.props.container)&&(collectionTooltip=React.createElement("div",null,React.createElement("h",null,"Collection"),React.createElement("p",null,"Date:")),collectionNode=React.createElement("div",{onMouseEnter:function(e){return _this2.mouseOver(e)},onMouseLeave:function(e){return _this2.mouseLeave(e)},className:"lifecycle-node collection"},React.createElement("div",{className:"letter"},"C")));var preparationNode=void 0;this.props.preparation&&(preparationNode=React.createElement("div",{onMouseEnter:this.mouseOverPreparation,onMouseLeave:this.mouseLeavePreparation,className:"lifecycle-node preparation"},React.createElement("div",{className:"letter"},"P")));var analysisNode=void 0;this.props.analysis&&(analysisNode=React.createElement("div",{className:"lifecycle-node-container"},React.createElement("div",{className:"lifecycle-node"}),React.createElement("div",{className:"lifecycle-text"},"Analysis")));var line=void 0;return line=React.createElement("div",{className:"lifecycle-line"}),React.createElement("div",{className:"lifecycle"},React.createElement("div",{className:"lifecycle-graphic"},collectionNode,preparationNode?line:null,preparationNode,analysisNode))}}]),LifeCycle}(React.Component);LifeCycle.propTypes={},exports.default=LifeCycle},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),BarcodePath=function(_React$Component){function BarcodePath(){return _classCallCheck(this,BarcodePath),_possibleConstructorReturn(this,(BarcodePath.__proto__||Object.getPrototypeOf(BarcodePath)).apply(this,arguments))}return _inherits(BarcodePath,_React$Component),_createClass(BarcodePath,[{key:"render",value:function(){for(var path=[],pathLength=this.props.parentContainers.length-1,containerURL=loris.BaseURL+"/biobank/container/?barcode=",i=pathLength;i>=0;i--)path.push(React.createElement("span",{className:"barcodePath"},"/",React.createElement("a",{href:containerURL+this.props.parentContainers[i].barcode},this.props.parentContainers[i].barcode)));return path.push(React.createElement("span",{className:"barcodePath"},"/",React.createElement("a",{href:containerURL+this.props.container.barcode},this.props.container.barcode))),React.createElement("div",null,path)}}]),BarcodePath}(React.Component);BarcodePath.propTypes={},exports.default=BarcodePath},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerCheckout=function(_React$Component){function ContainerCheckout(props){_classCallCheck(this,ContainerCheckout);var _this=_possibleConstructorReturn(this,(ContainerCheckout.__proto__||Object.getPrototypeOf(ContainerCheckout)).call(this,props));return _this.checkoutContainer=_this.checkoutContainer.bind(_this),_this}return _inherits(ContainerCheckout,_React$Component),_createClass(ContainerCheckout,[{key:"checkoutContainer",value:function(){var formData={containerId:this.props.containerId},formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);console.log(formObj),$.ajax({type:"POST",url:loris.BaseURL+"/biobank/ajax/submitData.php?action=checkoutContainer",data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){this.props.refreshParent(),swal("Container is checked-out!","","success")}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"render",value:function(){var checkoutButton=null;return this.props.parentContainerId&&(checkoutButton=React.createElement("div",{className:"action-button update","data-toggle":"tooltip",title:"Checkout Container","data-placement":"right",onClick:this.checkoutContainer},React.createElement("span",{className:"glyphicon glyphicon-share"}))),React.createElement("div",null,checkoutButton)}}]),ContainerCheckout}(React.Component);ContainerCheckout.propTypes={},exports.default=ContainerCheckout}]);
//# sourceMappingURL=containerIndex.js.map