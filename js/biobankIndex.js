!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(1),_Loader2=_interopRequireDefault(_Loader),_filter=__webpack_require__(2),_filter2=_interopRequireDefault(_filter),_specimen=__webpack_require__(17),_specimen2=_interopRequireDefault(_specimen),_container=__webpack_require__(26),_container2=_interopRequireDefault(_container),BiobankIndex=function(_React$Component){function BiobankIndex(){var _this$state;_classCallCheck(this,BiobankIndex);var _this=_possibleConstructorReturn(this,(BiobankIndex.__proto__||Object.getPrototypeOf(BiobankIndex)).call(this));return _this.state=(_this$state={specimenFilter:{},containerDataTable:{},containerFilter:{}},_defineProperty(_this$state,"containerDataTable",{}),_defineProperty(_this$state,"data",{}),_defineProperty(_this$state,"specimen",{}),_defineProperty(_this$state,"container",{}),_defineProperty(_this$state,"options",{}),_defineProperty(_this$state,"files",{}),_defineProperty(_this$state,"coordinate",null),_defineProperty(_this$state,"sequential",!1),_defineProperty(_this$state,"page",""),_defineProperty(_this$state,"isLoaded",!1),_defineProperty(_this$state,"editable",{specimenForm:!1,containerForm:!1,aliquotForm:!1,containerParentForm:!1,barcode:!1,temperature:!1,quantity:!1,status:!1,location:!1,collection:!1,preparation:!1,analysis:!1}),_this$state),_this.fetch=_this.fetch.bind(_this),_this.loadFilters=_this.loadFilters.bind(_this),_this.loadSpecimenDataTable=_this.loadSpecimenDataTable.bind(_this),_this.loadContainerDataTable=_this.loadContainerDataTable.bind(_this),_this.loadOptions=_this.loadOptions.bind(_this),_this.loadContainer=_this.loadContainer.bind(_this),_this.loadSpecimen=_this.loadSpecimen.bind(_this),_this.fetch=_this.fetch.bind(_this),_this.updateSpecimenFilter=_this.updateSpecimenFilter.bind(_this),_this.updateContainerFilter=_this.updateContainerFilter.bind(_this),_this.clone=_this.clone.bind(_this),_this.mapFormOptions=_this.mapFormOptions.bind(_this),_this.edit=_this.edit.bind(_this),_this.close=_this.close.bind(_this),_this.setSpecimen=_this.setSpecimen.bind(_this),_this.revertSpecimen=_this.revertSpecimen.bind(_this),_this.setContainer=_this.setContainer.bind(_this),_this.revertContainer=_this.revertContainer.bind(_this),_this.setCoordinate=_this.setCoordinate.bind(_this),_this.setSequential=_this.setSequential.bind(_this),_this.setFiles=_this.setFiles.bind(_this),_this.addPreparation=_this.addPreparation.bind(_this),_this.addAnalysis=_this.addAnalysis.bind(_this),_this.saveSpecimen=_this.saveSpecimen.bind(_this),_this.saveContainer=_this.saveContainer.bind(_this),_this.saveChildContainer=_this.saveChildContainer.bind(_this),_this.save=_this.save.bind(_this),_this}return _inherits(BiobankIndex,_React$Component),_createClass(BiobankIndex,[{key:"componentDidMount",value:function(){var _this2=this;this.loadFilters().then(function(){return _this2.loadOptions().then(function(){return _this2.setState({isLoaded:!0})})})}},{key:"loadFilters",value:function(){var _this3=this;return new Promise(function(resolve){_this3.loadContainerDataTable().then(function(){return _this3.loadSpecimenDataTable().then(function(){_this3.setState({page:"filter"},resolve())})})})}},{key:"loadSpecimenDataTable",value:function(){var _this4=this;return new Promise(function(resolve){_this4.fetch(_this4.props.specimenFilterDataURL).then(function(data){var specimenDataTable=data;_this4.setState({specimenDataTable:specimenDataTable},resolve())})})}},{key:"loadContainerDataTable",value:function(){var _this5=this;return new Promise(function(resolve){_this5.fetch(_this5.props.containerFilterDataURL).then(function(data){var containerDataTable=data;_this5.setState({containerDataTable:containerDataTable},resolve())})})}},{key:"loadOptions",value:function(){var _this6=this;return new Promise(function(resolve){_this6.fetch(_this6.props.optionsURL).then(function(data){var options=data;_this6.setState({options:options},resolve())})})}},{key:"loadContainer",value:function(barcode){var _this7=this;return new Promise(function(resolve){_this7.fetch(_this7.props.containerDataURL+barcode).then(function(data){var container=_this7.clone(data.container),page="container";_this7.setState({data:data,container:container,page:page},resolve())})})}},{key:"loadSpecimen",value:function(barcode){var _this8=this;return new Promise(function(resolve){_this8.fetch(_this8.props.specimenDataURL+barcode).then(function(data){var specimen=_this8.clone(data.specimen),container=_this8.clone(data.container),page="specimen";_this8.setState({data:data,specimen:specimen,container:container,page:page},resolve())})})}},{key:"fetch",value:function(url){return new Promise(function(resolve){$.ajax(url,{dataType:"json",success:function(data){return resolve(data)},error:function(_error,errorCode,errorMsg){return console.error(_error,errorCode,errorMsg)}})})}},{key:"updateSpecimenFilter",value:function(specimenFilter){this.setState({specimenFilter:specimenFilter})}},{key:"updateContainerFilter",value:function(containerFilter){this.setState({containerFilter:containerFilter})}},{key:"clone",value:function(object){return JSON.parse(JSON.stringify(object))}},{key:"mapFormOptions",value:function(object,attribute){var data={};for(var id in object)data[id]=object[id][attribute];return data}},{key:"edit",value:function(stateKey){var _this9=this;this.close().then(function(){var editable=_this9.state.editable;editable[stateKey]=!0,_this9.setState({editable:editable})})}},{key:"close",value:function(){var _this10=this;return new Promise(function(resolve){var editable=_this10.state.editable;for(var key in editable)editable[key]=!1;_this10.state.data.specimen&&_this10.revertSpecimen(),_this10.state.data.container&&_this10.revertContainer(),_this10.setState({editable:editable},resolve())})}},{key:"setSpecimen",value:function(name,value){var specimen=this.state.specimen;specimen[name]=value,this.setState({specimen:specimen})}},{key:"revertSpecimen",value:function(){var specimen=this.state.specimen;specimen=this.clone(this.state.data.specimen),this.setState({specimen:specimen})}},{key:"setContainer",value:function(name,value){var container=this.state.container;value?container[name]=value:delete container[name],this.setState({container:container})}},{key:"revertContainer",value:function(){var container=this.state.container;container=this.clone(this.state.data.container),this.setState({container:container})}},{key:"setCoordinate",value:function(value){var coordinate=this.state.coordinates;coordinate=value,this.setState({coordinate:coordinate})}},{key:"setSequential",value:function(name,value){var sequential=this.state.sequential;sequential=value,this.setState({sequential:sequential})}},{key:"setFiles",value:function(name,value){var files=this.state.files;files[value.name]=value,this.setState({files:files})}},{key:"addPreparation",value:function(){var specimen=this.state.specimen;specimen.preparation={locationId:this.state.data.container.locationId},this.setState({specimen:specimen})}},{key:"addAnalysis",value:function(){var specimen=this.state.specimen;specimen.analysis={locationId:this.state.data.container.locationId},this.setState({specimen:specimen})}},{key:"saveSpecimen",value:function(){var _this11=this,specimen=this.state.specimen;this.save(specimen,this.props.saveSpecimenURL,"Specimen Save Successful!").then(function(){var data=_this11.state.data;data.specimen=_this11.clone(_this11.state.specimen),_this11.setState({data:data},_this11.close())})}},{key:"saveContainer",value:function(){var _this12=this,container=this.state.container;this.save(container,this.props.saveContainerURL,"Container Save Successful!").then(function(){var data=_this12.state.data;data.container=_this12.clone(_this12.state.container),_this12.setState({data:data},_this12.close())})}},{key:"saveChildContainer",value:function(container){var _this13=this;return new Promise(function(resolve){_this13.save(container,_this13.props.saveContainerURL).then(function(){var data=_this13.state.data;data.childContainers[container.id]=_this13.clone(container),_this13.setState({data:data},resolve())})})}},{key:"save",value:function(data,url,message){var _this14=this;return new Promise(function(resolve){var dataObject=new FormData;for(var file in _this14.state.files)dataObject.append(_this14.state.files[file].name,_this14.state.files[file]);dataObject.append("data",JSON.stringify(data)),$.ajax({type:"POST",url:url,data:dataObject,cache:!1,contentType:!1,processData:!1,success:function(){resolve(),_this14.loadOptions(),message&&swal(message,"","success")},error:function(_error2,textStatus,errorThrown){var message=(_error2.responseJSON||{}).message||"Submission error!";swal(message,"","error"),console.error(_error2,textStatus,errorThrown)}})})}},{key:"render",value:function(){if(void 0!==this.state.error)return React.createElement("div",{className:"alert alert-danger text-center"},React.createElement("strong",null,this.state.error));if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var display=void 0;switch(this.state.page){case"container":display=React.createElement(_container2.default,{data:this.state.data,options:this.state.options,container:this.state.container,coordinate:this.state.coordinate,sequential:this.state.sequential,editable:this.state.editable,loadContainer:this.loadContainer,loadSpecimen:this.loadSpecimen,loadFilters:this.loadFilters,mapFormOptions:this.mapFormOptions,setContainer:this.setContainer,revertContainer:this.revertContainer,saveContainer:this.saveContainer,setCoordinate:this.setCoordinate,setSequential:this.setSequential,saveChildContainer:this.saveChildContainer,edit:this.edit,close:this.close});break;case"specimen":display=React.createElement("div",{className:"barcode-page"},React.createElement(_specimen2.default,{data:this.state.data,options:this.state.options,container:this.state.container,specimen:this.state.specimen,files:this.state.files,editable:this.state.editable,loadContainer:this.loadContainer,loadSpecimen:this.loadSpecimen,loadFilters:this.loadFilters,loadOptions:this.loadOptions,mapFormOptions:this.mapFormOptions,setContainer:this.setContainer,revertContainer:this.revertContainer,saveContainer:this.saveContainer,setSpecimen:this.setSpecimen,revertSpecimen:this.revertSpecimen,saveSpecimen:this.saveSpecimen,addPreparation:this.addPreparation,addAnalysis:this.addAnalysis,setFiles:this.setFiles,saveChildContainer:this.saveChildContainer,saveBarcodeListURL:this.props.saveBarcodeListURL,edit:this.edit,close:this.close,save:this.save}));break;case"filter":display=React.createElement(_filter2.default,{specimenFilter:this.state.specimenFilter,specimenDataTable:this.state.specimenDataTable,containerFilter:this.state.containerFilter,containerDataTable:this.state.containerDataTable,options:this.state.options,editable:this.state.editable,loadContainer:this.loadContainer,loadSpecimen:this.loadSpecimen,updateSpecimenFilter:this.updateSpecimenFilter,updateContainerFilter:this.updateContainerFilter,mapFormOptions:this.mapFormOptions,edit:this.edit,close:this.close,loadFilters:this.loadFilters,loadOptions:this.loadOptions,save:this.save,saveBarcodeListURL:this.props.saveBarcodeListURL})}return React.createElement("div",{className:"biobank-page"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},display)))}}]),BiobankIndex}(React.Component);$(function(){var request=loris.BaseURL+"/biobank/ajax/requestData.php?",submit=loris.BaseURL+"/biobank/ajax/submitData.php?",biobankIndex=React.createElement("div",{className:"page=biobank"},React.createElement(BiobankIndex,{specimenFilterDataURL:loris.BaseURL+"/biobank/?format=json",containerFilterDataURL:request+"action=getContainerFilterData",specimenDataURL:request+"action=getSpecimenData&barcode=",containerDataURL:request+"action=getContainerData&barcode=",optionsURL:request+"action=getFormOptions",saveContainerURL:submit+"action=saveContainer",saveSpecimenURL:submit+"action=saveSpecimen",saveBarcodeListURL:submit+"action=saveBarcodeList"}));ReactDOM.render(biobankIndex,document.getElementById("lorisworkspace"))})},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Loader=function(_React$Component){function Loader(){return _classCallCheck(this,Loader),_possibleConstructorReturn(this,(Loader.__proto__||Object.getPrototypeOf(Loader)).apply(this,arguments))}return _inherits(Loader,_React$Component),_createClass(Loader,[{key:"render",value:function(){return React.createElement("div",{className:"loader",style:{width:this.props.size,height:this.props.size}})}}]),Loader}(React.Component);Loader.propTypes={size:React.PropTypes.int},Loader.defaultProps={size:120},exports.default=Loader},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _BiobankFilter$propTy,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FilterForm=__webpack_require__(3),_FilterForm2=_interopRequireDefault(_FilterForm),_specimenForm=__webpack_require__(5),_specimenForm2=_interopRequireDefault(_specimenForm),_poolSpecimenForm=__webpack_require__(12),_poolSpecimenForm2=_interopRequireDefault(_poolSpecimenForm),_containerForm=__webpack_require__(14),_containerForm2=_interopRequireDefault(_containerForm),_Tabs=__webpack_require__(16),_Modal=__webpack_require__(11),_Modal2=_interopRequireDefault(_Modal),_Loader=__webpack_require__(1),BiobankFilter=(_interopRequireDefault(_Loader),function(_React$Component){function BiobankFilter(){_classCallCheck(this,BiobankFilter);var _this=_possibleConstructorReturn(this,(BiobankFilter.__proto__||Object.getPrototypeOf(BiobankFilter)).call(this));return _this.resetFilters=_this.resetFilters.bind(_this),_this.formatSpecimenColumns=_this.formatSpecimenColumns.bind(_this),_this.formatContainerColumns=_this.formatContainerColumns.bind(_this),_this}return _inherits(BiobankFilter,_React$Component),_createClass(BiobankFilter,[{key:"resetFilters",value:function(){this.refs.biobankFilter.clearFilter()}},{key:"formatSpecimenColumns",value:function(column,cell,rowData,rowHeaders){var _this2=this,row={},barcode=void 0;switch(rowHeaders.forEach(function(header,index){row[header]=rowData[index]}),column){case"Barcode":return barcode=row.Barcode,React.createElement("td",null,React.createElement("a",{onClick:function(){_this2.props.loadSpecimen(barcode)},style:{cursor:"pointer"}},cell));case"Parent Barcode":return barcode=row["Parent Barcode"],React.createElement("td",null,React.createElement("a",{onClick:function(){_this2.props.loadSpecimen(barcode)},style:{cursor:"pointer"}},cell));case"Container Barcode":return barcode=row["Container Barcode"],React.createElement("td",null,React.createElement("a",{onClick:function(){_this2.props.loadContainer(barcode)},style:{cursor:"pointer"}},cell));case"PSCID":var pscidURL=loris.BaseURL+"/"+row.PSCID;return React.createElement("td",null,React.createElement("a",{href:pscidURL},cell));case"Visit Label":var visitLabelURL=loris.BaseURL+"/instrument_list/?candID="+row.PSCID+"&sessionID="+row["Visit Label"];return React.createElement("td",null,React.createElement("a",{href:visitLabelURL},cell));case"Status":switch(cell){case"Available":return React.createElement("td",{style:{color:"green"}},cell);case"Reserved":return React.createElement("td",{style:{color:"orange"}},cell);case"Dispensed":return React.createElement("td",{style:{color:"red"}},cell)}default:return React.createElement("td",null,cell)}}},{key:"formatContainerColumns",value:function(column,cell,rowData,rowHeaders){var _this3=this,row={};rowHeaders.forEach(function(header,index){row[header]=rowData[index]});var barcode=void 0;switch(column){case"Barcode":return barcode=row.Barcode,React.createElement("td",null,React.createElement("a",{onClick:function(){_this3.props.loadContainer(barcode)},style:{cursor:"pointer"}},cell));case"Parent Barcode":return barcode=row["Parent Barcode"],React.createElement("td",null,React.createElement("a",{onClick:function(){_this3.props.loadContainer(barcode)},style:{cursor:"pointer"}},cell));default:return React.createElement("td",null,cell)}}},{key:"render",value:function(){var _this4=this,addSpecimenButton=void 0,poolSpecimenButton=void 0,addContainerButton=void 0,containerTypesPrimary=this.props.mapFormOptions(this.props.options.containerTypesPrimary,"label"),containerStati=this.props.mapFormOptions(this.props.options.containerStati,"status"),candidates=this.props.mapFormOptions(this.props.options.candidates,"pscid"),sessions=this.props.mapFormOptions(this.props.options.sessions,"label");addSpecimenButton=React.createElement("div",{className:"action",title:"Add Specimen"},React.createElement("div",{className:"action-button add",onClick:function(){_this4.props.edit("specimenForm")}},"+"),React.createElement(_Modal2.default,{title:"Add New Specimen",show:this.props.editable.specimenForm,closeModal:this.props.close},React.createElement(_specimenForm2.default,{candidates:candidates,sessions:sessions,candidateSessions:this.props.options.candidateSessions,sessionCenters:this.props.options.sessionCenters,specimenTypes:this.props.options.specimenTypes,specimenTypeUnits:this.props.options.specimenTypeUnits,specimenTypeAttributes:this.props.options.specimenTypeAttributes,attributeOptions:this.props.options.attributeOptions,attributeDatatypes:this.props.options.attributeDatatypes,containerTypesPrimary:containerTypesPrimary,containersNonPrimary:this.props.options.containersNonPrimary,containerDimensions:this.props.options.containerDimensions,containerCoordinates:this.props.options.containerCoordinates,containerStati:containerStati,mapFormOptions:this.props.mapFormOptions,saveBarcodeListURL:this.props.saveBarcodeListURL,close:this.props.close,loadFilters:this.props.loadFilters,loadOptions:this.props.loadOptions,save:this.props.save})));var barcodesPrimary=this.props.mapFormOptions(this.props.options.containersPrimary,"barcode"),searchSpecimenButton=React.createElement("div",{className:"action",title:"Go To Specimen"},React.createElement("div",{className:"action-button search",onClick:function(){_this4.props.edit("searchSpecimen")}},React.createElement("span",{className:"glyphicon glyphicon-search"})),React.createElement(_Modal2.default,{title:"Go To Specimen",show:this.props.editable.searchSpecimen,closeModal:this.props.close},React.createElement(SearchableDropdown,{name:"barcode",label:"Barcode",options:barcodesPrimary,onUserInput:function(name,value){_this4.props.loadSpecimen(barcodesPrimary[value]).then(function(){return _this4.props.close()})},placeHolder:"Please Scan or Select Barcode",autoFocus:!0}))),barcodesNonPrimary=this.props.mapFormOptions(this.props.options.containersNonPrimary,"barcode"),searchContainerButton=void 0;searchContainerButton=React.createElement("div",{className:"action",title:"Go To Container"},React.createElement("div",{className:"action-button search",onClick:function(){_this4.props.edit("searchContainer")}},React.createElement("span",{className:"glyphicon glyphicon-search"})),React.createElement(_Modal2.default,{title:"Go To Barcode",show:this.props.editable.searchContainer,closeModal:this.props.close},React.createElement(SearchableDropdown,{name:"barcode",label:"Barcode",options:barcodesNonPrimary,onUserInput:function(name,value){_this4.props.loadContainer(barcodesNonPrimary[value]).then(function(){return _this4.props.close()})},placeHolder:"Please Scan or Select Barcode",autoFocus:!0}))),poolSpecimenButton=React.createElement("div",{className:"action",title:"Pool Specimens"},React.createElement("div",{className:"action-button pool",onClick:function(){_this4.props.edit("poolSpecimenForm")}},React.createElement("span",{className:"glyphicon glyphicon-resize-small"})),React.createElement(_Modal2.default,{title:"Pool Specimens",show:this.props.editable.poolSpecimenForm,closeModal:this.props.close},React.createElement(_poolSpecimenForm2.default,{specimenTypes:this.props.options.specimenTypes,containerTypesPrimary:containerTypesPrimary,containersNonPrimary:this.props.options.containersNonPrimary,specimenTypeAttributes:this.props.options.specimenTypeAttributes,specimenProtocols:this.props.options.specimenProtocols,specimenProtocolAttributes:this.props.options.specimenProtocolAttributes,attributeDatatypes:this.props.options.attributeDatatypes,attributeOptions:this.props.options.attributeOptions,capacities:this.props.options.capacities,containerDimensions:this.props.options.containerDimensions,containerCoordinates:this.props.options.containerCoordinates,specimenTypeUnits:this.props.options.specimenTypeUnits,specimenUnits:this.props.options.specimenUnits,candidates:candidates,candidateSessions:this.props.options.candidateSessions,sessionCenters:this.props.options.sessionCenters,specimenRequest:loris.BaseURL+"/biobank/ajax/requestData.php?action=getSpecimenDataFromBarcode",mapFormOptions:this.props.mapFormOptions,saveSpecimen:loris.BaseURL+"/biobank/ajax/submitData.php?action=saveSpecimen",saveContainer:loris.BaseURL+"/biobank/ajax/submitData.php?action=saveContainer"})));var containerTypesNonPrimary=this.props.mapFormOptions(this.props.options.containerTypesNonPrimary,"label");addContainerButton=React.createElement("div",{className:"action",title:"Add Container"},React.createElement("div",{className:"action-button add",onClick:function(){_this4.props.edit("containerForm")}},React.createElement("span",null,"+")),React.createElement(_Modal2.default,{title:"Add New Container",show:this.props.editable.containerForm,closeModal:this.props.close},React.createElement(_containerForm2.default,{containerTypesNonPrimary:containerTypesNonPrimary,centers:this.props.options.centers,containerStati:containerStati,saveContainer:loris.BaseURL+"/biobank/ajax/submitData.php?action=saveContainer",close:this.props.close,loadFilters:this.props.loadFilters,loadOptions:this.props.loadOptions,save:this.props.save})));var tabList=[{id:"specimens",label:"Specimens"},{id:"containers",label:"Containers"}];return React.createElement("div",{id:"biobank-page"},React.createElement(_Tabs.Tabs,{tabs:tabList,defaultTab:"specimens",updateURL:!0},React.createElement(_Tabs.TabPane,{TabId:tabList[0].id},React.createElement("div",{className:"row",style:{marginTop:20}},React.createElement("div",{className:"col-lg-3"},React.createElement("div",{className:"filter"},React.createElement(_FilterForm2.default,{formElements:this.props.specimenDataTable.form,onUpdate:this.props.updateSpecimenFilter,filter:this.props.specimenFilter},React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters}),React.createElement("div",{className:"align-row"},React.createElement("span",{className:"action"},searchSpecimenButton),React.createElement("span",{className:"action"},addSpecimenButton),React.createElement("span",{className:"action"},poolSpecimenButton))))),React.createElement("div",{className:"col-lg-9"},React.createElement(StaticDataTable,{Data:this.props.specimenDataTable.Data,Headers:this.props.specimenDataTable.Headers,Filter:this.props.specimenFilter,getFormattedCell:this.formatSpecimenColumns})))),React.createElement(_Tabs.TabPane,{TabId:tabList[1].id},React.createElement("div",{className:"row",style:{marginTop:20}},React.createElement("div",{className:"col-lg-3"},React.createElement("div",{className:"filter"},React.createElement(_FilterForm2.default,{formElements:this.props.containerDataTable.form,onUpdate:this.props.updateContainerFilter,filter:this.props.containerFilter},React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters}),React.createElement("div",{className:"align-row"},React.createElement("span",{className:"action"},searchContainerButton),React.createElement("span",{className:"action"},addContainerButton))))),React.createElement("div",{className:"col-lg-9"},React.createElement(StaticDataTable,{Data:this.props.containerDataTable.Data,Headers:this.props.containerDataTable.Headers,Filter:this.props.containerFilter,getFormattedCell:this.formatContainerColumns}))))))}}]),BiobankFilter}(React.Component));BiobankFilter.propTypes=(_BiobankFilter$propTy={specimenFilter:React.PropTypes.object.isRequired,specimenDataTable:React.PropTypes.object.isRequired,containerFilter:React.PropTypes.object.isRequired,containerDataTable:React.PropTypes.object.isRequired,options:React.PropTypes.object.isRequired,editable:React.PropTypes.object.isRequired,loadContainer:React.PropTypes.func.isRequired,loadSpecimen:React.PropTypes.func.isRequired,updateSpecimenFilter:React.PropTypes.func.isRequired,updateContainerFilter:React.PropTypes.func.isRequired,mapFormOptions:React.PropTypes.func.isRequired,edit:React.PropTypes.func.isRequired,close:React.PropTypes.func.isRequired},_defineProperty(_BiobankFilter$propTy,"close",React.PropTypes.func.isRequired),_defineProperty(_BiobankFilter$propTy,"save",React.PropTypes.func.isRequired),_defineProperty(_BiobankFilter$propTy,"saveBarcodeListURL",React.PropTypes.string.isRequired),_BiobankFilter$propTy),exports.default=BiobankFilter},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Panel=__webpack_require__(4),FilterForm=(_interopRequireDefault(_Panel),function(_React$Component){function FilterForm(props){_classCallCheck(this,FilterForm);var _this=_possibleConstructorReturn(this,(FilterForm.__proto__||Object.getPrototypeOf(FilterForm)).call(this,props));return _this.clearFilter=_this.clearFilter.bind(_this),_this.getFormChildren=_this.getFormChildren.bind(_this),_this.setFilter=_this.setFilter.bind(_this),_this.onElementUpdate=_this.onElementUpdate.bind(_this),
_this.queryString=QueryString.get(),_this}return _inherits(FilterForm,_React$Component),_createClass(FilterForm,[{key:"componentDidMount",value:function(){var filter={},queryString=this.queryString;Object.keys(queryString).forEach(function(key){var filterKey="candidateID"===key?"candID":key;filter[filterKey]={value:queryString[key],exactMatch:!1}}),this.props.onUpdate(filter)}},{key:"clearFilter",value:function(){this.queryString=QueryString.clear(this.props.Module),this.props.onUpdate({})}},{key:"getFormChildren",value:function(){var formChildren=[];return React.Children.forEach(this.props.children,function(child,key){if(React.isValidElement(child)&&"function"==typeof child.type&&child.props.onUserInput){var callbackFunc=child.props.onUserInput,callbackName=callbackFunc.name,elementName=child.type.displayName,queryFieldName="candID"===child.props.name?"candidateID":child.props.name,filterValue=this.queryString[queryFieldName];"onUserInput"===callbackName&&(callbackFunc="ButtonElement"===elementName&&"reset"===child.props.type?this.clearFilter:this.onElementUpdate.bind(null,elementName)),formChildren.push(React.cloneElement(child,{onUserInput:callbackFunc,value:filterValue?filterValue:"",key:key})),this.setFilter(elementName,child.props.name,filterValue)}else formChildren.push(React.cloneElement(child,{key:key}))}.bind(this)),formChildren}},{key:"setFilter",value:function(type,key,value){var filter={};return this.props.filter&&(filter=JSON.parse(JSON.stringify(this.props.filter))),key?(filter[key]={},value?filter[key].value=Object.keys(value).length>0?value:"":filter[key].value="",filter[key].exactMatch="SelectElement"===type):filter&&key&&""===value&&delete filter[key],filter}},{key:"onElementUpdate",value:function(type,fieldName,fieldValue){if("string"==typeof fieldName&&("string"==typeof fieldValue||"object"===("undefined"==typeof fieldValue?"undefined":_typeof(fieldValue)))){var queryFieldName="candID"===fieldName?"candidateID":fieldName;this.queryString=QueryString.set(this.queryString,queryFieldName,fieldValue);var filter=this.setFilter(type,fieldName,fieldValue);this.props.onUpdate(filter)}}},{key:"render",value:function(){var formChildren=this.getFormChildren(),formElements=this.props.formElements;return formElements&&Object.keys(formElements).forEach(function(fieldName){var queryFieldName="candID"===fieldName?"candidateID":fieldName;formElements[fieldName].onUserInput=this.onElementUpdate.bind(null,fieldName),formElements[fieldName].value=this.queryString[queryFieldName]}.bind(this)),React.createElement(FormElement,this.props,formChildren)}}]),FilterForm}(React.Component));FilterForm.defaultProps={id:"selection-filter",height:"100%",title:"Selection Filter",onUpdate:function(){console.warn("onUpdate() callback is not set!")}},FilterForm.propTypes={Module:React.PropTypes.string.isRequired,filter:React.PropTypes.object.isRequired,id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,onUpdate:React.PropTypes.func},exports.default=FilterForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Panel=function(_React$Component){function Panel(props){_classCallCheck(this,Panel);var _this=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,props));return _this.state={collapsed:_this.props.initCollapsed},_this.panelClass=_this.props.initCollapsed?"panel-collapse collapse":"panel-collapse collapse in",_this.toggleCollapsed=_this.toggleCollapsed.bind(_this),_this}return _inherits(Panel,_React$Component),_createClass(Panel,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var glyphClass=this.state.collapsed?"glyphicon pull-right glyphicon-chevron-down":"glyphicon pull-right glyphicon-chevron-up",pencilGlyph=void 0;this.props.edit&&(pencilGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-pencil",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.edit}));var plusGlyph=void 0;this.props.add&&(plusGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-plus",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.add}));var removeGlyph=void 0;this.props.cancel&&(removeGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-remove",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.cancel}));var panelHeading=this.props.title?React.createElement("div",{className:"panel-heading"},React.createElement("span",{className:glyphClass,onClick:this.toggleCollapsed,"data-toggle":"collapse","data-target":"#"+this.props.id,style:{cursor:"pointer"}}),pencilGlyph,plusGlyph,removeGlyph,this.props.title):"";return React.createElement("div",{className:"panel panel-primary"},panelHeading,React.createElement("div",{id:this.props.id,className:this.panelClass,role:"tabpanel"},React.createElement("div",{className:"panel-body",style:{height:this.props.height}},this.props.children)))}}]),Panel}(React.Component);Panel.propTypes={id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,edit:React.PropTypes.func,add:React.PropTypes.func},Panel.defaultProps={initCollapsed:!1,id:"default-panel",height:"100%"},exports.default=Panel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_barcodeForm=__webpack_require__(6),_barcodeForm2=_interopRequireDefault(_barcodeForm),BiobankSpecimenForm=function(_React$Component){function BiobankSpecimenForm(){_classCallCheck(this,BiobankSpecimenForm);var _this=_possibleConstructorReturn(this,(BiobankSpecimenForm.__proto__||Object.getPrototypeOf(BiobankSpecimenForm)).call(this));return _this.state={formErrors:{},candidateId:null,sessionId:null,centerId:null,barcodeList:{1:{specimen:{collection:{}},container:{}}},count:1,collapsed:{1:!0},copyMultiplier:1},_this.toggleCollapse=_this.toggleCollapse.bind(_this),_this.setSpecimen=_this.setSpecimen.bind(_this),_this.setContainer=_this.setContainer.bind(_this),_this.addBarcode=_this.addBarcode.bind(_this),_this.setCopyMultiplier=_this.setCopyMultiplier.bind(_this),_this.copyBarcode=_this.copyBarcode.bind(_this),_this.removeBarcode=_this.removeBarcode.bind(_this),_this.saveBarcodeList=_this.saveBarcodeList.bind(_this),_this}return _inherits(BiobankSpecimenForm,_React$Component),_createClass(BiobankSpecimenForm,[{key:"toggleCollapse",value:function(key){var collapsed=this.state.collapsed;collapsed[key]=!collapsed[key],this.setState({collapsed:collapsed})}},{key:"saveBarcodeList",value:function(){var _this2=this,barcodeList=JSON.parse(JSON.stringify(this.state.barcodeList)),availableId=Object.keys(this.props.containerStati).find(function(key){return"Available"===_this2.props.containerStati[key]});for(var barcode in barcodeList){var container=barcodeList[barcode].container;container.statusId=availableId,container.temperature=20,container.locationId=this.state.centerId,container.originId=this.state.centerId;var specimen=barcodeList[barcode].specimen;specimen.candidateId=this.state.candidateId,specimen.sessionId=this.state.sessionId,specimen.quantity=specimen.collection.quantity,specimen.unitId=specimen.collection.unitId,specimen.collection.locationId=this.state.centerId,1===this.props.specimenTypes[specimen.typeId].freezeThaw&&(specimen.fTCycle=0),this.props.data&&(specimen.candidateId=this.props.data.candidate.CandID,specimen.sessionId=this.props.data.session.ID,specimen.parentSpecimenId=this.props.data.specimen.id,specimen.collection.locationId=this.props.data.container.locationId,container.locationId=this.props.data.container.locationId,container.originId=this.props.data.container.locationId),barcodeList[barcode].container=container,barcodeList[barcode].specimen=specimen}this.props.save(barcodeList,this.props.saveBarcodeListURL,"Save Successful!").then(function(){_this2.props.close(),_this2.props.loadFilters()})}},{key:"setSpecimen",value:function(name,value,key){this.props.onChange instanceof Function&&this.props.onChange();var centerId=this.state.centerId,candidateId=this.state.candidateId,sessionId=this.state.sessionId,barcodeList=this.state.barcodeList;"candidateId"===name?candidateId=value:"sessionId"===name?(sessionId=value,centerId=this.props.sessionCenters[sessionId].centerId):("typeId"===name&&(barcodeList[key].specimen={collection:{}}),barcodeList[key].specimen[name]=value),this.setState({barcodeList:barcodeList,centerId:centerId,candidateId:candidateId,sessionId:sessionId})}},{key:"setContainer",value:function(name,value,key){this.props.onChange instanceof Function&&this.props.onChange();var barcodeList=this.state.barcodeList;barcodeList[key].container[name]=value,this.setState({barcodeList:barcodeList})}},{key:"addBarcode",value:function(){var barcodeList=this.state.barcodeList,count=this.state.count,collapsed=this.state.collapsed;barcodeList[count+1]={specimen:{},container:{collection:{}}},collapsed[count+1]=!0,count+=1,this.setState({barcodeList:barcodeList,collapsed:collapsed,count:count})}},{key:"setCopyMultiplier",value:function(e){var copyMultiplier=e.target.value;this.setState({copyMultiplier:copyMultiplier})}},{key:"copyBarcode",value:function(key){for(var count=this.state.count,collapsed=this.state.collapsed,nextKey=count+1,barcodeList=this.state.barcodeList,multiplier=this.state.copyMultiplier,i=1;i<=multiplier;i++)barcodeList[nextKey]=JSON.parse(JSON.stringify(barcodeList[key])),delete barcodeList[nextKey].container.barcode,collapsed[nextKey]=!0,nextKey++;this.setState({barcodeList:barcodeList,count:nextKey,collapsed:collapsed})}},{key:"removeBarcode",value:function(key){var barcodeList=this.state.barcodeList;delete barcodeList[key],this.setState({barcodeList:barcodeList})}},{key:"render",value:function(){var _this3=this,barcodeListArray=Object.keys(this.state.barcodeList),barcodes=[],i=1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;barcodes.push(React.createElement(_barcodeForm2.default,{data:_this3.props.data||null,key:key,barcodeKey:key,id:i,collapsed:_this3.state.collapsed[key],toggleCollapse:_this3.toggleCollapse,mapFormOptions:_this3.props.mapFormOptions,container:_this3.state.barcodeList[key].container||null,specimen:_this3.state.barcodeList[key].specimen||null,removeBarcode:1!==barcodeListArray.length?function(){return _this3.removeBarcode(key)}:null,addBarcode:i==barcodeListArray.length?_this3.addBarcode:null,setCopyMultiplier:_this3.setCopyMultiplier,copyMultiplier:_this3.state.copyMultiplier,copyBarcode:i==barcodeListArray.length&&_this3.state.barcodeList[key]?_this3.copyBarcode:null,setContainer:_this3.setContainer,setSpecimen:_this3.setSpecimen,onChange:_this3.props.onChange,specimenTypes:_this3.props.specimenTypes,containerTypesPrimary:_this3.props.containerTypesPrimary,containersNonPrimary:_this3.props.containersNonPrimary,specimenTypeAttributes:_this3.props.specimenTypeAttributes,attributeDatatypes:_this3.props.attributeDatatypes,attributeOptions:_this3.props.attributeOptions,capacities:_this3.props.capacities,containerDimensions:_this3.props.containerDimensions,containerCoordinates:_this3.props.containerCoordinates,specimenTypeUnits:_this3.props.specimenTypeUnits,units:_this3.props.units})),i++},_iterator=barcodeListArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var globalFields=void 0,remainingQuantityFields=void 0;if(this.props.data)globalFields=React.createElement("div",null,React.createElement(StaticElement,{label:"Parent Specimen",text:this.props.data.container.barcode}),React.createElement(StaticElement,{label:"PSCID",text:this.props.data.candidate.PSCID}),React.createElement(StaticElement,{label:"Visit Label",text:this.props.data.session.Visit_label})),remainingQuantityFields=React.createElement("div",null,React.createElement(TextboxElement,{name:"quantity",label:"Remaining Quantity",onUserInput:this.props.setSpecimen,required:!0,value:this.props.specimen.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:this.props.specimenUnits,onUserInput:this.props.setSpecimen,emptyOption:!1,required:!0,value:this.props.specimen.unitId}));else{var sessions={};this.state.candidateId&&(sessions=this.props.mapFormOptions(this.props.candidateSessions[this.state.candidateId],"label")),globalFields=React.createElement("div",null,React.createElement(SelectElement,{name:"candidateId",label:"PSCID",options:this.props.candidates,onUserInput:this.setSpecimen,required:!0,value:this.state.candidateId,placeHolder:"Search for a PSCID"}),React.createElement(SelectElement,{name:"sessionId",label:"Visit Label",options:sessions,onUserInput:this.setSpecimen,required:!0,value:this.state.sessionId,disabled:!this.state.candidateId}))}return React.createElement(FormElement,{name:"specimenForm",id:"specimenForm",onSubmit:function(){_this3.saveBarcodeList()},ref:"form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9 col-xs-offset-1"},globalFields,remainingQuantityFields)),barcodes,React.createElement(ButtonElement,{label:"Submit",columnSize:"col-sm-2 col-sm-offset-10"}))}}]),BiobankSpecimenForm}(React.Component);BiobankSpecimenForm.propTypes={},exports.default=BiobankSpecimenForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_collectionForm=__webpack_require__(7),_collectionForm2=_interopRequireDefault(_collectionForm),_containerParentForm=__webpack_require__(9),_containerParentForm2=_interopRequireDefault(_containerParentForm),SpecimenBarcodeForm=function(_React$Component){function SpecimenBarcodeForm(){_classCallCheck(this,SpecimenBarcodeForm);var _this=_possibleConstructorReturn(this,(SpecimenBarcodeForm.__proto__||Object.getPrototypeOf(SpecimenBarcodeForm)).call(this));return _this.setContainer=_this.setContainer.bind(_this),_this.setSpecimen=_this.setSpecimen.bind(_this),_this.copy=_this.copy.bind(_this),_this}return _inherits(SpecimenBarcodeForm,_React$Component),_createClass(SpecimenBarcodeForm,[{key:"setContainer",value:function(name,value){this.props.setContainer(name,value,this.props.barcodeKey)}},{key:"setSpecimen",value:function(name,value){this.props.setSpecimen(name,value,this.props.barcodeKey)}},{key:"copy",value:function(){this.props.copyBarcode(this.props.copyMultiplier)}},{key:"render",value:function(){var _this2=this,addBarcodeButton=void 0,addBarcodeText=void 0,copyBarcodeButton=void 0,copyBarcodeText=void 0;this.props.addBarcode&&(addBarcodeButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.props.addBarcode},"+")),addBarcodeText=React.createElement("span",{className:"action-title"},"New Entry")),this.props.copyBarcode&&(copyBarcodeButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.copy},React.createElement("span",{className:"glyphicon glyphicon-duplicate"}))),copyBarcodeText=React.createElement("span",{className:"action-title"},React.createElement("input",{className:"form-control input-sm",type:"number",min:"1",max:"50",style:{width:50,display:"inline"},onChange:this.props.setCopyMultiplier,value:this.props.copyMultiplier}),"Copies"));var removeBarcodeButton=void 0;if(this.props.removeBarcode){var glyphStyle={color:"#DDDDDD",marginLeft:10,cursor:"pointer",fontSize:15};removeBarcodeButton=React.createElement("span",{className:"glyphicon glyphicon-remove",onClick:this.props.removeBarcode,style:glyphStyle})}var specimenTypes={};if(this.props.data)for(var id in this.props.specimenTypes)this.props.specimenTypes[id].parentTypeId!=this.props.data.specimen.typeId&&id!=this.props.data.specimen.typeId||(specimenTypes[id]=this.props.specimenTypes[id].type);else specimenTypes=this.props.mapFormOptions(this.props.specimenTypes,"type");return React.createElement(FormElement,{name:"biobankBarcode"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9 col-xs-offset-1"},React.createElement("div",null,React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setContainer,required:!0,value:this.props.container.barcode}))),React.createElement("div",{className:"col-xs-1",style:{paddingLeft:0,marginTop:10}},React.createElement("span",{className:this.props.collapsed?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-up",style:{cursor:"pointer",fontSize:15,position:"relative",right:40},"data-toggle":"collapse","data-target":"#item-"+this.props.barcodeKey,onClick:function(){return _this2.props.toggleCollapse(_this2.props.barcodeKey)}}),removeBarcodeButton)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-8"},React.createElement("div",{id:"item-"+this.props.barcodeKey,className:"collapse"},React.createElement(SelectElement,{name:"typeId",label:"Specimen Type",options:specimenTypes,onUserInput:this.setSpecimen,required:!0,value:this.props.specimen.typeId}),React.createElement(SelectElement,{name:"typeId",label:"Container Type",options:this.props.containerTypesPrimary,onUserInput:this.setContainer,ref:"containerType",required:!0,value:this.props.container.typeId}),React.createElement(_collectionForm2.default,{specimen:this.props.specimen,setSpecimen:this.setSpecimen,specimenTypeUnits:this.props.specimenTypeUnits,specimenTypeAttributes:this.props.specimenTypeAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions}),React.createElement(_containerParentForm2.default,{setContainer:this.setContainer,mapFormOptions:this.props.mapFormOptions,container:this.props.container,containersNonPrimary:this.props.containersNonPrimary,containerDimensions:this.props.containerDimensions,containerCoordinates:this.props.containerCoordinates})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{className:"col-xs-4"}),React.createElement("div",{className:"col-xs-3 action"},addBarcodeButton,addBarcodeText),React.createElement("div",{className:"col-xs-3 action"},copyBarcodeButton,copyBarcodeText))))}}]),SpecimenBarcodeForm}(React.Component);SpecimenBarcodeForm.propTypes={},exports.default=SpecimenBarcodeForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_customFields=__webpack_require__(8),_customFields2=_interopRequireDefault(_customFields),SpecimenCollectionForm=function(_React$Component){function SpecimenCollectionForm(){_classCallCheck(this,SpecimenCollectionForm);var _this=_possibleConstructorReturn(this,(SpecimenCollectionForm.__proto__||Object.getPrototypeOf(SpecimenCollectionForm)).call(this));return _this.setCollection=_this.setCollection.bind(_this),_this.addData=_this.addData.bind(_this),_this.setData=_this.setData.bind(_this),_this}return _inherits(SpecimenCollectionForm,_React$Component),_createClass(SpecimenCollectionForm,[{key:"setCollection",value:function(name,value){var collection=this.props.specimen.collection;collection[name]=value,this.props.setSpecimen("collection",collection)}},{key:"addData",value:function(){var collection=this.props.specimen.collection;collection.data={},this.props.setSpecimen("collection",collection)}},{key:"setData",value:function(name,value){var data=this.props.specimen.collection.data;data[name]=value,this.setCollection("data",data)}},{key:"render",value:function(){var updateButton=void 0;((this.props.data||{}).specimen||{}).collection&&(updateButton=React.createElement(ButtonElement,{label:"Update"}));var specimenTypeUnits={},specimenTypeFields=void 0;if(this.props.specimen.typeId){for(var id in this.props.specimenTypeUnits[this.props.specimen.typeId])specimenTypeUnits[id]=this.props.specimenTypeUnits[this.props.specimen.typeId][id].unit;var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.props.specimen.typeId];specimenTypeFieldsObject&&(((this.props.specimen||{}).collection||{}).data?specimenTypeFields=React.createElement(_customFields2.default,{fields:specimenTypeFieldsObject,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,object:this.props.specimen.collection.data,setData:this.setData}):this.addData())}var specimenFields=void 0;return this.props.specimen.typeId&&(specimenFields=React.createElement("div",null,React.createElement(TextboxElement,{name:"quantity",label:"Quantity",onUserInput:this.setCollection,required:!0,value:this.props.specimen.collection.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:specimenTypeUnits,onUserInput:this.setCollection,required:!0,value:this.props.specimen.collection.unitId}),specimenTypeFields,React.createElement(DateElement,{name:"date",label:"Date",minYear:"2000",maxYear:"2018",onUserInput:this.setCollection,required:!0,value:this.props.specimen.collection.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setCollection,required:!0,value:this.props.specimen.collection.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setCollection,ref:"comments",value:this.props.specimen.collection.comments}))),React.createElement(FormElement,{name:"biobankSpecimen",onSubmit:this.props.saveSpecimen,ref:"form"},specimenFields,updateButton)}}]),SpecimenCollectionForm}(React.Component);SpecimenCollectionForm.propTypes={setSpecimen:React.PropTypes.func.isRequired,saveSpecimen:React.PropTypes.func,specimen:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,attributeOptions:React.PropTypes.object.isRequired,specimenTypeUnits:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired},exports.default=SpecimenCollectionForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),CustomFields=function(_React$Component){function CustomFields(){return _classCallCheck(this,CustomFields),_possibleConstructorReturn(this,(CustomFields.__proto__||Object.getPrototypeOf(CustomFields)).apply(this,arguments))}return _inherits(CustomFields,_React$Component),_createClass(CustomFields,[{key:"render",value:function(){var _this2=this,fields=this.props.fields,attributeFields=Object.keys(fields).map(function(attribute){var datatype=_this2.props.attributeDatatypes[fields[attribute].datatypeId].datatype;if("text"===datatype||"number"===datatype){if(null===fields[attribute].refTableId)return React.createElement(TextboxElement,{name:attribute,label:fields[attribute].name,onUserInput:_this2.props.setData,required:fields[attribute].required,value:_this2.props.object[attribute]});if(null!==fields[attribute].refTableId)return React.createElement(SelectElement,{name:attribute,label:fields[attribute].name,options:_this2.props.attributeOptions[fields[attribute].refTableId],onUserInput:_this2.props.setData,required:fields[attribute].required,value:_this2.props.object[attribute]})}return"datetime"===datatype?React.createElement(DataElement,{name:attribute,label:fields[attribute].name,onUserInput:_this2.props.setData,required:fields[attribute].required,value:_this2.props.object[attribute]}):"file"!==datatype||(_this2.props.data||{})[attribute]?void 0:React.createElement(FileElement,{name:attribute,label:fields[attribute].name,onUserInput:_this2.props.setData,required:fields[attribute].required,value:_this2.props.files[_this2.props.object[attribute]]})});return React.createElement("div",null,attributeFields)}}]),CustomFields}(React.Component);CustomFields.propTypes={fields:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,attributeOptions:React.PropTypes.object.isRequired,object:React.PropTypes.object.isRequired,setData:React.PropTypes.func.isRequired},exports.default=CustomFields},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){
var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_containerDisplay=__webpack_require__(10),_containerDisplay2=_interopRequireDefault(_containerDisplay),ContainerParentForm=function(_React$Component){function ContainerParentForm(){_classCallCheck(this,ContainerParentForm);var _this=_possibleConstructorReturn(this,(ContainerParentForm.__proto__||Object.getPrototypeOf(ContainerParentForm)).call(this));return _this.setContainer=_this.setContainer.bind(_this),_this}return _inherits(ContainerParentForm,_React$Component),_createClass(ContainerParentForm,[{key:"setContainer",value:function(name,value){this.props.setContainer(name,value),this.props.setContainer("coordinate",null),this.props.setContainer("temperature",this.props.containersNonPrimary[this.props.container.parentContainerId].temperature),this.props.setContainer("locationId",this.props.containersNonPrimary[this.props.container.parentContainerId].locationId),this.props.setContainer("statusId",this.props.containersNonPrimary[this.props.container.parentContainerId].statusId)}},{key:"recursive",value:function(object,id){for(var key in this.props.containersNonPrimary)id==this.props.containersNonPrimary[key].parentContainerId&&(object=this.recursive(object,key),delete object[key]);return object}},{key:"render",value:function(){var containerDisplay=void 0,containerBarcodesNonPrimary=this.props.mapFormOptions(this.props.containersNonPrimary,"barcode");this.props.data&&(containerBarcodesNonPrimary=this.recursive(containerBarcodesNonPrimary,this.props.data.container.id),delete containerBarcodesNonPrimary[this.props.data.container.id]);var parentContainerField=React.createElement(SelectElement,{name:"parentContainerId",label:"Parent Container Barcode",options:containerBarcodesNonPrimary,onUserInput:this.setContainer,value:this.props.container.parentContainerId});if(this.props.container.parentContainerId){var dimensionId=this.props.containersNonPrimary[this.props.container.parentContainerId].dimensionId;if(dimensionId){var dimensions=this.props.containerDimensions[dimensionId],coordinatesTotal=1;for(var dimension in dimensions)coordinatesTotal*=dimensions[dimension];for(var coordinates={},i=1;i<=coordinatesTotal;i++)this.props.containerCoordinates[this.props.container.parentContainerId]&&this.props.containerCoordinates[this.props.container.parentContainerId][i]||(coordinates[i]=i);containerDisplay=React.createElement(_containerDisplay2.default,{dimensions:this.props.containerDimensions[this.props.containersNonPrimary[this.props.container.parentContainerId].dimensionId],coordinates:this.props.containerCoordinates[this.props.container.parentContainerId],containerTypes:this.props.containerTypes,containerStati:this.props.containerStati,select:!0,selectedCoordinate:this.props.container.coordinate,setContainer:this.props.setContainer})}}var updateButton=void 0;return(this.props.data||{}).container&&(updateButton=React.createElement("div",null,React.createElement("br",null),React.createElement(ButtonElement,{label:"Update"}))),React.createElement(FormElement,{onSubmit:this.props.saveContainer},parentContainerField,containerDisplay,updateButton)}}]),ContainerParentForm}(React.Component);ContainerParentForm.propTypes={mapFormOptions:React.PropTypes.func.isRequired,setContainer:React.PropTypes.func.isRequired,saveContainer:React.PropTypes.func,data:React.PropTypes.object,container:React.PropTypes.object.isRequired,containersNonPrimary:React.PropTypes.object.isRequired,containerDimensions:React.PropTypes.object.isRequired,containerCoordinates:React.PropTypes.object.isRequired,containerTypes:React.PropTypes.object,containerStati:React.PropTypes.object},exports.default=ContainerParentForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(11),_Modal2=_interopRequireDefault(_Modal),ContainerDisplay=function(_React$Component){function ContainerDisplay(){_classCallCheck(this,ContainerDisplay);var _this=_possibleConstructorReturn(this,(ContainerDisplay.__proto__||Object.getPrototypeOf(ContainerDisplay)).call(this));return _this.redirectURL=_this.redirectURL.bind(_this),_this.drag=_this.drag.bind(_this),_this.drop=_this.drop.bind(_this),_this.loadContainer=_this.loadContainer.bind(_this),_this}return _inherits(ContainerDisplay,_React$Component),_createClass(ContainerDisplay,[{key:"componentDidMount",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"componenDidUpdate",value:function(){$('[data-toggle="tooltip"]').tooltip()}},{key:"redirectURL",value:function(e){var coordinate=e.target.id;if(this.props.coordinates[coordinate]){var load=this.props.types[this.props.children[this.props.coordinates[coordinate]].typeId].primary?this.props.loadSpecimen:this.props.loadContainer;load(this.props.children[this.props.coordinates[coordinate]].barcode)}}},{key:"allowDrop",value:function(e){e.preventDefault()}},{key:"drag",value:function(e){var container=JSON.stringify(this.props.children[this.props.coordinates[e.target.id]]);e.dataTransfer.setData("text/plain",container)}},{key:"drop",value:function(e){e.preventDefault();var container=JSON.parse(e.dataTransfer.getData("text/plain")),newCoordinate=parseInt(e.target.id);container.coordinate=newCoordinate,this.props.saveChildContainer(container)}},{key:"increaseCoordinate",value:function(coordinate){coordinate++;for(var c in this.props.coordinates)c==coordinate&&this.props.close();return coordinate}},{key:"loadContainer",value:function(name,value){var _this2=this;if(value){var containerId=value,container=this.props.containers[containerId];container.parentContainerId=this.props.container.id,container.coordinate=this.props.coordinate,this.props.saveChildContainer(container).then(function(){if(_this2.props.sequential){_this2.props.edit("barcode");var coordinate=_this2.increaseCoordinate(_this2.props.coordinate);_this2.props.setCoordinate(coordinate)}else _this2.props.close()})}}},{key:"render",value:function(){var _this3=this,barcodeField=void 0;(this.props.editable||{}).barcode&&(barcodeField=React.createElement(_Modal2.default,{title:"Load Container",show:this.props.editable.barcode,closeModal:this.props.close,throwWarning:!1},React.createElement(StaticElement,{name:"coordinate",label:"Coordinate",text:this.props.coordinate}),React.createElement(CheckboxElement,{name:"sequential",label:"Sequential Loading",value:this.props.sequential,onUserInput:this.props.setSequential}),React.createElement(SearchableDropdown,{name:"barcode",label:"Barcode",options:this.props.barcodes,onUserInput:this.loadContainer,placeHolder:"Please Scan or Select Barcode",autoFocus:!0})));var column=[],row=[],display=void 0,coordinate=1;if(this.props.dimensions){for(var y=0;y<this.props.dimensions.y;y++){column=[];for(var x=1;x<=this.props.dimensions.x;x++){var nodeWidth=500/this.props.dimensions.x-500/this.props.dimensions.x*.08,nodeStyle={width:nodeWidth},nodeClass="node",tooltipTitle=null,title=null,dataHtml="false",dataToggle=null,dataPlacement=null,draggable="false",onDragStart=null,onDragOver=this.allowDrop,onDrop=this.drop,onClick=null;this.props.select||((this.props.coordinates||{})[coordinate]?(nodeClass="node occupied",dataHtml="true",dataToggle="tooltip",dataPlacement="top",tooltipTitle="<h5>"+this.props.children[this.props.coordinates[coordinate]].barcode+"</h5><h5>"+this.props.containerTypes[this.props.children[this.props.coordinates[coordinate]].typeId].label+"</h5><h5>"+this.props.containerStati[this.props.children[this.props.coordinates[coordinate]].statusId].status+"</h5>",draggable="true",onDragStart=this.drag,onDragOver=null,onDrop=null,onClick=this.redirectURL):(nodeClass="node load",title="Load...",onClick=function(e){_this3.props.setCoordinate(e.target.id),_this3.props.edit("barcode")})),this.props.select&&(coordinate==this.props.selectedCoordinate?nodeClass="node occupied":this.props.coordinates?this.props.coordinates&&(this.props.coordinates[coordinate]?this.props.coordinates[coordinate]:(nodeClass="node available",onClick=function(e){return _this3.props.setContainer("coordinate",e.target.id)})):(nodeClass="node available",onClick=function(e){return _this3.props.setContainer("coordinate",e.target.id)}));var coordinateDisplay=void 0;coordinateDisplay=x+this.props.dimensions.x*y,column.push(React.createElement("div",{id:coordinate,title:title,className:nodeClass,"data-html":dataHtml,"data-toggle":dataToggle,"data-placement":dataPlacement,"data-original-title":tooltipTitle,style:nodeStyle,onClick:onClick,draggable:draggable,onDragStart:onDragStart,onDragOver:onDragOver,onDrop:onDrop},coordinateDisplay)),coordinate++}var rowHeight=500/this.props.dimensions.y-500/this.props.dimensions.y*.08,rowStyle=(500/this.props.dimensions.y*.04,{height:rowHeight});row.push(React.createElement("div",{className:"row",style:rowStyle},column))}display=row}return React.createElement("div",{className:"display"},barcodeField,display)}}]),ContainerDisplay}(React.Component);ContainerDisplay.propTypes={},exports.default=ContainerDisplay},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Modal=function(_React$Component){function Modal(){_classCallCheck(this,Modal);var _this=_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this));return _this.closeModal=_this.closeModal.bind(_this),_this}return _inherits(Modal,_React$Component),_createClass(Modal,[{key:"closeModal",value:function(){var _this2=this;this.props.throwWarning?swal({title:"Are You Sure?",text:"Leaving the form will result in the loss of any information entered.",type:"warning",showCancelButton:!0,confirmButtonText:"Proceed",cancelButtonText:"Cancel"},function(){_this2.props.closeModal()}):this.props.closeModal()}},{key:"render",value:function(){var backdropStyle={position:"fixed",zIndex:9998,top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50},modalStyle={position:"relative",maxWidth:850,maxHeight:"100%",margin:"0 auto",backgroundColor:"#fff",borderRadius:10,overflowY:"auto",zIndex:9999},titleStyle={display:"flex",flexDirection:"row",alignItems:"center",background:"#093782",height:"50px",borderTopRightRadius:"10",color:"#FFFFFF",fontSize:24,padding:20},glyphStyle={marginLeft:"auto",cursor:"pointer"},bodyStyle={padding:15},modal=void 0;return this.props.show&&(modal=React.createElement("div",{style:backdropStyle,onClick:this.closeModal},React.createElement("div",{style:modalStyle,onClick:function(e){e.stopPropagation()}},React.createElement("div",{style:titleStyle},this.props.title,React.createElement("span",{style:glyphStyle,onClick:this.closeModal},"")),React.createElement("div",{style:bodyStyle},this.props.children)))),React.createElement("div",null,modal)}}]),Modal}(React.Component);Modal.propTypes={title:React.PropTypes.string,show:React.PropTypes.bool.isRequired,closeModal:React.PropTypes.func.isRequired,throwWarning:React.PropTypes.bool.isRequired},Modal.defaultProps={throwWarning:!0},exports.default=Modal},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_barcodeForm=__webpack_require__(6),_specimenForm=(_interopRequireDefault(_barcodeForm),__webpack_require__(5)),_specimenForm2=_interopRequireDefault(_specimenForm),_preparationForm=__webpack_require__(13),_preparationForm2=_interopRequireDefault(_preparationForm),PoolSpecimenForm=function(_React$Component){function PoolSpecimenForm(props){_classCallCheck(this,PoolSpecimenForm);var _this=_possibleConstructorReturn(this,(PoolSpecimenForm.__proto__||Object.getPrototypeOf(PoolSpecimenForm)).call(this,props));return _this.state={formData:{},barcodeList:{},errorMessage:null,formErrors:{},barcodeCount:2,preparation:!1,step:1},_this.handleSubmit=_this.handleSubmit.bind(_this),_this.validateForm=_this.validateForm.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.setPreparationFormData=_this.setPreparationFormData.bind(_this),_this.setSpecimenFormData=_this.setSpecimenFormData.bind(_this),_this.submitForm=_this.submitForm.bind(_this),_this.setBarcodeCount=_this.setBarcodeCount.bind(_this),_this.next=_this.next.bind(_this),_this.previous=_this.previous.bind(_this),_this.addPreparation=_this.addPreparation.bind(_this),_this.removePreparation=_this.removePreparation.bind(_this),_this.validate=_this.validate.bind(_this),_this.formSwitch=_this.formSwitch.bind(_this),_this.preparationSwitch=_this.preparationSwitch.bind(_this),_this.runAjax=_this.runAjax.bind(_this),_this}return _inherits(PoolSpecimenForm,_React$Component),_createClass(PoolSpecimenForm,[{key:"next",value:function(){var _this2=this;this.validate().then(function(data){_this2.setState({poolData:data,step:_this2.state.step+1})},function(error){swal("Oops!",error.responseText,"error")})}},{key:"previous",value:function(){this.setState({step:this.state.step-1})}},{key:"validate",value:function(){return this.runAjax(this.props.specimenRequest,{barcodeList:this.state.barcodeList})}},{key:"runAjax",value:function(url,inputData){var _this3=this;return new Promise(function(resolve,reject){$.ajax(url,{method:"GET",dataType:"json",data:inputData,success:function(data){resolve(data)}.bind(_this3),error:function(_error,textStatus,errorThrown){reject(_error),console.error(_error)}})})}},{key:"setBarcodeCount",value:function(field,value){var barcodeCount=value,barcodeList=this.state.barcodeList;for(var barcode in barcodeList)barcode>barcodeCount&&delete barcodeList[barcode];this.setState({barcodeCount:barcodeCount,barcodeList:barcodeList})}},{key:"formSwitch",value:function(inputForm,specimenForm){switch(this.state.step){case 1:return inputForm;case 2:return specimenForm}}},{key:"preparationSwitch",value:function(preparationButton,preparationForm){switch(this.state.preparation){case!1:return preparationButton;case!0:return preparationForm}}},{key:"addPreparation",value:function(){var _this4=this;this.validate().then(function(data){_this4.setState({poolData:data,preparation:!0})},function(error){swal("Oh no!",error.responseText,"error")})}},{key:"removePreparation",value:function(){var formData=this.state.formData;formData.preparationForm={},this.setState({preparation:!1,formData:formData})}},{key:"render",value:function(){for(var barcodes=[],i=1;i<=this.state.barcodeCount;i++)barcodes.push(React.createElement(TextboxElement,{name:i,label:"Barcode "+i,onUserInput:this.setFormData,required:!0,value:this.state.barcodeList[i],errorMessage:this.state.formErrors[i]}));var preparationButton=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-4"}),React.createElement("div",{className:"col-xs 4 action"},React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.addPreparation},"+")),React.createElement("div",{className:"action-title"},"Add Preparation"))),preparationForm=void 0;if(this.state.poolData){var specimenProtocolAttributes=this.props.specimenProtocolAttributes[this.state.poolData.typeId],specimenProtocols={};for(var id in specimenProtocolAttributes)specimenProtocols[id]=this.props.specimenProtocols[id];specimenProtocols=this.props.mapFormOptions(specimenProtocols,"protocol"),preparationForm=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-1"},React.createElement(_preparationForm2.default,{formData:this.state.formData.preparationForm,specimenProtocols:specimenProtocols,specimenProtocolAttributes:specimenProtocolAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,setParentFormData:this.setPreparationFormData,insertAction:loris.BaseURL+"/biobank/ajax/submitData.php?action=insertSpecimenPreparation"}),React.createElement("a",{className:"pull-right",style:{cursor:"pointer"},onClick:this.removePreparation},"Cancel Preparation")))}var inputForm=React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-1"},React.createElement(StaticElement,{label:"Pooling Note",text:"Select or Scan the specimens to be pooled. Please ensure that they are the same type, and share the same PSCID and Visit Label"}),React.createElement(NumericElement,{label:" of Specimens",min:"2",max:"100",value:this.state.barcodeCount,onUserInput:this.setBarcodeCount}),barcodes)),this.preparationSwitch(preparationButton,preparationForm),React.createElement("div",{className:"col-sm-3 col-xs-offset-9 action"},React.createElement("div",{className:"action-title"},"Next"),React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.next},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))))),specimenForm=void 0;if(this.state.poolData){var specimenTypes={};this.state.poolData.typeId&&(specimenTypes[this.state.poolData.typeId]=this.props.specimenTypes[this.state.poolData.typeId]);var pscid=this.props.pSCIDs[this.state.poolData.candidateId],visit=this.props.sessionData[pscid].visits[this.state.poolData.sessionId],barcodesArray=Object.values(this.state.barcodeList),barcodesString=barcodesArray.join(", "),specimenUnits=this.props.mapFormOptions(this.props.specimenUnits,"unit");specimenForm=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement(_specimenForm2.default,{formData:this.state.formData.specimenForm,candidateId:this.state.poolData.candidateId,pscid:pscid,sessionId:this.state.poolData.sessionId,visit:visit,parentSpecimenBarcodes:barcodesString,parentSpecimenIds:this.state.poolData.specimenIds,specimenTypes:specimenTypes,specimenTypeUnits:this.props.specimenTypeUnits,specimenUnits:specimenUnits,containerTypesPrimary:this.props.containerTypesPrimary,containersNonPrimary:this.props.containersNonPrimary,specimenTypeAttributes:this.props.specimenTypeAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,capacities:this.props.capacities,containerDimensions:this.props.containerDimensions,containerCoordinates:this.props.containerCoordinates,setParentFormData:this.setSpecimenFormData,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=submitSpecimen",refreshParent:this.props.refreshParent}),React.createElement(ButtonElement,{label:"Submit"})),React.createElement("div",{className:"col-sm-3 col-xs-offset-2 action"},React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.previous},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"}))),React.createElement("div",{className:"action-title"},"Previous")))}return React.createElement(FormElement,{name:"poolSpecimenForm",id:"poolSpecimenForm",onSubmit:this.handleSubmit,ref:"form"},this.formSwitch(inputForm,specimenForm))}},{key:"validateForm",value:function(formElement,value){var _this5=this,formErrors=this.state.formErrors;"barcode"===formElement&&""!==value&&(/^hello/.test(this.state.formData.barcode)?formErrors.barcode=!1:formErrors.barcode=!0),"quantity"===formElement&&""!==value&&(isNaN(value)||value>this.props.capacities[this.state.currentContainerType]?formErrors.quantity=!0:formErrors.quantity=!1);var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];Object.keys(specimenTypeFieldsObject).map(function(attribute){var datatype=_this5.props.attributeDatatypes[specimenTypeFieldsObject[attribute].datatypeId].datatype;"number"===datatype&&formElement===attribute&&(isNaN(value)&&""!==value?formErrors[attribute]=!0:formErrors[attribute]=!1)});this.setState({formErrors:formErrors})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submitForm()}},{key:"submitForm",value:function(){var formData=this.state.formData,preparationForm=this.state.formData.preparationForm,specimenForm=this.state.formData.specimenForm;formData.preparationForm=JSON.stringify(preparationForm),formData.specimenForm=JSON.stringify(specimenForm),console.log(formData.specimenForm),console.log(formData.preparationForm);var formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){swal("Specimens Pooled Successful!","","success"),this.props.onSuccess()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"isValidForm",value:function isValidForm(formRefs,formData){var isValidForm=!0,requiredFields={pscid:null,visitLabel:null};return Object.keys(requiredFields).map(function(field){formData[field]?requiredFields[field]=formData[field]:formRefs[field]&&(formRefs[field].props.hasError=!0,isValidForm=!1)}),this.forceUpdate(),isValidForm}},{key:"setFormData",value:function(formElement,value){this.props.onChange instanceof Function&&this.props.onChange(),"pscid"===formElement&&""!==value&&void 0!==value&&(this.state.visits=this.props.sessionData[this.props.pSCIDs[value]].visits);var formData=this.state.formData,barcodeList=this.state.barcodeList;isNaN(formElement)?formData[formElement]=value:barcodeList[formElement]=value,this.setState({formData:formData,barcodeList:barcodeList})}},{key:"setPreparationFormData",value:function(preparationFormData){var formData=this.state.formData;formData.preparationForm=preparationFormData,this.setState({formData:formData})}},{key:"setSpecimenFormData",value:function(specimenFormData){var formData=this.state.formData;formData.specimenForm=specimenFormData,this.setState({formData:formData})}}]),PoolSpecimenForm}(React.Component);PoolSpecimenForm.propTypes={DataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,refreshTable:React.PropTypes.func},exports.default=PoolSpecimenForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_customFields=__webpack_require__(8),_customFields2=_interopRequireDefault(_customFields),SpecimenPreparationForm=function(_React$Component){function SpecimenPreparationForm(){_classCallCheck(this,SpecimenPreparationForm);var _this=_possibleConstructorReturn(this,(SpecimenPreparationForm.__proto__||Object.getPrototypeOf(SpecimenPreparationForm)).call(this));return _this.setPreparation=_this.setPreparation.bind(_this),_this.addData=_this.addData.bind(_this),_this.setData=_this.setData.bind(_this),_this}return _inherits(SpecimenPreparationForm,_React$Component),_createClass(SpecimenPreparationForm,[{key:"setPreparation",value:function(name,value){var preparation=this.props.specimen.preparation;preparation[name]=value,this.props.setSpecimen("preparation",preparation)}},{key:"addData",value:function(){var preparation=this.props.specimen.preparation;preparation.data={},this.props.setSpecimen("preparation",preparation)}},{key:"setData",value:function(name,value){var data=this.props.specimen.preparation.data;data[name]=value,this.setPreparation("data",data)}},{key:"render",value:function(){var submitButton=void 0;submitButton=this.props.data.specimen.preparation?React.createElement(ButtonElement,{label:"Update"}):React.createElement(ButtonElement,{label:"Submit"});var specimenProtocolFields=void 0;if(this.props.specimen.preparation.protocolId){var specimenProtocolFieldsObject=this.props.specimenProtocolAttributes[this.props.specimen.preparation.protocolId];specimenProtocolFieldsObject&&(this.props.specimen.preparation.data?specimenProtocolFields=React.createElement(_customFields2.default,{fields:specimenProtocolFieldsObject,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,object:this.props.specimen.preparation.data,setData:this.setData}):this.addData())}return React.createElement(FormElement,{name:"specimenPreparation",onSubmit:this.props.saveSpecimen,ref:"form"},React.createElement(SelectElement,{name:"protocolId",label:"Protocol",options:this.props.specimenProtocols,onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.protocolId}),specimenProtocolFields,React.createElement(DateElement,{name:"date",label:"Date",onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setPreparation,value:this.props.specimen.preparation.comments}),submitButton)}}]),SpecimenPreparationForm}(React.Component);SpecimenPreparationForm.propTypes={},exports.default=SpecimenPreparationForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),
staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_containerBarcodeForm=__webpack_require__(15),_containerBarcodeForm2=_interopRequireDefault(_containerBarcodeForm),BiobankContainerForm=function(_React$Component){function BiobankContainerForm(props){_classCallCheck(this,BiobankContainerForm);var _this=_possibleConstructorReturn(this,(BiobankContainerForm.__proto__||Object.getPrototypeOf(BiobankContainerForm)).call(this,props));return _this.state={formErrors:{},errorMessage:null,containerList:{1:{}},countContainers:1,collapsed:{1:!0},copyMultiplier:1},_this.toggleCollapse=_this.toggleCollapse.bind(_this),_this.addContainer=_this.addContainer.bind(_this),_this.setContainer=_this.setContainer.bind(_this),_this.setCopyMultiplier=_this.setCopyMultiplier.bind(_this),_this.copyContainer=_this.copyContainer.bind(_this),_this.removeContainer=_this.removeContainer.bind(_this),_this.saveContainerList=_this.saveContainerList.bind(_this),_this}return _inherits(BiobankContainerForm,_React$Component),_createClass(BiobankContainerForm,[{key:"toggleCollapse",value:function(key){var collapsed=this.state.collapsed;collapsed[key]=!collapsed[key],this.setState({collapsed:collapsed})}},{key:"saveContainerList",value:function(){var _this2=this,containerList=this.state.containerList,availableId=Object.keys(this.props.containerStati).find(function(key){return"Available"===_this2.props.containerStati[key]});for(var container in containerList)containerList[container].statusId=availableId,containerList[container].temperature=20,this.props.save(containerList[container],this.props.saveContainer,"Container Creation Successful!").then(function(){_this2.props.close(),_this2.props.loadFilters(),_this2.props.loadOptions()})}},{key:"setContainer",value:function(name,value,key){this.props.onChange instanceof Function&&this.props.onChange();var siteId=this.state.siteId,containerList=this.state.containerList;if("siteId"===name){siteId=value;for(var container in containerList)containerList[container].originId=siteId,containerList[container].locationId=siteId}else containerList[key][name]=value;this.setState({containerList:containerList,siteId:siteId})}},{key:"addContainer",value:function(){var _this3=this,containerList=this.state.containerList,count=this.state.countContainers,collapsed=this.state.collapsed,siteId=this.state.siteId,temperature=20,statusId=Object.keys(this.props.containerStati).find(function(key){return"Available"===_this3.props.containerStati[key]});containerList[count+1]={statusId:statusId,originId:siteId,locationId:siteId,temperature:temperature},collapsed[count+1]=!0,this.setState({containerList:containerList,countContainers:count+1,collapsed:collapsed})}},{key:"setCopyMultiplier",value:function(e){var copyMultiplier=e.target.value;this.setState({copyMultiplier:copyMultiplier})}},{key:"copyContainer",value:function(key){for(var count=this.state.countContainers,collapsed=this.state.collapsed,nextKey=count+1,containerList=this.state.containerList,multiplier=this.state.copyMultiplier,i=1;i<=multiplier;i++)containerList[nextKey]=JSON.parse(JSON.stringify(containerList[key])),delete containerList[nextKey].barcode,collapsed[nextKey]=!0,nextKey++;this.setState({containerList:containerList,countContainers:nextKey,collapsed:collapsed})}},{key:"removeContainer",value:function(key){var containerList=this.state.containerList;delete containerList[key],this.setState({containerList:containerList})}},{key:"render",value:function(){var _this4=this,containerListArray=Object.keys(this.state.containerList),containers=[],i=1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;containers.push(React.createElement(_containerBarcodeForm2.default,{key:key,containerKey:key,id:i,collapsed:_this4.state.collapsed[key],toggleCollapse:_this4.toggleCollapse,container:_this4.state.containerList[key]||null,removeContainer:1!==containerListArray.length?function(){return _this4.removeContainer(key)}:null,addContainer:i==containerListArray.length?_this4.addContainer:null,setCopyMultiplier:_this4.setCopyMultiplier,copyMultiplier:_this4.state.copyMultiplier,copyContainer:i==containerListArray.length&&_this4.state.containerList[key]?_this4.copyContainer:null,setContainer:_this4.setContainer,onChange:_this4.props.onChange,containerTypesNonPrimary:_this4.props.containerTypesNonPrimary,containerBarcodesNonPrimary:_this4.props.containerBarcodesNonPrimary})),i++},_iterator=containerListArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return React.createElement(FormElement,{name:"containerForm",onSubmit:this.saveContainerList,ref:"form"},React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement(SelectElement,{name:"siteId",label:"Site",options:this.props.centers,onUserInput:this.setContainer,required:!0,value:this.state.siteId}))),containers,React.createElement("div",{className:"col-xs-3 col-xs-offset-9"},React.createElement(ButtonElement,{label:"Submit"})))}}]),BiobankContainerForm}(React.Component);BiobankContainerForm.propTypes={DataURL:React.PropTypes.string.isRequired,barcode:React.PropTypes.string,refreshTable:React.PropTypes.func},exports.default=BiobankContainerForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerBarcodeForm=function(_React$Component){function ContainerBarcodeForm(){_classCallCheck(this,ContainerBarcodeForm);var _this=_possibleConstructorReturn(this,(ContainerBarcodeForm.__proto__||Object.getPrototypeOf(ContainerBarcodeForm)).call(this));return _this.setContainer=_this.setContainer.bind(_this),_this.copy=_this.copy.bind(_this),_this}return _inherits(ContainerBarcodeForm,_React$Component),_createClass(ContainerBarcodeForm,[{key:"copy",value:function(){this.props.copyContainer(this.props.containerKey)}},{key:"setContainer",value:function(name,value){this.props.setContainer(name,value,this.props.containerKey)}},{key:"render",value:function(){var _this2=this,addContainerButton=void 0,addContainerText=void 0,copyContainerButton=void 0,copyContainerText=void 0;this.props.addContainer&&(addContainerButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.props.addContainer},"+")),addContainerText=React.createElement("span",{className:"action-title"},"New Entry")),this.props.copyContainer&&(copyContainerButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.copy},React.createElement("span",{className:"glyphicon glyphicon-duplicate"}))),copyContainerText=React.createElement("span",{className:"action-title"},React.createElement("input",{className:"form-control input-sm",type:"number",min:"1",max:"50",style:{width:50,display:"inline"},onChange:this.props.setCopyMultiplier,value:this.props.copyMultiplier}),"Copies"));var removeContainerButton=void 0;if(this.props.removeContainer){var glyphStyle={color:"#DDDDDD",marginLeft:10,cursor:"pointer",fontSize:15};removeContainerButton=React.createElement("span",{className:"glyphicon glyphicon-remove",onClick:this.props.removeContainer,style:glyphStyle})}return React.createElement(FormElement,{name:"container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",null,React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setContainer,ref:"barcode",required:!0,value:this.props.container.barcode}))),React.createElement("div",{className:"col-xs-1",style:{paddingLeft:0,marginTop:10}},React.createElement("span",{className:this.props.collapsed?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-up",style:{cursor:"pointer",fontSize:15,position:"relative",right:40},"data-toggle":"collapse","data-target":"#item-"+this.props.containerKey,onClick:function(){return _this2.props.toggleCollapse(_this2.props.containerKey)}}),removeContainerButton)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-9"},React.createElement("div",{id:"item-"+this.props.containerKey,className:"collapse"},React.createElement(SelectElement,{name:"typeId",label:"Container Type",options:this.props.containerTypesNonPrimary,onUserInput:this.setContainer,required:!0,value:this.props.container.typeId})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{className:"col-xs-3"}),React.createElement("div",{className:"col-xs-4 action"},addContainerButton,addContainerText),React.createElement("div",{className:"col-xs-4 action"},copyContainerButton,copyContainerText))))}}]),ContainerBarcodeForm}(React.Component);ContainerBarcodeForm.propTypes={},exports.default=ContainerBarcodeForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Tabs=function(_React$Component){function Tabs(props){_classCallCheck(this,Tabs);var _this=_possibleConstructorReturn(this,(Tabs.__proto__||Object.getPrototypeOf(Tabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this.props.updateURL&&hash?activeTab=hash.substr(1):_this.props.defaultTab?activeTab=_this.props.defaultTab:_this.props.tabs.length>0&&(activeTab=_this.props.tabs[0].id),_this.state={activeTab:activeTab},_this.handleClick=_this.handleClick.bind(_this),_this.getTabs=_this.getTabs.bind(_this),_this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(Tabs,_React$Component),_createClass(Tabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs",role:"tablist",style:tabStyle},tabs),React.createElement("div",{className:"tab-content"},tabPanes))}}]),Tabs}(React.Component);Tabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},Tabs.defaultProps={onTabChange:function(){},updateURL:!0};var VerticalTabs=function(_React$Component2){function VerticalTabs(props){_classCallCheck(this,VerticalTabs);var _this2=_possibleConstructorReturn(this,(VerticalTabs.__proto__||Object.getPrototypeOf(VerticalTabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this2.props.updateURL&&hash?activeTab=hash.substr(1):_this2.props.defaultTab?activeTab=_this2.props.defaultTab:_this2.props.tabs.length>0&&(activeTab=_this2.props.tabs[0].id),_this2.state={activeTab:activeTab},_this2.handleClick=_this2.handleClick.bind(_this2),_this2.getTabs=_this2.getTabs.bind(_this2),_this2.getTabPanes=_this2.getTabPanes.bind(_this2),_this2}return _inherits(VerticalTabs,_React$Component2),_createClass(VerticalTabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("div",{className:"tabbable col-md-3 col-sm-3"},React.createElement("ul",{className:"nav nav-pills nav-stacked",role:"tablist",style:tabStyle},tabs)),React.createElement("div",{className:"tab-content col-md-9 col-sm-9"},tabPanes))}}]),VerticalTabs}(React.Component);VerticalTabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},VerticalTabs.defaultProps={onTabChange:function(){},updateURL:!0};var TabPane=function(_React$Component3){function TabPane(){return _classCallCheck(this,TabPane),_possibleConstructorReturn(this,(TabPane.__proto__||Object.getPrototypeOf(TabPane)).apply(this,arguments))}return _inherits(TabPane,_React$Component3),_createClass(TabPane,[{key:"render",value:function(){var classList="tab-pane",title=void 0;return this.props.TabId===this.props.activeTab&&(classList+=" active"),this.props.Title&&(title=React.createElement("h1",null,this.props.Title)),React.createElement("div",{role:"tabpanel",className:classList,id:this.props.TabId},title,this.props.children)}}]),TabPane}(React.Component);TabPane.propTypes={TabId:React.PropTypes.string.isRequired,Title:React.PropTypes.string,activeTab:React.PropTypes.string},exports.Tabs=Tabs,exports.VerticalTabs=VerticalTabs,exports.TabPane=TabPane},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(11),_Modal2=_interopRequireDefault(_Modal),_globals=__webpack_require__(18),_globals2=_interopRequireDefault(_globals),_collectionForm=__webpack_require__(7),_collectionForm2=_interopRequireDefault(_collectionForm),_preparationForm=__webpack_require__(13),_preparationForm2=_interopRequireDefault(_preparationForm),_analysisForm=__webpack_require__(23),_analysisForm2=_interopRequireDefault(_analysisForm),_specimenForm=__webpack_require__(5),_specimenForm2=_interopRequireDefault(_specimenForm),_lifeCycle=__webpack_require__(24),_lifeCycle2=_interopRequireDefault(_lifeCycle),_containerCheckout=__webpack_require__(25),_containerCheckout2=_interopRequireDefault(_containerCheckout),BiobankSpecimen=function(_React$Component){function BiobankSpecimen(){return _classCallCheck(this,BiobankSpecimen),_possibleConstructorReturn(this,(BiobankSpecimen.__proto__||Object.getPrototypeOf(BiobankSpecimen)).apply(this,arguments))}return _inherits(BiobankSpecimen,_React$Component),_createClass(BiobankSpecimen,[{key:"render",value:function(){var _this2=this,specimenUnits=this.props.mapFormOptions(this.props.options.specimenUnits,"unit"),containerTypesPrimary=this.props.mapFormOptions(this.props.options.containerTypesPrimary,"label"),containerStati=this.props.mapFormOptions(this.props.options.containerStati,"status"),candidates=this.props.mapFormOptions(this.props.options.candidates,"pscid"),sessions=this.props.mapFormOptions(this.props.options.sessions,"label"),addAliquotForm=React.createElement("div",{className:"action",title:"Make Aliquots"},React.createElement("div",{className:"action-button add",onClick:function(){_this2.props.edit("aliquotForm")}},React.createElement("span",null,"+")),React.createElement(_Modal2.default,{title:"Add Aliquots",closeModal:this.props.close,show:this.props.editable.aliquotForm},React.createElement(_specimenForm2.default,{data:this.props.data,specimen:this.props.specimen,setSpecimen:this.props.setSpecimen,saveSpecimen:this.props.saveSpecimen,candidates:candidates,sessions:sessions,specimenTypes:this.props.options.specimenTypes,specimenUnits:specimenUnits,specimenTypeUnits:this.props.options.specimenTypeUnits,specimenTypeAttributes:this.props.options.specimenTypeAttributes,attributeOptions:this.props.options.attributeOptions,attributeDatatypes:this.props.options.attributeDatatypes,containerTypesPrimary:containerTypesPrimary,containersNonPrimary:this.props.options.containersNonPrimary,containerDimensions:this.props.options.containerDimensions,containerCoordinates:this.props.options.containerCoordinates,containerStati:containerStati,mapFormOptions:this.props.mapFormOptions,saveBarcodeListURL:this.props.saveBarcodeListURL,loadFilters:this.props.loadFilters,loadOptions:this.props.loadOptions,close:this.props.close,save:this.props.save}))),collectionPanel=void 0,collectionPanelForm=void 0,cancelEditCollectionButton=void 0;if(this.props.editable.collection){var _containerTypesPrimary=this.props.mapFormOptions(this.props.options.containerTypesPrimary,"label");collectionPanelForm=React.createElement(_collectionForm2.default,{specimen:this.props.specimen,data:this.props.data,specimenTypeAttributes:this.props.options.specimenTypeAttributes,attributeDatatypes:this.props.options.attributeDatatypes,attributeOptions:this.props.options.attributeOptions,containerTypesPrimary:_containerTypesPrimary,specimenTypeUnits:this.props.options.specimenTypeUnits,setSpecimen:this.props.setSpecimen,saveSpecimen:this.props.saveSpecimen}),cancelEditCollectionButton=React.createElement("a",{className:"pull-right",style:{cursor:"pointer"},onClick:this.props.close},"Cancel")}else{var specimenTypeAttributes=void 0;if(this.props.data.specimen.collection.data){var collectionData=this.props.data.specimen.collection.data;specimenTypeAttributes=Object.keys(collectionData).map(function(key){return React.createElement(StaticElement,{label:_this2.props.options.specimenTypeAttributes[_this2.props.data.specimen.typeId][key].name,text:collectionData[key]})})}collectionPanelForm=React.createElement(FormElement,null,React.createElement(StaticElement,{label:"Quantity",text:this.props.data.specimen.collection.quantity+" "+this.props.options.specimenUnits[this.props.data.specimen.collection.unitId].unit}),React.createElement(StaticElement,{label:"Location",text:this.props.options.centers[this.props.data.specimen.collection.locationId]}),specimenTypeAttributes,React.createElement(StaticElement,{label:"Date",text:this.props.data.specimen.collection.date}),React.createElement(StaticElement,{label:"Time",text:this.props.data.specimen.collection.time}),React.createElement(StaticElement,{label:"Comments",text:this.props.data.specimen.collection.comments}))}collectionPanel=React.createElement("div",{className:"panel specimen-panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("div",{className:"lifecycle-node collection"},React.createElement("div",{className:"letter"},"C")),React.createElement("div",{className:"title"},"Collection"),React.createElement("span",{className:this.props.editable.collection?null:"glyphicon glyphicon-pencil",onClick:this.props.editable.collection?null:function(){_this2.props.edit("collection")}})),React.createElement("div",{className:"panel-body"},collectionPanelForm,cancelEditCollectionButton));var preparationPanel=void 0,preparationForm=void 0,cancelEditPreparationButton=void 0,specimenProtocols={},specimenProtocolAttributes={};for(var id in this.props.options.specimenProtocols)this.props.options.specimenProtocols[id].typeId===this.props.data.specimen.typeId&&(specimenProtocols[id]=this.props.options.specimenProtocols[id].protocol,specimenProtocolAttributes[id]=this.props.options.specimenProtocolAttributes[id]);if(this.props.editable.preparation&&(preparationForm=React.createElement(_preparationForm2.default,{specimen:this.props.specimen,data:this.props.data,specimenProtocols:specimenProtocols,specimenProtocolAttributes:specimenProtocolAttributes,attributeDatatypes:this.props.options.attributeDatatypes,attributeOptions:this.props.options.attributeOptions,setSpecimen:this.props.setSpecimen,saveSpecimen:this.props.saveSpecimen}),cancelEditPreparationButton=React.createElement("a",{className:"pull-right",style:{cursor:"pointer"},onClick:this.props.close},"Cancel")),this.props.data.specimen.preparation&&!this.props.editable.preparation){if(this.props.data.specimen.preparation.data){var preparationData=this.props.data.specimen.preparation.data;specimenProtocolAttributes=Object.keys(preparationData).map(function(key){return React.createElement(StaticElement,{label:_this2.props.options.specimenProtocolAttributes[_this2.props.data.specimen.preparation.protocolId][key].name,text:preparationData[key]})})}preparationForm=React.createElement(FormElement,null,React.createElement(StaticElement,{label:"Protocol",text:this.props.options.specimenProtocols[this.props.data.specimen.preparation.protocolId].protocol}),React.createElement(StaticElement,{label:"Location",text:this.props.options.centers[this.props.data.specimen.preparation.locationId]}),specimenProtocolAttributes,React.createElement(StaticElement,{label:"Date",text:this.props.data.specimen.preparation.date}),React.createElement(StaticElement,{label:"Time",text:this.props.data.specimen.preparation.time}),React.createElement(StaticElement,{label:"Comments",text:this.props.data.specimen.preparation.comments}))}0===Object.keys(specimenProtocols).length||this.props.data.specimen.preparation||this.props.editable.preparation?(this.props.data.specimen.preparation||this.props.editable.preparation)&&(preparationPanel=React.createElement("div",{className:"panel specimen-panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("div",{className:"lifecycle-node preparation"},React.createElement("div",{className:"letter"},"P")),React.createElement("div",{className:"title"},"Preparation"),React.createElement("span",{className:this.props.editable.preparation?null:"glyphicon glyphicon-pencil",onClick:this.props.editable.preparation?null:function(){_this2.props.edit("preparation")}})),React.createElement("div",{className:"panel-body"},preparationForm,cancelEditPreparationButton))):preparationPanel=React.createElement("div",{className:"panel specimen-panel inactive"},React.createElement("div",{className:"add-process",onClick:function(){_this2.props.edit("preparation"),_this2.props.addPreparation()}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("div",null,"ADD PREPARATION"));var analysisPanel=void 0,analysisForm=void 0,cancelEditAnalysisButton=void 0,specimenMethods={},specimenMethodAttributes={},specimenMethodAttributeFields=void 0;for(var _id in this.props.options.specimenMethods)this.props.options.specimenMethods[_id].typeId===this.props.data.specimen.typeId&&(specimenMethods[_id]=this.props.options.specimenMethods[_id].method,specimenMethodAttributes[_id]=this.props.options.specimenMethodAttributes[_id]);if(this.props.editable.analysis&&(analysisForm=React.createElement(_analysisForm2.default,{specimen:this.props.specimen,data:this.props.data,files:this.props.files,specimenMethods:specimenMethods,specimenMethodAttributes:specimenMethodAttributes,attributeDatatypes:this.props.options.attributeDatatypes,attributeOptions:this.props.options.attributeOptions,setSpecimen:this.props.setSpecimen,setFiles:this.props.setFiles,saveSpecimen:this.props.saveSpecimen}),cancelEditAnalysisButton=React.createElement("a",{className:"pull-right",style:{cursor:"pointer"},onClick:this.props.close},"Cancel")),this.props.data.specimen.analysis&&!this.props.editable.analysis){if(this.props.data.specimen.analysis.data){var analysisData=this.props.data.specimen.analysis.data;specimenMethodAttributeFields=Object.keys(analysisData).map(function(key){return"file"===_this2.props.options.attributeDatatypes[_this2.props.options.specimenMethodAttributes[_this2.props.data.specimen.analysis.methodId][key].datatypeId].datatype?React.createElement(LinkElement,{label:_this2.props.options.specimenMethodAttributes[_this2.props.data.specimen.analysis.methodId][key].name,text:analysisData[key],href:loris.BaseURL+"/biobank/ajax/requestData.php?action=downloadFile&file="+analysisData[key],target:"_blank",download:analysisData[key]}):React.createElement(StaticElement,{label:_this2.props.options.specimenMethodAttributes[_this2.props.data.specimen.analysis.methodId][key].name,text:analysisData[key]})})}analysisForm=React.createElement(FormElement,null,React.createElement(StaticElement,{label:"Method",text:this.props.options.specimenMethods[this.props.data.specimen.analysis.methodId].method}),React.createElement(StaticElement,{label:"Location",text:this.props.options.centers[this.props.data.specimen.analysis.locationId]}),specimenMethodAttributeFields,React.createElement(StaticElement,{label:"Date",text:this.props.data.specimen.analysis.date}),React.createElement(StaticElement,{label:"Time",text:this.props.data.specimen.analysis.time}),React.createElement(StaticElement,{label:"Comments",text:this.props.data.specimen.analysis.comments}))}0===Object.keys(specimenMethods).length||this.props.data.specimen.analysis||this.props.editable.analysis?(this.props.data.specimen.analysis||this.props.editable.analysis)&&(analysisPanel=React.createElement("div",{className:"panel specimen-panel panel-default"},React.createElement("div",{className:"panel-heading"},React.createElement("div",{className:"lifecycle-node preparation"},React.createElement("div",{className:"letter"},"A")),React.createElement("div",{className:"title"},"Analysis"),React.createElement("span",{className:this.props.editable.analysis?null:"glyphicon glyphicon-pencil",onClick:this.props.editable.analysis?null:function(){_this2.props.edit("analysis")}})),React.createElement("div",{className:"panel-body"},analysisForm,cancelEditAnalysisButton))):analysisPanel=React.createElement("div",{className:"panel specimen-panel inactive"},React.createElement("div",{className:"add-process",onClick:function(){_this2.props.edit("analysis"),_this2.props.addAnalysis()}},React.createElement("span",{className:"glyphicon glyphicon-plus"})),React.createElement("div",null,"ADD ANALYSIS"));var globals=React.createElement(_globals2.default,{specimen:this.props.specimen,container:this.props.container,data:this.props.data,options:this.props.options,editable:this.props.editable,edit:this.props.edit,close:this.props.close,mapFormOptions:this.props.mapFormOptions,loadSpecimen:this.props.loadSpecimen,setSpecimen:this.props.setSpecimen,saveSpecimen:this.props.saveSpecimen,loadContainer:this.props.loadContainer,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer}),returnToFilter=React.createElement("div",null,React.createElement("br",null),React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.props.loadFilters},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"}))),React.createElement("div",{className:"action-title"},"Return to Filter"));return React.createElement("div",{id:"specimen-page"},React.createElement("div",{className:"specimen-header"},React.createElement("div",{className:"specimen-title"},React.createElement("div",{className:"barcode"},"Barcode",React.createElement("div",{className:"value"},React.createElement("strong",null,this.props.data.container.barcode))),addAliquotForm,React.createElement(_containerCheckout2.default,{
container:this.props.data.container,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer})),React.createElement(_lifeCycle2.default,{specimen:this.props.data.specimen,centers:this.props.options.centers})),React.createElement("div",{className:"summary"},globals,React.createElement("div",{className:"processing"},collectionPanel,preparationPanel,analysisPanel)),returnToFilter)}}]),BiobankSpecimen}(React.Component);BiobankSpecimen.propTypes={specimenPageDataURL:React.PropTypes.string.isRequired},exports.default=BiobankSpecimen},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(11),_Modal2=_interopRequireDefault(_Modal),_quantityField=__webpack_require__(19),_quantityField2=_interopRequireDefault(_quantityField),_temperatureField=__webpack_require__(20),_temperatureField2=_interopRequireDefault(_temperatureField),_statusField=__webpack_require__(21),_statusField2=_interopRequireDefault(_statusField),_locationField=__webpack_require__(22),_locationField2=_interopRequireDefault(_locationField),_containerParentForm=__webpack_require__(9),_containerParentForm2=_interopRequireDefault(_containerParentForm),Globals=function(_React$Component){function Globals(){_classCallCheck(this,Globals);var _this=_possibleConstructorReturn(this,(Globals.__proto__||Object.getPrototypeOf(Globals)).call(this));return _this.increaseCycle=_this.increaseCycle.bind(_this),_this.decreaseCycle=_this.decreaseCycle.bind(_this),_this}return _inherits(Globals,_React$Component),_createClass(Globals,[{key:"increaseCycle",value:function(){var cycle=this.props.specimen.fTCycle;cycle++,this.props.setSpecimen("fTCycle",cycle),this.props.saveSpecimen()}},{key:"decreaseCycle",value:function(){var cycle=this.props.specimen.fTCycle;cycle--,this.props.setSpecimen("fTCycle",cycle),this.props.saveSpecimen()}},{key:"render",value:function(){var _this2=this,specimenTypeField=void 0;this.props.data.specimen&&(specimenTypeField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Specimen Type",React.createElement("div",{className:"value"},this.props.options.specimenTypes[this.props.data.specimen.typeId].type))));var containerTypeField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Container Type",React.createElement("div",{className:"value"},this.props.options.containerTypes[this.props.data.container.typeId].label))),quantityField=void 0;if(this.props.data.specimen)if(this.props.editable.quantity){var units=this.props.mapFormOptions(this.props.options.specimenTypeUnits[this.props.data.specimen.typeId],"unit");quantityField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Quantity",React.createElement(_quantityField2.default,{specimen:this.props.specimen,units:units,close:this.props.close,setSpecimen:this.props.setSpecimen,saveSpecimen:this.props.saveSpecimen})))}else quantityField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Quantity",React.createElement("div",{className:"value"},this.props.data.specimen.quantity," "+this.props.options.specimenUnits[this.props.data.specimen.unitId].unit)),React.createElement("div",{className:"action",title:"Update Quantity"},React.createElement("div",{className:"action-button update",onClick:function(){return _this2.props.edit("quantity")}},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))));var fTCycleField=void 0;if(void 0!==(this.props.data.specimen||{}).fTCycle){var decreaseCycle=void 0;this.props.data.specimen.fTCycle>0&&(decreaseCycle=React.createElement("div",{className:"action",title:"Remove Cycle"},React.createElement("span",{className:"action-button update",onClick:this.decreaseCycle},React.createElement("span",{className:"glyphicon glyphicon-minus"})))),fTCycleField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Freeze-Thaw Cycle",React.createElement("div",{className:"value"},this.props.data.specimen.fTCycle)),decreaseCycle,React.createElement("div",{className:"action",title:"Add Cycle"},React.createElement("span",{className:"action-button update",onClick:this.increaseCycle},React.createElement("span",{className:"glyphicon glyphicon-plus"}))))}var temperatureField=void 0;temperatureField=this.props.editable.temperature?React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Temperature",React.createElement(_temperatureField2.default,{container:this.props.container,close:this.props.close,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer}))):React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Temperature",React.createElement("div",{className:"value"},this.props.data.container.temperature+"C")),React.createElement("div",{className:"action",title:"Update Temperature"},React.createElement("span",{className:"action-button update",onClick:function(){_this2.props.edit("temperature")}},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))));var statusField=void 0;if(this.props.editable.status){var stati=this.props.mapFormOptions(this.props.options.containerStati,"status");statusField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Status",React.createElement(_statusField2.default,{container:this.props.container,stati:stati,close:this.props.close,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer})))}else statusField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Status",React.createElement("div",{className:"value"},this.props.options.containerStati[this.props.data.container.statusId].status)),React.createElement("div",{className:"action",title:"Update Status"},React.createElement("span",{className:"action-button update",onClick:function(){return _this2.props.edit("status")}},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))));var locationField=void 0;locationField=this.props.editable.location?React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Location",React.createElement(_locationField2.default,{container:this.props.container,centers:this.props.options.centers,close:this.props.close,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer}))):React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Location",React.createElement("div",{className:"value"},this.props.options.centers[this.props.data.container.locationId])),React.createElement("div",{className:"action",title:"Update Status"},React.createElement("span",{className:"action-button update",onClick:function(){return _this2.props.edit("location")}},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))));var originField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Origin",React.createElement("div",{className:"value"},this.props.options.centers[this.props.data.container.originId]))),parentSpecimenField=(React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Creation Date",React.createElement("div",{className:"value"},this.props.data.container.dateTimeCreate))),void 0);if((this.props.data.specimen||{}).parentSpecimenId){var barcode=this.props.data.parentSpecimenContainer.barcode,parentSpecimenFieldValue=React.createElement("a",{style:{cursor:"pointer"},onClick:function(){return _this2.props.loadSpecimen(barcode)}},barcode);parentSpecimenField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Parent Specimen",React.createElement("div",{className:"value"},parentSpecimenFieldValue||"None")))}var parentContainerBarcodeValue=void 0;if(this.props.data.container.parentContainerId){var _barcode=this.props.options.containersNonPrimary[this.props.data.container.parentContainerId].barcode;parentContainerBarcodeValue=React.createElement("div",null,React.createElement("a",{style:{cursor:"pointer"},onClick:function(){return _this2.props.loadContainer(_barcode)}},_barcode))}var parentContainerField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"Parent Container",React.createElement("div",{className:"value"},parentContainerBarcodeValue||"None"),parentContainerBarcodeValue&&this.props.data.container.coordinate?"Coordinate "+this.props.data.container.coordinate:null),React.createElement("div",{className:"action",title:"Move Container"},React.createElement("span",{className:"action-button update",onClick:function(){_this2.props.edit("containerParentForm")}},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"})),React.createElement(_Modal2.default,{title:"Update Parent Container",closeModal:this.props.close,show:this.props.editable.containerParentForm},React.createElement(_containerParentForm2.default,{data:this.props.data,container:this.props.container,containersNonPrimary:this.props.options.containersNonPrimary,containerDimensions:this.props.options.containerDimensions,containerCoordinates:this.props.options.containerCoordinates,containerTypes:this.props.options.containerTypes,containerStati:this.props.options.containerStati,mapFormOptions:this.props.mapFormOptions,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer})))),candidateSessionField=void 0;this.props.data.specimen&&(candidateSessionField=React.createElement("div",{className:"item"},React.createElement("div",{className:"field"},"PSCID",React.createElement("div",{className:"value"},React.createElement("a",{href:loris.BaseURL+"/"+this.props.data.specimen.candidateId},this.props.data.candidate.PSCID))),React.createElement("div",{className:"field"},"Visit Label",React.createElement("div",{className:"value"},React.createElement("a",{href:loris.BaseURL+"/instrument_list/?candID="+this.props.data.specimen.candidateId+"&sessionID="+this.props.data.specimen.sessionId},this.props.data.session.Visit_label)))));var fieldList=React.createElement("div",{className:"list"},specimenTypeField,containerTypeField,quantityField,fTCycleField,temperatureField,statusField,locationField,originField,parentSpecimenField,parentContainerField,candidateSessionField);return React.createElement("div",{className:"globals"},fieldList)}}]),Globals}(React.Component);Globals.propTypes={},exports.default=Globals},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),QuantityField=function(_React$Component){function QuantityField(){return _classCallCheck(this,QuantityField),_possibleConstructorReturn(this,(QuantityField.__proto__||Object.getPrototypeOf(QuantityField)).apply(this,arguments))}return _inherits(QuantityField,_React$Component),_createClass(QuantityField,[{key:"render",value:function(){return React.createElement("div",{className:"inline-field"},React.createElement("div",{style:{flexGrow:2}},React.createElement(TextboxElement,{name:"quantity",inputClass:"col-xs-11",onUserInput:this.props.setSpecimen,value:this.props.specimen.quantity})),React.createElement("div",{style:{flexGrow:2}},React.createElement(SelectElement,{name:"unit",inputClass:"col-xs-11",options:this.props.units,onUserInput:this.props.setSpecimen,value:this.props.specimen.unitId})),React.createElement("div",{style:{flexGrow:1}},React.createElement(ButtonElement,{label:"Update",onUserInput:this.props.saveSpecimen,columnSize:"col-xs-12"})),React.createElement("div",{style:{flexGrow:1}},React.createElement("a",{onClick:this.props.close,style:{cursor:"pointer"}},"Cancel")))}}]),QuantityField}(React.Component);QuantityField.propTypes={setSpecimen:React.PropTypes.func,close:React.PropTypes.func,specimen:React.PropTypes.object,saveSpecimen:React.PropTypes.func,className:React.PropTypes.string},exports.default=QuantityField},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),TemperatureField=function(_React$Component){function TemperatureField(){return _classCallCheck(this,TemperatureField),_possibleConstructorReturn(this,(TemperatureField.__proto__||Object.getPrototypeOf(TemperatureField)).apply(this,arguments))}return _inherits(TemperatureField,_React$Component),_createClass(TemperatureField,[{key:"render",value:function(){return React.createElement("div",{className:"inline-field"},React.createElement("div",{style:{flexGrow:4}},React.createElement(TextboxElement,{name:"temperature",inputClass:"col-lg-11",onUserInput:this.props.setContainer,value:this.props.container.temperature})),React.createElement("div",{style:{flexGrow:1}},React.createElement(ButtonElement,{label:"Update",onUserInput:this.props.saveContainer,columnSize:"col-lg-12"})),React.createElement("div",{style:{flexGrow:1}},React.createElement("a",{onClick:this.props.close,style:{cursor:"pointer"}},"Cancel")))}}]),TemperatureField}(React.Component);TemperatureField.propTypes={setContainer:React.PropTypes.func.isRequired,close:React.PropTypes.func,container:React.PropTypes.object.isRequired,saveContainer:React.PropTypes.func.isRequired,className:React.PropTypes.string},exports.default=TemperatureField},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),StatusField=function(_React$Component){function StatusField(){return _classCallCheck(this,StatusField),_possibleConstructorReturn(this,(StatusField.__proto__||Object.getPrototypeOf(StatusField)).apply(this,arguments))}return _inherits(StatusField,_React$Component),_createClass(StatusField,[{key:"render",value:function(){return React.createElement("div",{className:"inline-field"},React.createElement("div",{style:{flexGrow:4}},React.createElement(SelectElement,{name:"statusId",options:this.props.stati,inputClass:"col-lg-11",onUserInput:this.props.setContainer,value:this.props.container.statusId})),React.createElement("div",{style:{flexGrow:1}},React.createElement(ButtonElement,{label:"Update",onUserInput:this.props.saveContainer,columnSize:"col-lg-12"})),React.createElement("div",{style:{flexGrow:1}},React.createElement("a",{onClick:this.props.close,style:{cursor:"pointer"}},"Cancel")))}}]),StatusField}(React.Component);StatusField.propTypes={setContainer:React.PropTypes.func.isRequired,close:React.PropTypes.func,stati:React.PropTypes.object.isRequired,container:React.PropTypes.object.isRequired,saveContainer:React.PropTypes.func.isRequired,className:React.PropTypes.string},exports.default=StatusField},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),LocationField=function(_React$Component){function LocationField(){return _classCallCheck(this,LocationField),_possibleConstructorReturn(this,(LocationField.__proto__||Object.getPrototypeOf(LocationField)).apply(this,arguments))}return _inherits(LocationField,_React$Component),_createClass(LocationField,[{key:"render",value:function(){return React.createElement("div",{className:this.props.className},React.createElement("div",{className:"col-xs-6"},React.createElement(SelectElement,{name:"locationId",options:this.props.centers,labelClass:"col-xl-0",inputClass:"col-lg-12",onUserInput:this.props.setContainer,value:this.props.container.locationId})),React.createElement("div",{className:"col-xs-3"},React.createElement(ButtonElement,{label:"Update",onUserInput:this.props.saveContainer,columnSize:"col-lg-12"})),React.createElement("div",{className:"col-xs-3"},React.createElement("a",{onClick:this.props.close},"Cancel")))}}]),LocationField}(React.Component);LocationField.propTypes={setContainer:React.PropTypes.func.isRequired,close:React.PropTypes.func.isRequired,centerIds:React.PropTypes.object.isRequired,container:React.PropTypes.object.isRequired,saveContainer:React.PropTypes.func.isRequired,className:React.PropTypes.string},exports.default=LocationField},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_customFields=__webpack_require__(8),_customFields2=_interopRequireDefault(_customFields),SpecimenAnalysisForm=function(_React$Component){function SpecimenAnalysisForm(){_classCallCheck(this,SpecimenAnalysisForm);var _this=_possibleConstructorReturn(this,(SpecimenAnalysisForm.__proto__||Object.getPrototypeOf(SpecimenAnalysisForm)).call(this));return _this.setAnalysis=_this.setAnalysis.bind(_this),_this.addData=_this.addData.bind(_this),_this.setData=_this.setData.bind(_this),_this}return _inherits(SpecimenAnalysisForm,_React$Component),_createClass(SpecimenAnalysisForm,[{key:"setAnalysis",value:function(name,value){var analysis=this.props.specimen.analysis;analysis[name]=value,this.props.setSpecimen("analysis",analysis)}},{key:"addData",value:function(){var analysis=this.props.specimen.analysis;analysis.data={},this.props.setSpecimen("analysis",analysis)}},{key:"setData",value:function(name,value){var data=this.props.specimen.analysis.data;value instanceof File?(data[name]=value.name,this.props.setFiles(name,value)):(data[name]=value,this.setAnalysis("data",data))}},{key:"render",value:function(){var submitButton=void 0;submitButton=this.props.data.specimen.analysis?React.createElement(ButtonElement,{label:"Update"}):React.createElement(ButtonElement,{label:"Submit"});var specimenMethodFields=void 0;if(this.props.specimen.analysis.methodId){var specimenMethodFieldsObject=this.props.specimenMethodAttributes[this.props.specimen.analysis.methodId];specimenMethodFieldsObject&&(this.props.specimen.analysis.data?specimenMethodFields=React.createElement(_customFields2.default,{fields:specimenMethodFieldsObject,files:this.props.files,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,object:this.props.specimen.analysis.data,data:(((this.props.data||{}).specimen||{}).analysis||{}).data,setData:this.setData}):this.addData())}return React.createElement(FormElement,{name:"specimenAnalysis",onSubmit:this.props.saveSpecimen,fileUpload:!0,ref:"form"},React.createElement(SelectElement,{name:"methodId",label:"Method",options:this.props.specimenMethods,onUserInput:this.setAnalysis,required:!0,value:this.props.specimen.analysis.methodId}),specimenMethodFields,React.createElement(DateElement,{name:"date",label:"Date",onUserInput:this.setAnalysis,required:!0,value:this.props.specimen.analysis.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setAnalysis,required:!0,value:this.props.specimen.analysis.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setAnalysis,value:this.props.specimen.analysis.comments}),submitButton)}}]),SpecimenAnalysisForm}(React.Component);SpecimenAnalysisForm.propTypes={},exports.default=SpecimenAnalysisForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),LifeCycle=function(_React$Component){function LifeCycle(){return _classCallCheck(this,LifeCycle),_possibleConstructorReturn(this,(LifeCycle.__proto__||Object.getPrototypeOf(LifeCycle)).apply(this,arguments))}return _inherits(LifeCycle,_React$Component),_createClass(LifeCycle,[{key:"mouseOver",value:function(e){$(".collection").css({border:"2px solid #093782","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"})}},{key:"mouseLeave",value:function(e){$(".collection").css({border:"2px solid #A6D3F5","box-shadow":"none"})}},{key:"mouseOverPreparation",value:function(e){$(".preparation").css({border:"2px solid #093782","box-shadow":"0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19)"})}},{key:"mouseLeavePreparation",value:function(e){$(".preparation").css({border:"2px solid #A6D3F5","box-shadow":"none"})}},{key:"render",value:function(){var _this2=this,collectionNode=void 0;((this.props.specimen||{}).collection||this.props.container)&&(collectionNode=React.createElement("div",{onMouseEnter:function(e){return _this2.mouseOver(e)},onMouseLeave:function(e){return _this2.mouseLeave(e)},className:"lifecycle-node collection"},React.createElement("div",{className:"letter"},"C")));var preparationNode=void 0;(this.props.specimen||{}).preparation&&(preparationNode=React.createElement("div",{onMouseEnter:this.mouseOverPreparation,onMouseLeave:this.mouseLeavePreparation,className:"lifecycle-node preparation"},React.createElement("div",{className:"letter"},"P")));var analysisNode=void 0;(this.props.specimen||{}).analysis&&(analysisNode=React.createElement("div",{className:"lifecycle-node-container"},React.createElement("div",{className:"lifecycle-node"},React.createElement("div",{className:"letter"},"A"))));var line=void 0,nodes=0;for(var i in this.props.specimen)"collection"!==i&&"preparation"!==i&&"analysis"!==i||nodes++;var lineWidth=nodes>1?60/(nodes-1):0,lineStyle={width:lineWidth+"%"};return line=React.createElement("div",{className:"lifecycle-line",style:lineStyle}),React.createElement("div",{className:"lifecycle"},React.createElement("div",{className:"lifecycle-graphic"},collectionNode,preparationNode?line:null,preparationNode,analysisNode?line:null,analysisNode))}}]),LifeCycle}(React.Component);LifeCycle.propTypes={},exports.default=LifeCycle},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerCheckout=function(_React$Component){function ContainerCheckout(){_classCallCheck(this,ContainerCheckout);
var _this=_possibleConstructorReturn(this,(ContainerCheckout.__proto__||Object.getPrototypeOf(ContainerCheckout)).call(this));return _this.checkoutContainer=_this.checkoutContainer.bind(_this),_this}return _inherits(ContainerCheckout,_React$Component),_createClass(ContainerCheckout,[{key:"checkoutContainer",value:function(){this.props.setContainer("parentContainerId",null),this.props.setContainer("coordinate",null),this.props.saveContainer()}},{key:"render",value:function(){var checkoutButton=void 0;return this.props.container.parentContainerId&&(checkoutButton=React.createElement("div",{className:"action-button update",title:"Checkout Container",onClick:this.checkoutContainer},React.createElement("span",{className:"glyphicon glyphicon-share"}))),React.createElement("div",null,checkoutButton)}}]),ContainerCheckout}(React.Component);ContainerCheckout.propTypes={container:React.PropTypes.object.isRequired,setContainer:React.PropTypes.func.isRequired,saveContainer:React.PropTypes.func.isRequired},exports.default=ContainerCheckout},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Loader=__webpack_require__(1),_globals=(_interopRequireDefault(_Loader),__webpack_require__(18)),_globals2=_interopRequireDefault(_globals),_lifeCycle=__webpack_require__(24),_lifeCycle2=_interopRequireDefault(_lifeCycle),_barcodePath=__webpack_require__(27),_barcodePath2=_interopRequireDefault(_barcodePath),_containerDisplay=__webpack_require__(10),_containerDisplay2=_interopRequireDefault(_containerDisplay),_containerCheckout=__webpack_require__(25),_containerCheckout2=_interopRequireDefault(_containerCheckout),BiobankContainer=function(_React$Component){function BiobankContainer(){_classCallCheck(this,BiobankContainer);var _this=_possibleConstructorReturn(this,(BiobankContainer.__proto__||Object.getPrototypeOf(BiobankContainer)).call(this));return _this.drag=_this.drag.bind(_this),_this}return _inherits(BiobankContainer,_React$Component),_createClass(BiobankContainer,[{key:"drag",value:function(e){var container=JSON.stringify(this.props.data.childContainers[e.target.id]);e.dataTransfer.setData("text/plain",container)}},{key:"render",value:function(){var _this2=this,globals=React.createElement(_globals2.default,{container:this.props.container,data:this.props.data,options:this.props.options,editable:this.props.editable,edit:this.props.edit,close:this.props.close,mapFormOptions:this.props.mapFormOptions,loadSpecimen:this.props.loadSpecimen,loadContainer:this.props.loadContainer,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer}),barcodePath=React.createElement(_barcodePath2.default,{container:this.props.data.container,parentContainers:this.props.data.parentContainers,loadContainer:this.props.loadContainer}),display=void 0;if(this.props.data.container.dimensionId){var barcodes=this.props.mapFormOptions(this.props.options.containers,"barcode");if(this.props.data.parentContainers)for(var key in this.props.data.parentContainers)delete barcodes[this.props.data.parentContainers[key].id];delete barcodes[this.props.data.container.id],display=React.createElement(_containerDisplay2.default,{barcodes:barcodes,container:this.props.container,coordinate:this.props.coordinate,sequential:this.props.sequential,containers:this.props.options.containers,children:this.props.data.childContainers,types:this.props.options.containerTypes,dimensions:this.props.options.containerDimensions[this.props.data.container.dimensionId],coordinates:this.props.options.containerCoordinates[this.props.data.container.id]?this.props.options.containerCoordinates[this.props.data.container.id]:null,containerTypes:this.props.options.containerTypes,containerStati:this.props.options.containerStati,editable:this.props.editable,edit:this.props.edit,close:this.props.close,setCoordinate:this.props.setCoordinate,setSequential:this.props.setSequential,loadSpecimen:this.props.loadSpecimen,loadContainer:this.props.loadContainer,saveChildContainer:this.props.saveChildContainer})}var listAssigned=[],coordinateList=[],listUnassigned=[];this.props.data.childContainers&&!function(){var children=_this2.props.data.childContainers,_loop=function(child){var load=void 0;load=_this2.props.options.containerTypes[children[child].typeId].primary?_this2.props.loadSpecimen:_this2.props.loadContainer,children[child].coordinate?(listAssigned.push(React.createElement("div",null,React.createElement("a",{onClick:function(){return load(children[child].barcode)},style:{cursor:"pointer"}},children[child].barcode))),coordinateList.push(React.createElement("div",null,"at ",children[child].coordinate))):listUnassigned.push(React.createElement("a",{onClick:function(){return load(children[child].barcode)},style:{cursor:"pointer"},id:children[child].id,draggable:!0,onDragStart:_this2.drag},children[child].barcode))};for(var child in children)_loop(child)}();var returnToFilter=React.createElement("div",null,React.createElement("br",null),React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.props.loadFilters},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"}))),React.createElement("div",{className:"action-title"},"Return to Filter"));return React.createElement("div",{id:"container-page"},React.createElement("div",{className:"container-header"},React.createElement("div",{className:"container-title"},React.createElement("div",{className:"barcode"},"Barcode",React.createElement("div",{className:"value"},React.createElement("strong",null,this.props.data.container.barcode)))),React.createElement(_containerCheckout2.default,{container:this.props.data.container,setContainer:this.props.setContainer,saveContainer:this.props.saveContainer}),React.createElement(_lifeCycle2.default,{container:this.props.data.container,centers:this.props.options.centers})),React.createElement("div",{className:"summary"},globals,React.createElement("div",{className:"display-container"},display,barcodePath),React.createElement("div",{className:"container-list"},React.createElement("div",{className:"title"},0===listAssigned.length&&0===listUnassigned.length?"This Container is Empty!":null),React.createElement("div",{className:"title"},0!==listAssigned.length?"Assigned Containers":null),React.createElement("div",{className:"container-coordinate"},React.createElement("div",null,listAssigned),React.createElement("div",null,coordinateList)),0!==listAssigned.length?React.createElement("br",null):null,React.createElement("div",{className:"title"},0!==listUnassigned.length?"Unassigned Containers":null),listUnassigned)),returnToFilter)}}]),BiobankContainer}(React.Component);BiobankContainer.propTypes={containerPageDataURL:React.PropTypes.string.isRequired},exports.default=BiobankContainer},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),BarcodePath=function(_React$Component){function BarcodePath(){return _classCallCheck(this,BarcodePath),_possibleConstructorReturn(this,(BarcodePath.__proto__||Object.getPrototypeOf(BarcodePath)).apply(this,arguments))}return _inherits(BarcodePath,_React$Component),_createClass(BarcodePath,[{key:"render",value:function(){for(var _this2=this,path=[],pathLength=this.props.parentContainers.length-1,_loop=(loris.BaseURL+"/biobank/container/?barcode=",function(i){path.push(React.createElement("span",{className:"barcodePath"},"/",React.createElement("a",{onClick:function(){return _this2.props.loadContainer(_this2.props.parentContainers[i].barcode)},style:{cursor:"pointer"}},_this2.props.parentContainers[i].barcode)))}),i=pathLength;i>=0;i--)_loop(i);return path.push(React.createElement("span",{className:"barcodePath"},"/",React.createElement("a",{onClick:function(){return _this2.props.loadContainer(_this2.props.container.barcode)},style:{cursor:"pointer"}},this.props.container.barcode))),React.createElement("div",null,path)}}]),BarcodePath}(React.Component);BarcodePath.propTypes={},exports.default=BarcodePath}]);
//# sourceMappingURL=biobankIndex.js.map