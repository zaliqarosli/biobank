!function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_FilterForm=__webpack_require__(1),_FilterForm2=_interopRequireDefault(_FilterForm),_specimenForm=__webpack_require__(3),_specimenForm2=_interopRequireDefault(_specimenForm),_poolSpecimenForm=__webpack_require__(6),_poolSpecimenForm2=_interopRequireDefault(_poolSpecimenForm),_containerForm=__webpack_require__(8),_containerForm2=_interopRequireDefault(_containerForm),_Tabs=__webpack_require__(10),_FormModal=__webpack_require__(11),_FormModal2=_interopRequireDefault(_FormModal),_Loader=__webpack_require__(13),_Loader2=_interopRequireDefault(_Loader),_columnFormatterSpecimen=__webpack_require__(14),_columnFormatterSpecimen2=_interopRequireDefault(_columnFormatterSpecimen),_columnFormatterContainer=__webpack_require__(15),_columnFormatterContainer2=_interopRequireDefault(_columnFormatterContainer),BiobankIndex=function(_React$Component){function BiobankIndex(props){_classCallCheck(this,BiobankIndex);var _this=_possibleConstructorReturn(this,(BiobankIndex.__proto__||Object.getPrototypeOf(BiobankIndex)).call(this,props));return _this.state={isLoaded:!1,specimenFilter:{},containerFilter:{},isOpen:!1,formOptions:{}},_this.loadPage=_this.loadPage.bind(_this),_this.fetchSpecimenData=_this.fetchSpecimenData.bind(_this),_this.fetchFormOptions=_this.fetchFormOptions.bind(_this),_this.fetchContainerData=_this.fetchContainerData.bind(_this),_this.updateSpecimenFilter=_this.updateSpecimenFilter.bind(_this),_this.updateContainerFilter=_this.updateContainerFilter.bind(_this),_this.resetFilters=_this.resetFilters.bind(_this),_this.mapFormOptions=_this.mapFormOptions.bind(_this),_this}return _inherits(BiobankIndex,_React$Component),_createClass(BiobankIndex,[{key:"componentDidMount",value:function(){this.loadPage()}},{key:"loadPage",value:function(){this.fetchSpecimenData(),this.fetchFormOptions(),this.fetchContainerData()}},{key:"fetchSpecimenData",value:function(){$.ajax(this.props.specimenDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({specimenData:data,isLoaded:!0})}.bind(this),error:function(_error){console.error(_error)}})}},{key:"fetchContainerData",value:function(){$.ajax(this.props.containerDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({containerData:data,isLoaded:!0})}.bind(this),error:function(_error2){console.error(_error2)}})}},{key:"fetchFormOptions",value:function(){$.ajax(this.props.formDataURL,{method:"GET",dataType:"json",success:function(data){this.setState({formOptions:data,isLoaded:!0})}.bind(this),error:function(_error3){console.error(_error3)}})}},{key:"updateSpecimenFilter",value:function(specimenFilter){this.setState({specimenFilter:specimenFilter})}},{key:"updateContainerFilter",value:function(containerFilter){this.setState({containerFilter:containerFilter})}},{key:"resetFilters",value:function(){this.refs.biobankFilter.clearFilter()}},{key:"mapFormOptions",value:function(rawObject,targetAttribute){var data={};for(var id in rawObject)data[id]=rawObject[id][targetAttribute];return data}},{key:"render",value:function(){if(!this.state.isLoaded)return React.createElement(_Loader2.default,null);var addSpecimenButton=void 0,poolSpecimenButton=void 0,addContainerButton=void 0;if(loris.userHasPermission("biobank_write")){var specimenTypes=this.mapFormOptions(this.state.formOptions.specimenTypes,"type"),containerTypesPrimary=this.mapFormOptions(this.state.formOptions.containerTypesPrimary,"label");addSpecimenButton=React.createElement(_FormModal2.default,{title:"Add New Specimen",buttonClass:"action-button add",buttonContent:"+",style:{display:"inline-block"}},React.createElement(_specimenForm2.default,{specimenTypes:specimenTypes,containerTypesPrimary:containerTypesPrimary,containersNonPrimary:this.state.formOptions.containersNonPrimary,specimenTypeAttributes:this.state.formOptions.specimenTypeAttributes,attributeDatatypes:this.state.formOptions.attributeDatatypes,attributeOptions:this.state.formOptions.attributeOptions,capacities:this.state.formOptions.capacities,containerDimensions:this.state.formOptions.containerDimensions,containerCoordinates:this.state.formOptions.containerCoordinates,specimenTypeUnits:this.state.formOptions.specimenTypeUnits,pSCIDs:this.state.formOptions.pSCIDs,visits:this.state.formOptions.visits,sessionData:this.state.formOptions.sessionData,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=submitSpecimenForm",refreshParent:this.loadPage}));var poolSpecimenButtonContent=React.createElement("span",{className:"glyphicon glyphicon-resize-small"});poolSpecimenButton=React.createElement(_FormModal2.default,{title:"Pool Specimens",buttonClass:"action-button pool",buttonContent:poolSpecimenButtonContent,style:{display:"inline-block"}},React.createElement(_poolSpecimenForm2.default,{specimenTypes:specimenTypes,containerTypesPrimary:containerTypesPrimary,containersNonPrimary:this.state.formOptions.containersNonPrimary,specimenTypeAttributes:this.state.formOptions.specimenTypeAttributes,specimenProtocols:this.state.formOptions.specimenProtocols,specimenProtocolAttributes:this.state.formOptions.specimenProtocolAttributes,attributeDatatypes:this.state.formOptions.attributeDatatypes,attributeOptions:this.state.formOptions.attributeOptions,capacities:this.state.formOptions.capacities,containerDimensions:this.state.formOptions.containerDimensions,containerCoordinates:this.state.formOptions.containerCoordinates,specimenTypeUnits:this.state.formOptions.specimenTypeUnits,specimenUnits:this.state.formOptions.specimenUnits,pSCIDs:this.state.formOptions.pSCIDs,sessionData:this.state.formOptions.sessionData,specimenRequest:loris.BaseURL+"/biobank/ajax/requestData.php?action=getSpecimenDataFromBarcode",refreshParent:this.loadPage,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=submitPoolForm"}));var containerTypesNonPrimary=this.mapFormOptions(this.state.formOptions.containerTypesNonPrimary,"label"),containerStati=this.mapFormOptions(this.state.formOptions.containerStati,"status");addContainerButton=React.createElement(_FormModal2.default,{title:"Add New Container",buttonClass:"action-button add",buttonContent:"+",style:{display:"inline-block"}},React.createElement(_containerForm2.default,{containerTypesNonPrimary:containerTypesNonPrimary,sites:this.state.formOptions.sites,containerStati:containerStati,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=saveContainer",refreshParent:this.loadPage}))}var tabList=[{id:"specimens",label:"Specimens"},{id:"containers",label:"Containers"}];return React.createElement("div",{id:"biobank-page"},React.createElement(_Tabs.Tabs,{tabs:tabList,defaultTab:"specimens",updateURL:!0},React.createElement(_Tabs.TabPane,{TabId:tabList[0].id},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-10"},React.createElement(_FilterForm2.default,{Module:"biobank",name:"specimen_filter",id:"specimen_filter",ref:"specimenFilter",columns:3,formElements:this.state.specimenData.form,onUpdate:this.updateSpecimenFilter,filter:this.state.specimenFilter},React.createElement("br",null),React.createElement(StaticElement,null),React.createElement(StaticElement,null),React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters}))),React.createElement("div",{className:"col-lg-2"},React.createElement("span",{className:"action"},addSpecimenButton,React.createElement("div",{className:"action-title"},"Add Specimen")),React.createElement("br",null),React.createElement("br",null),React.createElement("span",{className:"action"},poolSpecimenButton,React.createElement("div",{className:"action-title"},"Pool Specimens")))),React.createElement(StaticDataTable,{Data:this.state.specimenData.Data,Headers:this.state.specimenData.Headers,Filter:this.state.specimenFilter,getFormattedCell:_columnFormatterSpecimen2.default})),React.createElement(_Tabs.TabPane,{TabId:tabList[1].id},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-lg-10"},React.createElement(_FilterForm2.default,{Module:"biobank",name:"container_filter",id:"container_filter",ref:"containerFilter",columns:3,formElements:this.state.containerData.form,onUpdate:this.updateContainerFilter,filter:this.state.containerFilter},React.createElement("br",null),React.createElement(StaticElement,null),React.createElement(StaticElement,null),React.createElement(ButtonElement,{label:"Clear Filters",type:"reset",onUserInput:this.resetFilters}))),React.createElement("div",{className:"col-lg-2"},React.createElement("span",{className:"action"},addContainerButton,React.createElement("div",{className:"action-title"},"New Container")))),React.createElement(StaticDataTable,{Data:this.state.containerData.Data,Headers:this.state.containerData.Headers,Filter:this.state.containerFilter,getFormattedCell:_columnFormatterContainer2.default}))))}}]),BiobankIndex}(React.Component);$(function(){var biobankIndex=React.createElement("div",{className:"page-biobank"},React.createElement(BiobankIndex,{specimenDataURL:loris.BaseURL+"/biobank/?format=json",containerDataURL:loris.BaseURL+"/biobank/ajax/requestData.php?action=getContainerFilterData",formDataURL:loris.BaseURL+"/biobank/ajax/requestData.php?action=getFormOptions"}));ReactDOM.render(biobankIndex,document.getElementById("lorisworkspace"))})},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Panel=__webpack_require__(2),_Panel2=_interopRequireDefault(_Panel),FilterForm=function(_React$Component){function FilterForm(props){_classCallCheck(this,FilterForm);var _this=_possibleConstructorReturn(this,(FilterForm.__proto__||Object.getPrototypeOf(FilterForm)).call(this,props));return _this.clearFilter=_this.clearFilter.bind(_this),_this.getFormChildren=_this.getFormChildren.bind(_this),_this.setFilter=_this.setFilter.bind(_this),_this.onElementUpdate=_this.onElementUpdate.bind(_this),_this.queryString=QueryString.get(),_this}return _inherits(FilterForm,_React$Component),_createClass(FilterForm,[{key:"componentDidMount",value:function(){var filter={},queryString=this.queryString;Object.keys(queryString).forEach(function(key){var filterKey="candidateID"===key?"candID":key;filter[filterKey]={value:queryString[key],exactMatch:!1}}),this.props.onUpdate(filter)}},{key:"clearFilter",value:function(){this.queryString=QueryString.clear(this.props.Module),this.props.onUpdate({})}},{key:"getFormChildren",value:function(){var formChildren=[];return React.Children.forEach(this.props.children,function(child,key){if(React.isValidElement(child)&&"function"==typeof child.type&&child.props.onUserInput){var callbackFunc=child.props.onUserInput,callbackName=callbackFunc.name,elementName=child.type.displayName,queryFieldName="candID"===child.props.name?"candidateID":child.props.name,filterValue=this.queryString[queryFieldName];"onUserInput"===callbackName&&(callbackFunc="ButtonElement"===elementName&&"reset"===child.props.type?this.clearFilter:this.onElementUpdate.bind(null,elementName)),formChildren.push(React.cloneElement(child,{onUserInput:callbackFunc,value:filterValue?filterValue:"",key:key})),this.setFilter(elementName,child.props.name,filterValue)}else formChildren.push(React.cloneElement(child,{key:key}))}.bind(this)),formChildren}},{key:"setFilter",value:function(type,key,value){var filter={};return this.props.filter&&(filter=JSON.parse(JSON.stringify(this.props.filter))),key?(filter[key]={},0===value.length?filter[key].value="":key&&value&&(filter[key].value=value),filter[key].exactMatch="SelectElement"===type):filter&&key&&""===value&&delete filter[key],filter}},{key:"onElementUpdate",value:function(type,fieldName,fieldValue){if("string"==typeof fieldName&&("string"==typeof fieldValue||"object"===("undefined"==typeof fieldValue?"undefined":_typeof(fieldValue)))){var queryFieldName="candID"===fieldName?"candidateID":fieldName;this.queryString=QueryString.set(this.queryString,queryFieldName,fieldValue);var filter=this.setFilter(type,fieldName,fieldValue);this.props.onUpdate(filter)}}},{key:"render",value:function(){var formChildren=this.getFormChildren(),formElements=this.props.formElements;return formElements&&Object.keys(formElements).forEach(function(fieldName){var queryFieldName="candID"===fieldName?"candidateID":fieldName;formElements[fieldName].onUserInput=this.onElementUpdate.bind(null,fieldName),formElements[fieldName].value=this.queryString[queryFieldName]}.bind(this)),React.createElement(_Panel2.default,{id:this.props.id,height:this.props.height,title:this.props.title},React.createElement(FormElement,this.props,formChildren))}}]),FilterForm}(React.Component);FilterForm.defaultProps={id:"selection-filter",height:"100%",title:"Selection Filter",onUpdate:function(){console.warn("onUpdate() callback is not set!")}},FilterForm.propTypes={Module:React.PropTypes.string.isRequired,filter:React.PropTypes.object.isRequired,id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,onUpdate:React.PropTypes.func},exports.default=FilterForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Panel=function(_React$Component){function Panel(props){_classCallCheck(this,Panel);var _this=_possibleConstructorReturn(this,(Panel.__proto__||Object.getPrototypeOf(Panel)).call(this,props));return _this.state={collapsed:_this.props.initCollapsed},_this.panelClass=_this.props.initCollapsed?"panel-collapse collapse":"panel-collapse collapse in",_this.toggleCollapsed=_this.toggleCollapsed.bind(_this),_this}return _inherits(Panel,_React$Component),_createClass(Panel,[{key:"toggleCollapsed",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"render",value:function(){var glyphClass=this.state.collapsed?"glyphicon pull-right glyphicon-chevron-down":"glyphicon pull-right glyphicon-chevron-up",pencilGlyph=void 0;this.props.edit&&(pencilGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-pencil",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.edit}));var plusGlyph=void 0;this.props.add&&(plusGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-plus",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.add}));var removeGlyph=void 0;this.props.cancel&&(removeGlyph=React.createElement("span",{className:"glyphicon pull-right glyphicon-remove",style:{marginRight:"10px",cursor:"pointer"},onClick:this.props.cancel}));var panelHeading=this.props.title?React.createElement("div",{className:"panel-heading"},React.createElement("span",{className:glyphClass,onClick:this.toggleCollapsed,"data-toggle":"collapse","data-target":"#"+this.props.id,style:{cursor:"pointer"}}),pencilGlyph,plusGlyph,removeGlyph,this.props.title):"";return React.createElement("div",{className:"panel panel-primary"},panelHeading,React.createElement("div",{id:this.props.id,className:this.panelClass,role:"tabpanel"},React.createElement("div",{className:"panel-body",style:{height:this.props.height}},this.props.children)))}}]),Panel}(React.Component);Panel.propTypes={id:React.PropTypes.string,height:React.PropTypes.string,title:React.PropTypes.string,edit:React.PropTypes.func,add:React.PropTypes.func},Panel.defaultProps={initCollapsed:!1,id:"default-panel",height:"100%"},exports.default=Panel},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_barcodeForm=__webpack_require__(4),_barcodeForm2=_interopRequireDefault(_barcodeForm),BiobankSpecimenForm=function(_React$Component){function BiobankSpecimenForm(props){_classCallCheck(this,BiobankSpecimenForm);var _this=_possibleConstructorReturn(this,(BiobankSpecimenForm.__proto__||Object.getPrototypeOf(BiobankSpecimenForm)).call(this,props)),availableId=Object.keys(_this.props.containerStati).find(function(key){return"Availabale"===_this.props.containerStati[key]});return _this.state={errorMessage:null,formErrors:{},barcodeList:{1:{specimen:{},container:{statusId:availableId,temperature:20}}},countBarcodes:1},_this.saveBarcodeList=_this.saveBarcodeList.bind(_this),_this.save=_this.save.bind(_this),_this}return _inherits(BiobankSpecimenForm,_React$Component),_createClass(BiobankSpecimenForm,[{key:"saveBarcodeList",value:function(){var barcodeList=this.state.barcodeList;for(var barcode in barcodeList)this.save(barcodeList[barcode].container,this.props.saveContainer),this.save(barcodeList[barcode].specimen,this.props.saveSpecimen)}},{key:"save",value:function(entity,url){var entityObject=new FormData;for(var key in entity)""!==entity[key]&&entityObject.append(key,entity[key]);$.ajax({type:"POST",url:url,data:entityObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){this.props.refreshParent(),swal("Save Successful!","","success"),this.props.onSuccess()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"setContainer",value:function(name,value){var siteId=this.state.siteId;this.state.containerList;"siteId"===name&&(siteId=value)}},{key:"setSpecimen",value:function(name,value){}},{key:"setBarcodeList",value:function(barcodeData,barcodeKey){var barcodeList=this.state.barcodeList;barcodeList[barcodeKey]=barcodeData,this.setState({barcodeList:barcodeList})}},{key:"addBarcode",value:function(){var barcodeList=this.state.barcodeList,count=this.state.countBarcodes;barcodeList[count+1]={specimen:{},container:{}},this.setState({barcodeList:barcodeList,countBarcodes:count+1})}},{key:"copyBarcode",value:function(key,multiplier){for(var count=this.state.countBarcodes,nextKey=count+1,barcodeList=this.state.barcodeList,i=1;i<=multiplier;i++)barcodeList[nextKey]=JSON.parse(JSON.stringify(barcodeList[key])),delete barcodeList[nextKey].barcode,nextKey++;this.setState({barcodeList:barcodeList,countBarcodes:nextKey})}},{key:"removeBarcode",value:function(key){var barcodeList=this.state.barcodeList;delete barcodeList[key],this.setState({barcodeList:barcodeList})}},{key:"render",value:function(){var _this2=this,barcodeListArray=Object.keys(this.state.barcodeFormList),barcodes=[],i=1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;barcodes.push(React.createElement(_barcodeForm2.default,{key:key,barcodeKey:key,id:i,barcodeData:_this2.state.barcodeFormList[key]?_this2.state.barcodeFormList[key]:null,removeBarcode:1!==barcodeListArray.length?function(){return _this2.removeBarcode(key)}:null,addBarcode:i==barcodeListArray.length?_this2.addBarcode:null,copyBarcode:i==barcodeListArray.length&&_this2.state.barcodeList[key]?_this2.copyBarcode.bind(_this2,key):null,setParentFormData:_this2.setBarcodeList,onChange:_this2.props.onChange,specimenTypes:_this2.props.specimenTypes,containerTypesPrimary:_this2.props.containerTypesPrimary,containersNonPrimary:_this2.props.containersNonPrimary,specimenTypeAttributes:_this2.props.specimenTypeAttributes,attributeDatatypes:_this2.props.attributeDatatypes,attributeOptions:_this2.props.attributeOptions,capacities:_this2.props.capacities,containerDimensions:_this2.props.containerDimensions,containerCoordinates:_this2.props.containerCoordinates,specimenTypeUnits:_this2.props.specimenTypeUnits,units:_this2.props.units})),i++},_iterator=barcodeListArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}var globalFields=void 0,remainingQuantityFields=void 0;return this.props.parentSpecimenIds?(globalFields=React.createElement("div",null,React.createElement(StaticElement,{label:"Parent Specimen",text:this.props.parentSpecimenBarcodes}),React.createElement(StaticElement,{label:"PSCID",text:this.props.pscid}),React.createElement(StaticElement,{label:"Visit Label",text:this.props.visit})),remainingQuantityFields=React.createElement("div",null,React.createElement(TextboxElement,{name:"quantity",label:"Remaining Quantity",onUserInput:this.setFormData,required:!0,value:this.state.formData.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:this.props.specimenUnits,onUserInput:this.setFormData,emptyOption:!1,required:!0,value:this.state.formData.unitId}))):globalFields=React.createElement("div",null,React.createElement(SearchableDropdown,{name:"pscid",label:"PSCID",options:this.props.pSCIDs,onUserInput:this.setFormData,ref:"pscid",required:!0,value:this.state.formData.pscid,placeHolder:"Search for a PSCID"}),React.createElement(SelectElement,{name:"visitLabel",label:"Visit Label",options:this.state.visits,onUserInput:this.setFormData,ref:"visitLabel",required:!0,value:this.state.formData.visitLabel,disabled:!this.state.formData.pscid})),React.createElement(FormElement,{name:"specimenForm",id:"specimenForm",onSubmit:this.saveBarcodeList,ref:"form"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9 col-xs-offset-1"},globalFields,remainingQuantityFields)),barcodes,React.createElement(ButtonElement,{label:"Submit",columnSize:"col-sm-2 col-sm-offset-10"}))}}]),BiobankSpecimenForm}(React.Component);BiobankSpecimenForm.propTypes={},exports.default=BiobankSpecimenForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_collectionForm=__webpack_require__(5),_collectionForm2=_interopRequireDefault(_collectionForm),SpecimenBarcodeForm=function(_React$Component){function SpecimenBarcodeForm(props){_classCallCheck(this,SpecimenBarcodeForm);var _this=_possibleConstructorReturn(this,(SpecimenBarcodeForm.__proto__||Object.getPrototypeOf(SpecimenBarcodeForm)).call(this,props));return _this.state={formData:{},formErrors:{},collapsed:!0,copyMultiplier:1},_this.setFormData=_this.setFormData.bind(_this),_this.setChildFormData=_this.setChildFormData.bind(_this),_this.setParentFormData=_this.setParentFormData.bind(_this),_this.toggleCollapse=_this.toggleCollapse.bind(_this),_this.setCopyMultiplier=_this.setCopyMultiplier.bind(_this),_this.copy=_this.copy.bind(_this),_this}return _inherits(SpecimenBarcodeForm,_React$Component),_createClass(SpecimenBarcodeForm,[{key:"componentDidMount",value:function(){if(this.props.formData){var formData=this.props.formData;this.setState({formData:formData})}}},{key:"toggleCollapse",value:function(){this.setState({collapsed:!this.state.collapsed})}},{key:"setCopyMultiplier",value:function(e){var copyMultiplier=e.target.value;this.setState({copyMultiplier:copyMultiplier})}},{key:"copy",value:function(){this.props.copyBarcodeForm(this.state.copyMultiplier)}},{key:"render",value:function(){var addBarcodeFormButton=void 0,addBarcodeFormText=void 0,copyBarcodeFormButton=void 0,copyBarcodeFormText=void 0;this.props.addBarcodeForm&&(addBarcodeFormButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.props.addBarcodeForm},"+")),addBarcodeFormText=React.createElement("span",{className:"action-title"},"New Entry")),this.props.copyBarcodeForm&&(copyBarcodeFormButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.copy},React.createElement("span",{className:"glyphicon glyphicon-duplicate"}))),copyBarcodeFormText=React.createElement("span",{className:"action-title"},React.createElement("input",{className:"form-control input-sm",type:"number",min:"1",max:"50",style:{width:50,display:"inline"},onChange:this.setCopyMultiplier,value:this.state.copyMultiplier}),"Copies"));var removeBarcodeFormButton=void 0;if(this.props.removeBarcodeForm){var glyphStyle={color:"#DDDDDD",marginLeft:10,cursor:"pointer",fontSize:15};removeBarcodeFormButton=React.createElement("span",{className:"glyphicon glyphicon-remove",onClick:this.props.removeBarcodeForm,style:glyphStyle})}return React.createElement(FormElement,{name:"biobankBarcode"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-9 col-xs-offset-1"},React.createElement("div",null,React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setFormData,ref:"barcode",required:!0,value:this.state.formData.barcode
}))),React.createElement("div",{className:"col-xs-1",style:{paddingLeft:0,marginTop:10}},React.createElement("span",{className:this.state.collapsed?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-up",style:{cursor:"pointer",fontSize:15,position:"relative",right:40},"data-toggle":"collapse","data-target":"#item-"+this.props.id,onClick:this.toggleCollapse}),removeBarcodeFormButton)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-8"},React.createElement("div",{id:"item-"+this.props.id,className:"collapse"},React.createElement(SelectElement,{name:"specimenType",label:"Specimen Type",options:this.props.specimenTypes,onUserInput:this.setFormData,ref:"specimenType",required:!0,value:this.state.formData.specimenType}),React.createElement(SelectElement,{name:"containerType",label:"Container Type",options:this.props.containerTypesPrimary,onUserInput:this.setFormData,ref:"containerType",required:!0,value:this.state.formData.containerType}),React.createElement(_collectionForm2.default,{formData:this.props.formData,setParentFormData:this.setChildFormData,onChange:this.props.onChange,specimenTypes:this.props.specimenTypes,specimenTypeAttributes:this.props.specimenTypeAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,containerTypesPrimary:this.props.containerTypesPrimary,containersNonPrimary:this.props.containersNonPrimary,containerDimensions:this.props.containerDimensions,containerCoordinates:this.props.containerCoordinates,specimenTypeUnits:this.props.specimenTypeUnits,stati:this.props.stati}),React.createElement(ContainerParentForm,{setParentFormData:this.setContainerParentFormData,containersNonPrimary:this.props.containersNonPrimary,containerDimensions:this.props.containerDimensions,containerCoordinates:this.props.containerCoordinates})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{className:"col-xs-4"}),React.createElement("div",{className:"col-xs-3 action"},addBarcodeFormButton,addBarcodeFormText),React.createElement("div",{className:"col-xs-3 action"},copyBarcodeFormButton,copyBarcodeFormText))))}},{key:"setFormData",value:function(formElement,value){this.props.onChange instanceof Function&&this.props.onChange();var formData=this.state.formData;formData[formElement]=value,this.setState({formData:formData},this.setParentFormData)}},{key:"setChildFormData",value:function(collectionFormData){var formData=this.state.formData;for(var field in collectionFormData)formData[field]=collectionFormData[field];this.setState({formData:formData},this.setParentFormData)}},{key:"setParentFormData",value:function(){this.props.setParentFormData(this.state.formData,this.props.barcodeKey)}}]),SpecimenBarcodeForm}(React.Component);SpecimenBarcodeForm.propTypes={id:React.PropTypes.string,specimenTypes:React.PropTypes.object.isRequired,containerTypesPrimary:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,capacities:React.PropTypes.object.isRequired},exports.default=SpecimenBarcodeForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),SpecimenCollectionForm=function(_React$Component){function SpecimenCollectionForm(){_classCallCheck(this,SpecimenCollectionForm);var _this=_possibleConstructorReturn(this,(SpecimenCollectionForm.__proto__||Object.getPrototypeOf(SpecimenCollectionForm)).call(this));return _this.getSpecimenTypeFields=_this.getSpecimenTypeFields.bind(_this),_this.setCollectionData=_this.setCollectionData.bind(_this),_this.setData=_this.setData.bind(_this),_this}return _inherits(SpecimenCollectionForm,_React$Component),_createClass(SpecimenCollectionForm,[{key:"setCollectionData",value:function(name,value){var collection=this.props.specimen.collection;collection[name]=value,this.props.setSpecimenData("collection",collection)}},{key:"setData",value:function(name,value){var data=this.props.specimen.collection.data;data[name]=value,this.setCollectionData("data",data)}},{key:"getSpecimenTypeFields",value:function(fieldsObject){var _this2=this,specimenTypeFields=Object.keys(fieldsObject).map(function(attribute){var datatype=_this2.props.attributeDatatypes[fieldsObject[attribute].datatypeId].datatype;if("text"===datatype||"number"===datatype){if(null==fieldsObject[attribute].refTableId)return React.createElement(TextboxElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this2.setData,required:fieldsObject[attribute].required,value:_this2.props.specimen.collection.data[attribute]});if(null!==fieldsObject[attribute].refTableId)return React.createElement(SelectElement,{name:attribute,label:fieldsObject[attribute].name,options:_this2.props.attributeOptions[fieldsObject[attribute].refTableId],onUserInput:_this2.setData,required:fieldsObject[attribute].required,value:_this2.props.specimen.collection.data[attribute]})}if("datetime"===datatype)return React.createElement(DateElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this2.setData,ref:attribute,required:fieldsObject[attribute].required,value:_this2.props.specimen.collection.data[attribute]})});return specimenTypeFields}},{key:"render",value:function(){var updateButton=void 0;this.props.specimen&&(updateButton=React.createElement(ButtonElement,{label:"Update"}));var specimenTypeUnits={},specimenTypeFields=void 0;if(this.props.specimen.typeId){for(var id in this.props.specimenTypeUnits[this.props.specimen.typeId])specimenTypeUnits[id]=this.props.specimenTypeUnits[this.props.specimen.typeId][id].unit;var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.props.specimen.typeId];specimenTypeFieldsObject&&(specimenTypeFields=this.getSpecimenTypeFields(specimenTypeFieldsObject))}var specimenFields=void 0;return this.props.specimen.typeId&&(specimenFields=React.createElement("div",null,React.createElement(TextboxElement,{name:"quantity",label:"Quantity",onUserInput:this.setCollectionData,required:!0,value:this.props.specimen.collection.quantity}),React.createElement(SelectElement,{name:"unitId",label:"Unit",options:specimenTypeUnits,onUserInput:this.setCollectionData,required:!0,value:this.props.specimen.collection.unitId}),specimenTypeFields,React.createElement(DateElement,{name:"date",label:"Date",minYear:"2000",maxYear:"2018",onUserInput:this.setCollectionData,required:!0,value:this.props.specimen.collection.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setCollectionData,required:!0,value:this.props.specimen.collection.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setCollectionData,ref:"comments",value:this.props.specimen.collection.comments}))),React.createElement(FormElement,{name:"biobankSpecimen",onSubmit:this.props.saveSpecimen,ref:"form"},specimenFields,updateButton)}}]),SpecimenCollectionForm}(React.Component);SpecimenCollectionForm.propTypes={},exports.default=SpecimenCollectionForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_barcodeForm=__webpack_require__(4),_specimenForm=(_interopRequireDefault(_barcodeForm),__webpack_require__(3)),_specimenForm2=_interopRequireDefault(_specimenForm),_preparationForm=__webpack_require__(7),_preparationForm2=_interopRequireDefault(_preparationForm),PoolSpecimenForm=function(_React$Component){function PoolSpecimenForm(props){_classCallCheck(this,PoolSpecimenForm);var _this=_possibleConstructorReturn(this,(PoolSpecimenForm.__proto__||Object.getPrototypeOf(PoolSpecimenForm)).call(this,props));return _this.state={formData:{},barcodeList:{},errorMessage:null,formErrors:{},barcodeCount:2,preparation:!1,step:1},_this.handleSubmit=_this.handleSubmit.bind(_this),_this.validateForm=_this.validateForm.bind(_this),_this.setFormData=_this.setFormData.bind(_this),_this.setPreparationFormData=_this.setPreparationFormData.bind(_this),_this.setSpecimenFormData=_this.setSpecimenFormData.bind(_this),_this.submitForm=_this.submitForm.bind(_this),_this.mapFormOptions=_this.mapFormOptions.bind(_this),_this.setBarcodeCount=_this.setBarcodeCount.bind(_this),_this.next=_this.next.bind(_this),_this.previous=_this.previous.bind(_this),_this.addPreparation=_this.addPreparation.bind(_this),_this.removePreparation=_this.removePreparation.bind(_this),_this.validate=_this.validate.bind(_this),_this.formSwitch=_this.formSwitch.bind(_this),_this.preparationSwitch=_this.preparationSwitch.bind(_this),_this.runAjax=_this.runAjax.bind(_this),_this}return _inherits(PoolSpecimenForm,_React$Component),_createClass(PoolSpecimenForm,[{key:"mapFormOptions",value:function(originalObject,targetAttribute){var mappedObject={};for(var i in originalObject)mappedObject[i]=originalObject[i][targetAttribute];return mappedObject}},{key:"next",value:function(){var _this2=this;this.validate().then(function(data){_this2.setState({poolData:data,step:_this2.state.step+1})},function(error){swal("Oops!",error.responseText,"error")})}},{key:"previous",value:function(){this.setState({step:this.state.step-1})}},{key:"validate",value:function(){return this.runAjax(this.props.specimenRequest,{barcodeList:this.state.barcodeList})}},{key:"runAjax",value:function(url,inputData){var _this3=this;return new Promise(function(resolve,reject){$.ajax(url,{method:"GET",dataType:"json",data:inputData,success:function(data){resolve(data)}.bind(_this3),error:function(_error,textStatus,errorThrown){reject(_error),console.error(_error)}})})}},{key:"setBarcodeCount",value:function(field,value){var barcodeCount=value,barcodeList=this.state.barcodeList;for(var barcode in barcodeList)barcode>barcodeCount&&delete barcodeList[barcode];this.setState({barcodeCount:barcodeCount,barcodeList:barcodeList})}},{key:"formSwitch",value:function(inputForm,specimenForm){switch(this.state.step){case 1:return inputForm;case 2:return specimenForm}}},{key:"preparationSwitch",value:function(preparationButton,preparationForm){switch(this.state.preparation){case!1:return preparationButton;case!0:return preparationForm}}},{key:"addPreparation",value:function(){var _this4=this;this.validate().then(function(data){_this4.setState({poolData:data,preparation:!0})},function(error){swal("Oh no!",error.responseText,"error")})}},{key:"removePreparation",value:function(){var formData=this.state.formData;formData.preparationForm={},this.setState({preparation:!1,formData:formData})}},{key:"render",value:function(){for(var barcodes=[],i=1;i<=this.state.barcodeCount;i++)barcodes.push(React.createElement(TextboxElement,{name:i,label:"Barcode "+i,onUserInput:this.setFormData,required:!0,value:this.state.barcodeList[i],errorMessage:this.state.formErrors[i]}));var preparationButton=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-4"}),React.createElement("div",{className:"col-xs 4 action"},React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.addPreparation},"+")),React.createElement("div",{className:"action-title"},"Add Preparation"))),preparationForm=void 0;if(this.state.poolData){var specimenProtocolAttributes=this.props.specimenProtocolAttributes[this.state.poolData.typeId],specimenProtocols={};for(var id in specimenProtocolAttributes)specimenProtocols[id]=this.props.specimenProtocols[id];specimenProtocols=this.mapFormOptions(specimenProtocols,"protocol"),preparationForm=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-1"},React.createElement(_preparationForm2.default,{formData:this.state.formData.preparationForm,specimenProtocols:specimenProtocols,specimenProtocolAttributes:specimenProtocolAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,setParentFormData:this.setPreparationFormData,insertAction:loris.BaseURL+"/biobank/ajax/submitData.php?action=insertSpecimenPreparation"}),React.createElement("a",{className:"pull-right",style:{cursor:"pointer"},onClick:this.removePreparation},"Cancel Preparation")))}var inputForm=React.createElement("div",null,React.createElement("div",{className:"row"},React.createElement("div",{className:"col-sm-9 col-sm-offset-1"},React.createElement(StaticElement,{label:"Pooling Note",text:"Select or Scan the specimens to be pooled. Please ensure that they are the same type, and share the same PSCID and Visit Label"}),React.createElement(NumericElement,{label:"â„– of Specimens",min:"2",max:"100",value:this.state.barcodeCount,onUserInput:this.setBarcodeCount}),barcodes)),this.preparationSwitch(preparationButton,preparationForm),React.createElement("div",{className:"col-sm-3 col-xs-offset-9 action"},React.createElement("div",{className:"action-title"},"Next"),React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.next},React.createElement("span",{className:"glyphicon glyphicon-chevron-right"}))))),specimenForm=void 0;if(this.state.poolData){var specimenTypes={};this.state.poolData.typeId&&(specimenTypes[this.state.poolData.typeId]=this.props.specimenTypes[this.state.poolData.typeId]);var pscid=this.props.pSCIDs[this.state.poolData.candidateId],visit=this.props.sessionData[pscid].visits[this.state.poolData.sessionId],barcodesArray=Object.values(this.state.barcodeList),barcodesString=barcodesArray.join(", "),specimenUnits=this.mapFormOptions(this.props.specimenUnits,"unit");specimenForm=React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-12"},React.createElement(_specimenForm2.default,{formData:this.state.formData.specimenForm,candidateId:this.state.poolData.candidateId,pscid:pscid,sessionId:this.state.poolData.sessionId,visit:visit,parentSpecimenBarcodes:barcodesString,parentSpecimenIds:this.state.poolData.specimenIds,specimenTypes:specimenTypes,specimenTypeUnits:this.props.specimenTypeUnits,specimenUnits:specimenUnits,containerTypesPrimary:this.props.containerTypesPrimary,containersNonPrimary:this.props.containersNonPrimary,specimenTypeAttributes:this.props.specimenTypeAttributes,attributeDatatypes:this.props.attributeDatatypes,attributeOptions:this.props.attributeOptions,capacities:this.props.capacities,containerDimensions:this.props.containerDimensions,containerCoordinates:this.props.containerCoordinates,setParentFormData:this.setSpecimenFormData,action:loris.BaseURL+"/biobank/ajax/submitData.php?action=submitSpecimen",refreshParent:this.props.refreshParent}),React.createElement(ButtonElement,{label:"Submit"})),React.createElement("div",{className:"col-sm-3 col-xs-offset-2 action"},React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button update",onClick:this.previous},React.createElement("span",{className:"glyphicon glyphicon-chevron-left"}))),React.createElement("div",{className:"action-title"},"Previous")))}return React.createElement(FormElement,{name:"poolSpecimenForm",id:"poolSpecimenForm",onSubmit:this.handleSubmit,ref:"form"},this.formSwitch(inputForm,specimenForm))}},{key:"validateForm",value:function(formElement,value){var _this5=this,formErrors=this.state.formErrors;"barcode"===formElement&&""!==value&&(/^hello/.test(this.state.formData.barcode)?formErrors.barcode=!1:formErrors.barcode=!0),"quantity"===formElement&&""!==value&&(isNaN(value)||value>this.props.capacities[this.state.currentContainerType]?formErrors.quantity=!0:formErrors.quantity=!1);var specimenTypeFieldsObject=this.props.specimenTypeAttributes[this.state.currentSpecimenType];Object.keys(specimenTypeFieldsObject).map(function(attribute){var datatype=_this5.props.attributeDatatypes[specimenTypeFieldsObject[attribute].datatypeId].datatype;"number"===datatype&&formElement===attribute&&(isNaN(value)&&""!==value?formErrors[attribute]=!0:formErrors[attribute]=!1)});this.setState({formErrors:formErrors})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.submitForm()}},{key:"submitForm",value:function(){var formData=this.state.formData,preparationForm=this.state.formData.preparationForm,specimenForm=this.state.formData.specimenForm;formData.preparationForm=JSON.stringify(preparationForm),formData.specimenForm=JSON.stringify(specimenForm),console.log(formData.specimenForm),console.log(formData.preparationForm);var formObj=new FormData;for(var key in formData)""!==formData[key]&&formObj.append(key,formData[key]);$.ajax({type:"POST",url:this.props.action,data:formObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){swal("Specimens Pooled Successful!","","success"),this.props.onSuccess()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"isValidForm",value:function isValidForm(formRefs,formData){var isValidForm=!0,requiredFields={pscid:null,visitLabel:null};return Object.keys(requiredFields).map(function(field){formData[field]?requiredFields[field]=formData[field]:formRefs[field]&&(formRefs[field].props.hasError=!0,isValidForm=!1)}),this.forceUpdate(),isValidForm}},{key:"setFormData",value:function(formElement,value){this.props.onChange instanceof Function&&this.props.onChange(),"pscid"===formElement&&""!==value&&void 0!==value&&(this.state.visits=this.props.sessionData[this.props.pSCIDs[value]].visits);var formData=this.state.formData,barcodeList=this.state.barcodeList;isNaN(formElement)?formData[formElement]=value:barcodeList[formElement]=value,this.setState({formData:formData,barcodeList:barcodeList})}},{key:"setPreparationFormData",value:function(preparationFormData){var formData=this.state.formData;formData.preparationForm=preparationFormData,this.setState({formData:formData})}},{key:"setSpecimenFormData",value:function(specimenFormData){var formData=this.state.formData;formData.specimenForm=specimenFormData,this.setState({formData:formData})}}]),PoolSpecimenForm}(React.Component);PoolSpecimenForm.propTypes={DataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,refreshTable:React.PropTypes.func},exports.default=PoolSpecimenForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),SpecimenPreparationForm=function(_React$Component){function SpecimenPreparationForm(){_classCallCheck(this,SpecimenPreparationForm);var _this=_possibleConstructorReturn(this,(SpecimenPreparationForm.__proto__||Object.getPrototypeOf(SpecimenPreparationForm)).call(this));return _this.getSpecimenProtocolFields=_this.getSpecimenProtocolFields.bind(_this),_this.setPreparation=_this.setPreparation.bind(_this),_this.addData=_this.addData.bind(_this),_this.setData=_this.setData.bind(_this),_this}return _inherits(SpecimenPreparationForm,_React$Component),_createClass(SpecimenPreparationForm,[{key:"setPreparation",value:function(name,value){var preparation=this.props.specimen.preparation;preparation[name]=value,this.props.setSpecimenData("preparation",preparation)}},{key:"addData",value:function(){var preparation=this.props.specimen.preparation;preparation.data={},this.props.setSpecimenData("preparation",preparation)}},{key:"setData",value:function(name,value){var data=this.props.specimen.preparation.data;data[name]=value,this.setPreparation("data",data)}},{key:"getSpecimenProtocolFields",value:function(fieldsObject){var _this2=this,specimenProtocolFields=Object.keys(fieldsObject).map(function(attribute){var datatype=_this2.props.attributeDatatypes[fieldsObject[attribute].datatypeId].datatype;if("text"===datatype||"number"===datatype){if(null==fieldsObject[attribute].refTableId)return React.createElement(TextboxElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this2.setData,required:fieldsObject[attribute].required,value:_this2.props.specimen.preparation.data[attribute]});if(null!==fieldsObject[attribute].refTableId)return React.createElement(SelectElement,{name:attribute,label:fieldsObject[attribute].name,options:_this2.props.attributeOptions[fieldsObject[attribute].refTableId],onUserInput:_this2.setData,required:fieldsObject[attribute].required,value:_this2.props.specimen.preparation.data[attribute]})}if("datetime"===datatype)return React.createElement(DateElement,{name:attribute,label:fieldsObject[attribute].name,onUserInput:_this2.setData,ref:attribute,required:fieldsObject[attribute].required,value:_this2.props.specimen.preparation.data[attribute]})});return specimenProtocolFields}},{key:"render",value:function(){var submitButton=void 0;submitButton=this.props.data.specimen.preparation?React.createElement(ButtonElement,{label:"Update"}):React.createElement(ButtonElement,{label:"Submit"});var specimenProtocolFields=void 0;if(this.props.specimen.preparation.protocolId){var specimenProtocolFieldsObject=this.props.specimenProtocolAttributes[this.props.specimen.preparation.protocolId];specimenProtocolFieldsObject&&(this.props.specimen.preparation.data?specimenProtocolFields=this.getSpecimenProtocolFields(specimenProtocolFieldsObject):this.addData())}return React.createElement(FormElement,{name:"specimenPreparation",onSubmit:this.props.saveSpecimen,ref:"form"},React.createElement(SelectElement,{name:"protocolId",label:"Protocol",options:this.props.specimenProtocols,onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.protocolId}),specimenProtocolFields,React.createElement(DateElement,{name:"date",label:"Date",onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.date}),React.createElement(TimeElement,{name:"time",label:"Time",onUserInput:this.setPreparation,required:!0,value:this.props.specimen.preparation.time}),React.createElement(TextareaElement,{name:"comments",label:"Comments",onUserInput:this.setPreparation,value:this.props.specimen.preparation.comments}),submitButton)}}]),SpecimenPreparationForm}(React.Component);SpecimenPreparationForm.propTypes={},exports.default=SpecimenPreparationForm},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_containerBarcodeForm=__webpack_require__(9),_containerBarcodeForm2=_interopRequireDefault(_containerBarcodeForm),BiobankContainerForm=function(_React$Component){function BiobankContainerForm(props){_classCallCheck(this,BiobankContainerForm);var _this=_possibleConstructorReturn(this,(BiobankContainerForm.__proto__||Object.getPrototypeOf(BiobankContainerForm)).call(this,props)),availableId=Object.keys(_this.props.containerStati).find(function(key){return"Available"===_this.props.containerStati[key]});return _this.state={formErrors:{},errorMessage:null,containerList:{1:{statusId:availableId,temperature:20}},countContainers:1,collapsed:{1:!0},copyMultiplier:1},_this.toggleCollapse=_this.toggleCollapse.bind(_this),_this.addContainer=_this.addContainer.bind(_this),_this.setContainer=_this.setContainer.bind(_this),_this.setCopyMultiplier=_this.setCopyMultiplier.bind(_this),_this.copyContainer=_this.copyContainer.bind(_this),_this.removeContainer=_this.removeContainer.bind(_this),_this.saveContainerList=_this.saveContainerList.bind(_this),_this.saveContainer=_this.saveContainer.bind(_this),_this}return _inherits(BiobankContainerForm,_React$Component),_createClass(BiobankContainerForm,[{key:"toggleCollapse",value:function(id){var collapsed=this.state.collapsed;collapsed[id]=!collapsed[id],this.setState({collapsed:collapsed})}},{key:"saveContainerList",value:function(){var containerList=this.state.containerList;for(var container in containerList)this.saveContainer(containerList[container])}},{key:"saveContainer",value:function(container){var containerObj=new FormData;for(var key in container)""!==container[key]&&containerObj.append(key,container[key]);$.ajax({type:"POST",url:this.props.action,data:containerObj,cache:!1,contentType:!1,processData:!1,xhr:function(){var xhr=new window.XMLHttpRequest;return xhr}.bind(this),success:function(){this.props.refreshParent(),swal("Container Submission Successful!","","success"),this.props.onSuccess()}.bind(this),error:function(err){console.error(err);var msg=err.responseJSON?err.responseJSON.message:"Specimen error!";this.setState({errorMessage:msg}),swal(msg,"","error")}.bind(this)})}},{key:"setContainer",value:function(name,value,key){this.props.onChange instanceof Function&&this.props.onChange();var siteId=this.state.siteId,containerList=this.state.containerList;if("siteId"===name){siteId=value;for(var container in containerList)containerList[container].originId=siteId,containerList[container].locationId=siteId}else containerList[key][name]=value;this.setState({containerList:containerList,siteId:siteId})}},{key:"addContainer",value:function(){var _this2=this,containerList=this.state.containerList,count=this.state.countContainers,collapsed=this.state.collapsed,siteId=this.state.siteId,temperature=20,statusId=Object.keys(this.props.containerStati).find(function(key){return"Available"===_this2.props.containerStati[key]});containerList[count+1]={statusId:statusId,originId:siteId,locationId:siteId,temperature:temperature},collapsed[count+1]=!0,this.setState({containerList:containerList,countContainers:count+1,collapsed:collapsed})}},{key:"setCopyMultiplier",value:function(e){var copyMultiplier=e.target.value;this.setState({copyMultiplier:copyMultiplier})}},{key:"copyContainer",value:function(key){for(var count=this.state.countContainers,nextKey=count+1,containerList=this.state.containerList,multiplier=this.state.copyMultiplier,i=1;i<=multiplier;i++)containerList[nextKey]=JSON.parse(JSON.stringify(containerList[key])),delete containerList[nextKey].barcode,nextKey++;this.setState({containerList:containerList,countContainers:nextKey})}},{key:"removeContainer",value:function(key){var containerList=this.state.containerList;delete containerList[key],this.setState({containerList:containerList})}},{key:"render",value:function(){var _this3=this,containerListArray=Object.keys(this.state.containerList),containers=[],i=1,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_loop=function(){var key=_step.value;containers.push(React.createElement(_containerBarcodeForm2.default,{key:key,containerKey:key,id:i,collapsed:_this3.state.collapsed[i],toggleCollapse:_this3.toggleCollapse,container:_this3.state.containerList[key]||null,removeContainer:1!==containerListArray.length?function(){return _this3.removeContainer(key);
}:null,addContainer:i==containerListArray.length?_this3.addContainer:null,setCopyMultiplier:_this3.setCopyMultiplier,copyMultiplier:_this3.state.copyMultiplier,copyContainer:i==containerListArray.length&&_this3.state.containerList[key]?_this3.copyContainer:null,setContainer:_this3.setContainer,onChange:_this3.props.onChange,containerTypesNonPrimary:_this3.props.containerTypesNonPrimary,containerBarcodesNonPrimary:_this3.props.containerBarcodesNonPrimary})),i++},_iterator=containerListArray[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0)_loop()}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}return React.createElement(FormElement,{name:"containerForm",onSubmit:this.saveContainerList,ref:"form"},React.createElement("br",null),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement(SelectElement,{name:"siteId",label:"Site",options:this.props.sites,onUserInput:this.setContainer,required:!0,value:this.state.siteId}))),containers,React.createElement("div",{className:"col-xs-3 col-xs-offset-9"},React.createElement(ButtonElement,{label:"Submit"})))}}]),BiobankContainerForm}(React.Component);BiobankContainerForm.propTypes={DataURL:React.PropTypes.string.isRequired,action:React.PropTypes.string.isRequired,barcode:React.PropTypes.string,refreshTable:React.PropTypes.func},exports.default=BiobankContainerForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ContainerBarcodeForm=function(_React$Component){function ContainerBarcodeForm(){_classCallCheck(this,ContainerBarcodeForm);var _this=_possibleConstructorReturn(this,(ContainerBarcodeForm.__proto__||Object.getPrototypeOf(ContainerBarcodeForm)).call(this));return _this.setContainer=_this.setContainer.bind(_this),_this.copy=_this.copy.bind(_this),_this}return _inherits(ContainerBarcodeForm,_React$Component),_createClass(ContainerBarcodeForm,[{key:"copy",value:function(){this.props.copyContainer(this.props.containerKey)}},{key:"setContainer",value:function(name,value){this.props.setContainer(name,value,this.props.containerKey)}},{key:"render",value:function(){var _this2=this,addContainerButton=void 0,addContainerText=void 0,copyContainerButton=void 0,copyContainerText=void 0;this.props.addContainer&&(addContainerButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.props.addContainer},"+")),addContainerText=React.createElement("span",{className:"action-title"},"New Entry")),this.props.copyContainer&&(copyContainerButton=React.createElement("span",{className:"action"},React.createElement("div",{className:"action-button add",onClick:this.copy},React.createElement("span",{className:"glyphicon glyphicon-duplicate"}))),copyContainerText=React.createElement("span",{className:"action-title"},React.createElement("input",{className:"form-control input-sm",type:"number",min:"1",max:"50",style:{width:50,display:"inline"},onChange:this.props.setCopyMultiplier,value:this.props.copyMultiplier}),"Copies"));var removeContainerButton=void 0;if(this.props.removeContainer){var glyphStyle={color:"#DDDDDD",marginLeft:10,cursor:"pointer",fontSize:15};removeContainerButton=React.createElement("span",{className:"glyphicon glyphicon-remove",onClick:this.props.removeContainer,style:glyphStyle})}return React.createElement(FormElement,{name:"container"},React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",null,React.createElement(TextboxElement,{name:"barcode",label:"Barcode "+this.props.id,onUserInput:this.setContainer,ref:"barcode",required:!0,value:this.props.container.barcode}))),React.createElement("div",{className:"col-xs-1",style:{paddingLeft:0,marginTop:10}},React.createElement("span",{className:this.props.collapsed?"glyphicon glyphicon-chevron-down":"glyphicon glyphicon-chevron-up",style:{cursor:"pointer",fontSize:15,position:"relative",right:40},"data-toggle":"collapse","data-target":"#item-"+this.props.containerKey,onClick:function(){return _this2.props.toggleCollapse(_this2.props.containerKey)}}),removeContainerButton)),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-2"}),React.createElement("div",{className:"col-xs-9"},React.createElement("div",{id:"item-"+this.props.containerKey,className:"collapse"},React.createElement(SelectElement,{name:"typeId",label:"Container Type",options:this.props.containerTypesNonPrimary,onUserInput:this.setContainer,required:!0,value:this.props.container.typeId})))),React.createElement("div",{className:"row"},React.createElement("div",{className:"col-xs-11"},React.createElement("div",{className:"col-xs-3"}),React.createElement("div",{className:"col-xs-4 action"},addContainerButton,addContainerText),React.createElement("div",{className:"col-xs-4 action"},copyContainerButton,copyContainerText))))}}]),ContainerBarcodeForm}(React.Component);ContainerBarcodeForm.propTypes={id:React.PropTypes.string,specimenTypes:React.PropTypes.object.isRequired,containerTypesPrimary:React.PropTypes.object.isRequired,specimenTypeAttributes:React.PropTypes.object.isRequired,attributeDatatypes:React.PropTypes.object.isRequired,capacities:React.PropTypes.object.isRequired},exports.default=ContainerBarcodeForm},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Tabs=function(_React$Component){function Tabs(props){_classCallCheck(this,Tabs);var _this=_possibleConstructorReturn(this,(Tabs.__proto__||Object.getPrototypeOf(Tabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this.props.updateURL&&hash?activeTab=hash.substr(1):_this.props.defaultTab?activeTab=_this.props.defaultTab:_this.props.tabs.length>0&&(activeTab=_this.props.tabs[0].id),_this.state={activeTab:activeTab},_this.handleClick=_this.handleClick.bind(_this),_this.getTabs=_this.getTabs.bind(_this),_this.getTabPanes=_this.getTabPanes.bind(_this),_this}return _inherits(Tabs,_React$Component),_createClass(Tabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("ul",{className:"nav nav-tabs",role:"tablist",style:tabStyle},tabs),React.createElement("div",{className:"tab-content"},tabPanes))}}]),Tabs}(React.Component);Tabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},Tabs.defaultProps={onTabChange:function(){},updateURL:!0};var VerticalTabs=function(_React$Component2){function VerticalTabs(props){_classCallCheck(this,VerticalTabs);var _this2=_possibleConstructorReturn(this,(VerticalTabs.__proto__||Object.getPrototypeOf(VerticalTabs)).call(this,props)),hash=window.location.hash,activeTab="";return _this2.props.updateURL&&hash?activeTab=hash.substr(1):_this2.props.defaultTab?activeTab=_this2.props.defaultTab:_this2.props.tabs.length>0&&(activeTab=_this2.props.tabs[0].id),_this2.state={activeTab:activeTab},_this2.handleClick=_this2.handleClick.bind(_this2),_this2.getTabs=_this2.getTabs.bind(_this2),_this2.getTabPanes=_this2.getTabPanes.bind(_this2),_this2}return _inherits(VerticalTabs,_React$Component2),_createClass(VerticalTabs,[{key:"handleClick",value:function(tabId,e){if(this.setState({activeTab:tabId}),this.props.onTabChange(tabId),this.props.updateURL){var scrollDistance=$("body").scrollTop()||$("html").scrollTop();window.location.hash=e.target.hash,$("html,body").scrollTop(scrollDistance)}}},{key:"getTabs",value:function(){var tabs=this.props.tabs.map(function(tab){var tabClass=this.state.activeTab===tab.id?"active":null,href="#"+tab.id,tabID="tab-"+tab.id;return React.createElement("li",{role:"presentation",className:tabClass,key:tab.id},React.createElement("a",{id:tabID,href:href,role:"tab","data-toggle":"tab",onClick:this.handleClick.bind(null,tab.id)},tab.label))}.bind(this));return tabs}},{key:"getTabPanes",value:function(){var tabPanes=React.Children.map(this.props.children,function(child,key){if(child)return React.cloneElement(child,{activeTab:this.state.activeTab,key:key})}.bind(this));return tabPanes}},{key:"render",value:function(){var tabs=this.getTabs(),tabPanes=this.getTabPanes(),tabStyle={marginLeft:0,marginBottom:"5px"};return React.createElement("div",null,React.createElement("div",{className:"tabbable col-md-3 col-sm-3"},React.createElement("ul",{className:"nav nav-pills nav-stacked",role:"tablist",style:tabStyle},tabs)),React.createElement("div",{className:"tab-content col-md-9 col-sm-9"},tabPanes))}}]),VerticalTabs}(React.Component);VerticalTabs.propTypes={tabs:React.PropTypes.array.isRequired,defaultTab:React.PropTypes.string,updateURL:React.PropTypes.bool},VerticalTabs.defaultProps={onTabChange:function(){},updateURL:!0};var TabPane=function(_React$Component3){function TabPane(){return _classCallCheck(this,TabPane),_possibleConstructorReturn(this,(TabPane.__proto__||Object.getPrototypeOf(TabPane)).apply(this,arguments))}return _inherits(TabPane,_React$Component3),_createClass(TabPane,[{key:"render",value:function(){var classList="tab-pane",title=void 0;return this.props.TabId===this.props.activeTab&&(classList+=" active"),this.props.Title&&(title=React.createElement("h1",null,this.props.Title)),React.createElement("div",{role:"tabpanel",className:classList,id:this.props.TabId},title,this.props.children)}}]),TabPane}(React.Component);TabPane.propTypes={TabId:React.PropTypes.string.isRequired,Title:React.PropTypes.string,activeTab:React.PropTypes.string},exports.Tabs=Tabs,exports.VerticalTabs=VerticalTabs,exports.TabPane=TabPane},function(module,exports,__webpack_require__){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Modal=__webpack_require__(12),_Modal2=_interopRequireDefault(_Modal),FormModal=function(_React$Component){function FormModal(props){_classCallCheck(this,FormModal);var _this=_possibleConstructorReturn(this,(FormModal.__proto__||Object.getPrototypeOf(FormModal)).call(this,props));return _this.state={show:!1,throwWarning:!1},_this.openModal=_this.openModal.bind(_this),_this.closeModal=_this.closeModal.bind(_this),_this.confirmClose=_this.confirmClose.bind(_this),_this.setWarning=_this.setWarning.bind(_this),_this}return _inherits(FormModal,_React$Component),_createClass(FormModal,[{key:"renderChildren",value:function(){var _this2=this;return React.Children.map(this.props.children,function(child){return React.cloneElement(child,{onSuccess:_this2.closeModal,onChange:_this2.setWarning})})}},{key:"openModal",value:function(){this.setState({show:!0})}},{key:"setWarning",value:function(){this.setState({throwWarning:!0})}},{key:"confirmClose",value:function(){this.state.throwWarning?swal({title:"Are You Sure?",text:"Leaving the form will result in the loss of any information entered.",type:"warning",showCancelButton:!0,confirmButtonText:"Proceed",cancelButtonText:"Cancel"},function(){this.closeModal()}.bind(this)):this.closeModal()}},{key:"closeModal",value:function(){this.setState({show:!1,throwWarning:!1})}},{key:"render",value:function(){return React.createElement(_Modal2.default,_extends({closeModal:this.confirmClose,openModal:this.openModal,show:this.state.show},this.props),this.renderChildren())}}]),FormModal}(React.Component);FormModal.propTypes={title:React.PropTypes.string,buttonClass:React.PropTypes.string,buttonStyle:React.PropTypes.object,buttonContent:React.PropTypes.object},FormModal.defaultProps={buttonClass:"btn btn-primary"},exports.default=FormModal},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Modal=function(_React$Component){function Modal(props){return _classCallCheck(this,Modal),_possibleConstructorReturn(this,(Modal.__proto__||Object.getPrototypeOf(Modal)).call(this,props))}return _inherits(Modal,_React$Component),_createClass(Modal,[{key:"render",value:function(){var modal,backdropStyle={position:"fixed",zIndex:9998,top:0,bottom:0,left:0,right:0,backgroundColor:"rgba(0,0,0,0.3)",padding:50},modalStyle={position:"relative",maxWidth:1e3,maxHeight:"100%",margin:"0 auto",backgroundColor:"#fff",borderRadius:10,overflowY:"auto",zIndex:9999},titleStyle={display:"flex",flexDirection:"row",alignItems:"center",background:"#093782",height:"70px",borderTopRightRadius:"10",color:"#FFFFFF",fontSize:24,padding:20},glyphStyle={marginLeft:"auto",cursor:"pointer"},bodyStyle={padding:15},button=React.createElement("div",{className:this.props.buttonClass,onClick:this.props.openModal},this.props.buttonContent);return this.props.show&&(modal=React.createElement("div",{style:backdropStyle,onClick:this.props.closeModal},React.createElement("div",{style:modalStyle,onClick:function(e){e.stopPropagation()}},React.createElement("div",{style:titleStyle},this.props.title,React.createElement("span",{style:glyphStyle,onClick:this.props.closeModal},"Ã—")),React.createElement("div",{style:bodyStyle},this.props.children)))),React.createElement("div",{style:this.props.style},button,modal)}}]),Modal}(React.Component);Modal.propTypes={title:React.PropTypes.string,buttonClass:React.PropTypes.string,buttonStyle:React.PropTypes.object,buttonContent:React.PropTypes.object,show:React.PropTypes.boolean,closeModal:React.PropTypes.func,openModal:React.PropTypes.func},Modal.defaultProps={buttonClass:"btn btn-primary"},exports.default=Modal},function(module,exports){"use strict";function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Loader=function(_React$Component){function Loader(props){return _classCallCheck(this,Loader),_possibleConstructorReturn(this,(Loader.__proto__||Object.getPrototypeOf(Loader)).call(this,props))}return _inherits(Loader,_React$Component),_createClass(Loader,[{key:"render",value:function(){return React.createElement("div",{className:"loader-container"},React.createElement("div",{className:"loader"}))}}]),Loader}(React.Component);exports.default=Loader},function(module,exports){"use strict";function formatColumn(column,cell,rowData,rowHeaders){var row={};rowHeaders.forEach(function(header,index){row[header]=rowData[index]},this);var classes=[];if(classes=classes.join(" "),"Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row.Barcode;return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Parent Barcode"===column){var specimenURL=loris.BaseURL+"/biobank/specimen/?barcode="+row["Parent Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:specimenURL},cell))}if("Container Barcode"===column){var containerURL=loris.BaseURL+"/biobank/container/?barcode="+row["Container Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:containerURL},cell))}return React.createElement("td",{className:classes},cell)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatColumn},function(module,exports){"use strict";function formatColumn(column,cell,rowData,rowHeaders){var row={};rowHeaders.forEach(function(header,index){row[header]=rowData[index]},this);var classes=[];if(classes=classes.join(" "),"Barcode"===column){var containerURL=loris.BaseURL+"/biobank/container/?barcode="+row.Barcode;return React.createElement("td",{className:classes},React.createElement("a",{href:containerURL},cell))}if("Parent Barcode"===column){loris.BaseURL+"/biobank/container/?barcode="+row["Parent Barcode"];return React.createElement("td",{className:classes},React.createElement("a",{href:containerURL},cell))}return React.createElement("td",{className:classes},cell)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=formatColumn}]);
//# sourceMappingURL=biobankIndex.js.map